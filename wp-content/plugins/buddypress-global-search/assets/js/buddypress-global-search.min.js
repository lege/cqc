jQuery(document).ready(function(e){BBOSS_GLOBAL_SEARCH.cache=[],"yes"==BBOSS_GLOBAL_SEARCH.enable_ajax_search&&e("form[action='"+BBOSS_GLOBAL_SEARCH.search_url+"']").each(function(){var a=e(this);$search_field=a.find("input[name='s']"),$search_field.length>0&&(currentType="",e($search_field).autocomplete({source:function(a,t){var s=a.term;if(s in BBOSS_GLOBAL_SEARCH.cache)return void t(BBOSS_GLOBAL_SEARCH.cache[s]);var n={action:BBOSS_GLOBAL_SEARCH.action,nonce:BBOSS_GLOBAL_SEARCH.nonce,search_term:a.term};t({value:'<div class="loading-msg"><span class="bb_global_search_spinner"></span>'+BBOSS_GLOBAL_SEARCH.loading_msg+"</div>"}),e.ajax({url:ajaxurl,dataType:"json",data:n,success:function(e){BBOSS_GLOBAL_SEARCH.cache[s]=e,t(e)}})},minLength:2,select:function(a,t){return window.location=e(t.item.value).find("a").attr("href"),!1},focus:function(){return e(".ui-autocomplete li").removeClass("ui-state-hover"),e(".ui-autocomplete").find("li:has(a.ui-state-focus)").addClass("ui-state-hover"),!1},open:function(){e(".bb-global-search-ac").outerWidth(e(this).outerWidth())}}).data("ui-autocomplete")._renderItem=function(a,t){return a.addClass("bb-global-search-ac"),""!=t.type_label?(e(a).data("current_cat",t.type),e("<li>").attr("class","bbls-"+t.type+"-type bbls-category").append("<span>"+t.value+"</span>").appendTo(a)):e("<li>").attr("class","bbls-"+t.type+"-type bbls-sub-item").append("<a class='x'>"+t.value+"</a>").appendTo(a)})}),e(document).on("click",".bboss_search_results_wrapper .item-list-tabs li a",function(a){return a.preventDefault(),_this=this,e(this).addClass("loading"),get_page=e.post(ajaxurl,{action:BBOSS_GLOBAL_SEARCH.action,nonce:BBOSS_GLOBAL_SEARCH.nonce,subset:e(this).parent().data("item"),s:BBOSS_GLOBAL_SEARCH.search_term,view:"content"}),get_page.done(function(a){e(_this).removeClass("loading"),""!=a&&(present=e(".bboss_search_page"),present.after(a),present.remove())}),get_page.fail(function(){e(_this).removeClass("loading")}),!1}),e(document).on("click",".bboss_search_results_wrapper .pagination-links a",function(a){a.preventDefault(),_this=this,e(this).addClass("loading");var t={action:BBOSS_GLOBAL_SEARCH.action,nonce:BBOSS_GLOBAL_SEARCH.nonce,subset:e(this).parent().data("item"),s:BBOSS_GLOBAL_SEARCH.search_term,view:"content",list:e(this).data("pagenumber")},s=e(".bboss_search_results_wrapper .item-list-tabs li.active").data("item");return t.subset=s,get_page=e.post(ajaxurl,t),get_page.done(function(a){e(_this).removeClass("loading"),""!=a&&(present=e(".bboss_search_page"),present.after(a),present.remove())}),get_page.fail(function(){e(_this).removeClass("loading")}),!1})});