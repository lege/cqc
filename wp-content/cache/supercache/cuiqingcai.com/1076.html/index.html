<!DOCTYPE HTML>
<html>
<head>
<meta charset="UTF-8">
<meta name="baidu-tc-verification" content="0fb041a64ee71333c957d8c784961cc8" />
<meta property="qc:admins" content="145637425211673116375" />
<meta http-equiv="X-UA-Compatible" content="IE=10,IE=9,IE=8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0, minimum-scale=1.0, maximum-scale=1.0">
<title>Python爬虫实战五之模拟登录淘宝并获取所有订单 | 静觅</title>
<script>
window._deel = {name: '静觅',url: 'http://cuiqingcai.com/wp-content/themes/Yusi', ajaxpager: '', commenton: 1, roll: [0,0]}
</script>

<!-- All in One SEO Pack 2.2.6.2 by Michael Torbert of Semper Fi Web Design[392,435] -->
<meta name="description" itemprop="description" content="经过多次尝试，模拟登录淘宝终于成功了，实在是不容易，淘宝的登录加密和验证太复杂了，煞费苦心，在此写出来和大家一起分享，希望大家支持。 本篇内容 1. python模拟登录淘宝网页 2. 获取登录用户的所有订单详情 3. 学会应对出现验证码的情况 4." />

<meta name="keywords" itemprop="keywords" content="python,爬虫" />

<!-- /all in one seo pack -->
		<script type="text/javascript">
			window._wpemojiSettings = {"baseUrl":"http:\/\/s.w.org\/images\/core\/emoji\/72x72\/","ext":".png","source":{"concatemoji":"http:\/\/blog.cuiqingcai.com\/wp-includes\/js\/wp-emoji-release.min.js?ver=4.2.5"}};
			!function(a,b,c){function d(a){var c=b.createElement("canvas"),d=c.getContext&&c.getContext("2d");return d&&d.fillText?(d.textBaseline="top",d.font="600 32px Arial","flag"===a?(d.fillText(String.fromCharCode(55356,56812,55356,56807),0,0),c.toDataURL().length>3e3):(d.fillText(String.fromCharCode(55357,56835),0,0),0!==d.getImageData(16,16,1,1).data[0])):!1}function e(a){var c=b.createElement("script");c.src=a,c.type="text/javascript",b.getElementsByTagName("head")[0].appendChild(c)}var f,g;c.supports={simple:d("simple"),flag:d("flag")},c.DOMReady=!1,c.readyCallback=function(){c.DOMReady=!0},c.supports.simple&&c.supports.flag||(g=function(){c.readyCallback()},b.addEventListener?(b.addEventListener("DOMContentLoaded",g,!1),a.addEventListener("load",g,!1)):(a.attachEvent("onload",g),b.attachEvent("onreadystatechange",function(){"complete"===b.readyState&&c.readyCallback()})),f=c.source||{},f.concatemoji?e(f.concatemoji):f.wpemoji&&f.twemoji&&(e(f.twemoji),e(f.wpemoji)))}(window,document,window._wpemojiSettings);
		</script>
		<style type="text/css">
img.wp-smiley,
img.emoji {
	display: inline !important;
	border: none !important;
	box-shadow: none !important;
	height: 1em !important;
	width: 1em !important;
	margin: 0 .07em !important;
	vertical-align: -0.1em !important;
	background: none !important;
	padding: 0 !important;
}
</style>
<link rel='stylesheet' id='crayon-css'  href='http://cuiqingcai.com/wp-content/plugins/crayon-syntax-highlighter/css/min/crayon.min.css?ver=2.7.1' type='text/css' media='all' />
<link rel='stylesheet' id='crayon-theme-github-css'  href='http://cuiqingcai.com/wp-content/plugins/crayon-syntax-highlighter/themes/github/github.css?ver=2.7.1' type='text/css' media='all' />
<link rel='stylesheet' id='crayon-font-monaco-css'  href='http://cuiqingcai.com/wp-content/plugins/crayon-syntax-highlighter/fonts/monaco.css?ver=2.7.1' type='text/css' media='all' />
<link rel='stylesheet' id='page-list-style-css'  href='http://cuiqingcai.com/wp-content/plugins/sitemap/css/page-list.css?ver=4.3' type='text/css' media='all' />
<link rel='stylesheet' id='style-css'  href='http://cuiqingcai.com/wp-content/themes/Yusi/style.css?ver=33' type='text/css' media='all' />
<script type="text/javascript">
var duoshuoQuery = {"short_name":"cuiqingcai","sso":{"login":"http:\/\/blog.cuiqingcai.com\/wp-login.php?action=duoshuo_login","logout":"http:\/\/blog.cuiqingcai.com\/wp-login.php?action=logout&_wpnonce=d6fca5fc89"},"theme":"default","stylePatch":"wordpress\/\u9759\u89c5"};
duoshuoQuery.sso.login += '&redirect_to=' + encodeURIComponent(window.location.href);
duoshuoQuery.sso.logout += '&redirect_to=' + encodeURIComponent(window.location.href);
</script>
<script type="text/javascript" src="http://static.duoshuo.com/embed.js" charset="UTF-8" async="async"></script>
<script type='text/javascript' src='//libs.baidu.com/jquery/1.8.3/jquery.min.js?ver=1.0'></script>
<script type='text/javascript'>
/* <![CDATA[ */
var CrayonSyntaxSettings = {"version":"2.7.1","is_admin":"0","ajaxurl":"http:\/\/blog.cuiqingcai.com\/wp-admin\/admin-ajax.php","prefix":"crayon-","setting":"crayon-setting","selected":"crayon-setting-selected","changed":"crayon-setting-changed","special":"crayon-setting-special","orig_value":"data-orig-value","debug":""};
var CrayonSyntaxStrings = {"copy":"\u4f7f\u7528 %s \u590d\u5236\uff0c\u4f7f\u7528 %s \u7c98\u8d34\u3002","minimize":"\u70b9\u51fb\u5c55\u5f00\u4ee3\u7801"};
/* ]]> */
</script>
<script type='text/javascript' src='http://cuiqingcai.com/wp-content/plugins/crayon-syntax-highlighter/js/min/crayon.min.js?ver=2.7.1'></script>
<script type='text/javascript' src='http://cuiqingcai.com/wp-content/themes/Yusi/js/jquery.fitvids.js?ver=2.0.110526'></script>
<link rel='prev' title='WordPress解决修改style.css不生效问题三步走！' href='http://blog.cuiqingcai.com/1070.html' />
<link rel='next' title='PHP高级特性一之正则表达式用法' href='http://blog.cuiqingcai.com/1186.html' />
<link rel='canonical' href='http://blog.cuiqingcai.com/1076.html' />
<link rel='shortlink' href='http://blog.cuiqingcai.com/?p=1076' />
<meta name="keywords" content="Python, 爬虫, Python">
<meta name="description" content="经过多次尝试，模拟登录淘宝终于成功了，实在是不容易，淘宝的登录加密和验证太复杂了，煞费苦心，在此写出来和大家一起分享，希望大家支持。 本篇内容 1. python模拟登录淘宝网页  2. 获取登录用户的所有订单详情  3. 学会应对出现验证码的情况  4. 体会一下复杂的模拟登录机制 探索部分成果 1. 淘宝的密码用了AES加密算法，最终将密码转化为256位，在POST时，传输的是256位长度的密码。  2. 淘宝在登录时必须要输入验证">
        <script type="text/javascript">
            jQuery(document).ready( function() {
                jQuery('.video').fitVids();
            });
        </script><!--[if lt IE 9]><script src="http://cuiqingcai.com/wp-content/themes/Yusi/js/html5.js"></script><![endif]-->

<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "//hm.baidu.com/hm.js?3ef185224776ec2561c9f7066ead4f24";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>
<meta name="360-site-verification" content="bdc579accc68a98f1258ebcce2266afa" />
<script type="text/javascript" name="baidu-tc-cerfication" data-appid="5411405" src="http://apps.bdimg.com/cloudaapi/lightapp.js"></script>
<link rel="shortcut icon" type="image/x-icon" href="http://blog.cuiqingcai.com/fav.png" />
<script type="text/javascript">
$(document).ready(function(){
	var imgs = new Array();
	imgs[0] = 'http://qiniu.cuiqingcai.com/wp-content/uploads/2015/05/20150525111154.jpg';
	imgs[1] = 'http://qiniu.cuiqingcai.com/wp-content/uploads/2015/05/20150525111447.jpg';
	imgs[2] = 'http://qiniu.cuiqingcai.com/wp-content/uploads/2015/05/20150525112058.jpg';
	imgs[3] = 'http://qiniu.cuiqingcai.com/wp-content/uploads/2015/05/20150525112112.jpg';
	imgs[4] = 'http://qiniu.cuiqingcai.com/wp-content/uploads/2015/05/20150525112129.jpg';
	imgs[5] = 'http://qiniu.cuiqingcai.com/wp-content/uploads/2015/05/20150525112155.jpg';
	$('.ds-avatar img[src*="cdncache"]').each(function(){
		var rand = Math.floor(Math.random()*imgs.length);
		$(this).attr("src",imgs[rand]);
	})
});
</script>
</head>
<body class="single single-post postid-1076 single-format-standard">

<header id="header" class="header">
<div class="container-inner">
 <div class="yusi-logo">
                    <a href="/">
                        <h1>
                                                        <span class="yusi-mono">静觅</span>
                                                        <span class="yusi-bloger">静静寻觅生活的美好</span>
                                                    </h1>
                    </a>
    </div>
</div>

	<div id="nav-header" class="navbar">
		
		<ul class="nav">
			<li id="menu-item-44" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-44"><a href="http://cuiqingcai.com">首页</a></li>
<li id="menu-item-14" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children menu-item-14"><a href="http://blog.cuiqingcai.com/category/life">生活笔记</a>
<ul class="sub-menu">
	<li id="menu-item-19" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-19"><a href="http://blog.cuiqingcai.com/category/life/notes">个人随笔</a></li>
	<li id="menu-item-18" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-18"><a href="http://blog.cuiqingcai.com/category/life/daily">个人日记</a></li>
	<li id="menu-item-15" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-15"><a href="http://blog.cuiqingcai.com/category/life/presatation">个人展示</a></li>
</ul>
</li>
<li id="menu-item-7" class="menu-item menu-item-type-taxonomy menu-item-object-category current-post-ancestor menu-item-has-children menu-item-7"><a href="http://blog.cuiqingcai.com/category/technique">技术杂谈</a>
<ul class="sub-menu">
	<li id="menu-item-9" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-9"><a href="http://blog.cuiqingcai.com/category/technique/cc">C/C++</a></li>
	<li id="menu-item-11" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-11"><a href="http://blog.cuiqingcai.com/category/technique/java">Java</a></li>
	<li id="menu-item-17" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-17"><a href="http://blog.cuiqingcai.com/category/technique/php">PHP</a></li>
	<li id="menu-item-153" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-153"><a href="http://blog.cuiqingcai.com/category/technique/html">HTML</a></li>
	<li id="menu-item-960" class="menu-item menu-item-type-taxonomy menu-item-object-category current-post-ancestor current-menu-parent current-post-parent menu-item-960"><a href="http://blog.cuiqingcai.com/category/technique/python">Python</a></li>
	<li id="menu-item-1277" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-1277"><a href="http://blog.cuiqingcai.com/category/technique/javascript">JS</a></li>
	<li id="menu-item-16" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-16"><a href="http://blog.cuiqingcai.com/category/technique/other">Other</a></li>
</ul>
</li>
<li id="menu-item-418" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-418"><a href="http://blog.cuiqingcai.com/category/resources">福利专区</a></li>
<li id="menu-item-851" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-851"><a href="http://blog.cuiqingcai.com/about">关于自己</a></li>
<li id="menu-item-251" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-251"><a href="http://blog.cuiqingcai.com/contact">给我留言</a></li>
<li id="menu-item-1131" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-1131"><a href="http://blog.cuiqingcai.com/donate">赞助作者</a></li>
<li style="float:right;">
                    <div class="toggle-search"><i class="fa fa-search"></i></div>
<div class="search-expand" style="display: none;"><div class="search-expand-inner"><form method="get" class="searchform themeform" onsubmit="location.href='http://blog.cuiqingcai.com/?s=' + encodeURIComponent(this.s.value).replace(/%20/g, '+'); return false;" action="/"><div> <input type="ext" class="search" name="s" onblur="if(this.value=='')this.value='search...';" onfocus="if(this.value=='search...')this.value='';" value="search..."></div></form></div></div>
</li>
		</ul>
	</div>
	</div>
</header>
<section class="container"><div class="speedbar">
					<div class="pull-right">
				<i class="fa fa-user"></i> <a href="/wp-login.php?action=register">投稿</a>&nbsp;&nbsp;&nbsp;   <i class="fa fa-power-off"></i> <a href="http://blog.cuiqingcai.com/wp-login.php">登录</a>			</div>
				<div class="toptip"><strong class="text-success"><i class="fa fa-volume-up"></i> </strong>    欢迎来到我的博客，浏览文章时点击一下广告是您对我最大的支持，谢谢啦！</div>
	</div>
	<div class="content-wrap">
	<div class="content">
<div class="breadcrumbs"><a title="返回首页" href="http://blog.cuiqingcai.com"><i class="fa fa-home"></i></a> <small>></small> <a href="http://blog.cuiqingcai.com/category/technique">技术杂谈</a> <small>></small> <a href="http://blog.cuiqingcai.com/category/technique/python">Python</a> <small>></small> <span class="muted">Python爬虫实战五之模拟登录淘宝并获取所有订单</span></div>
				<header class="article-header">
			<h1 class="article-title"><a href="http://blog.cuiqingcai.com/1076.html">Python爬虫实战五之模拟登录淘宝并获取所有订单</a></h1>
			<div class="meta">
				<span id="mute-category" class="muted"><i class="fa fa-list-alt"></i><a href="http://blog.cuiqingcai.com/category/technique/python"> Python</a></span>				<span class="muted"><i class="fa fa-user"></i> <a href="http://blog.cuiqingcai.com/author/cqcre">崔庆才</a></span>
				<time class="muted"><i class="fa fa-clock-o"></i> 9个月前 (02-23)</time>
				<span class="muted"><i class="fa fa-eye"></i> 18330℃</span>
				<span class="muted"><i class="fa fa-comments-o"></i> <a href="http://blog.cuiqingcai.com/1076.html#comments">79评论</a></span>							</div>
		</header>
<div class="banner banner-post"><!-- tuici -->
<script type="text/javascript">
    /* 创建于 2015-02-23*/
var cpro_id = "u1959022";
</script>
<script src="http://cpro.baidustatic.com/cpro/ui/cnw.js" type="text/javascript"></script>
<!-- biaoqian -->
<script type="text/javascript">
    /*860*60 创建于 2015-02-25*/
    var cpro_id = "u1959939";
</script>
<script src="http://cpro.baidustatic.com/cpro/ui/c.js" type="text/javascript"></script>

</div>		<article class="article-content">
			<p>经过多次尝试，模拟登录淘宝终于成功了，实在是不容易，淘宝的登录加密和验证太复杂了，煞费苦心，在此写出来和大家一起分享，希望大家支持。</p>
<h2>本篇内容</h2>
<p>1. python模拟登录淘宝网页</p>
<p>2. 获取登录用户的所有订单详情</p>
<p>3. 学会应对出现验证码的情况</p>
<p>4. 体会一下复杂的模拟登录机制</p>
<h2>探索部分成果</h2>
<p>1. 淘宝的密码用了AES加密算法，最终将密码转化为256位，在POST时，传输的是256位长度的密码。</p>
<p>2. 淘宝在登录时必须要输入验证码，在经过几次尝试失败后最终获取了验证码图片让用户手动输入来验证。</p>
<p>3. 淘宝另外有复杂且每天在变的 ua 加密算法，在程序中我们需要提前获取某一 ua 码才可进行模拟登录。</p>
<p>4. 在获取最后的登录 st 码时，历经了多次请求和正则表达式提取，且 st 码只可使用一次。</p>
<h2>整体思路梳理</h2>
<p>1. 手动到浏览器获取 ua 码以及 加密后的密码，只获取一次即可，一劳永逸。</p>
<p>2. 向登录界面发送登录请求，POST 一系列参数，包括 ua 码以及密码等等，获得响应，提取验证码图像。</p>
<p>3. 用户输入手动验证码，重新加入验证码数据再次用 POST 方式发出请求，获得响应，提取 J_Htoken。</p>
<p>4. 利用 J_Htoken 向 alipay 发出请求，获得响应，提取 st 码。</p>
<p>5. 利用 st 码和用户名，重新发出登录请求，获得响应，提取重定向网址，存储 cookie。</p>
<p>6. 利用 cookie 向其他个人页面如订单页面发出请求，获得响应，提取订单详情。</p>
<p>是不是没看懂？没事，下面我将一点点说明自己模拟登录的过程，希望大家可以理解。</p>
<h2>前期准备</h2>
<p>由于淘宝的 ua 算法和 aes 密码加密算法太复杂了，ua 算法在淘宝每天都是在变化的，不过，这个内容你获取之后一直用即可，经过测试之后没有问题，一劳永逸。</p>
<p>那么 ua 和 aes 密码怎样获取呢？</p>
<p>我们就从浏览器里面直接获取吧，打开浏览器，找到淘宝的登录界面，按 F12 或者浏览器右键审查元素。</p>
<p>在这里我用的是火狐浏览器，首先记得在浏览器中设置一下显示持续日志，要不然页面跳转了你就看不到之前抓取的信息了。在这里截图如下：</p>
<p><a href="http://qiniu.cuiqingcai.com/wp-content/uploads/2015/02/20150225013600.jpg"><img class="alignnone size-full wp-image-1084" src="http://qiniu.cuiqingcai.com/wp-content/uploads/2015/02/20150225013600.jpg" alt="20150225013600" width="1343" height="734" /></a></p>
<p>&nbsp;</p>
<p>好，那么接下来我们就从浏览器中获取 ua 和 aes 密码</p>
<p>点击网络选项卡，这时都是空的，什么数据也没有截取。这时你就在网页上登录一下试试吧，输入用户名啊，密码啊，有必要时需要输入验证码，点击登录。</p>
<p><a href="http://qiniu.cuiqingcai.com/wp-content/uploads/2015/02/QQ截图20150225014124.jpg"><img class="alignnone size-full wp-image-1085" src="http://qiniu.cuiqingcai.com/wp-content/uploads/2015/02/QQ截图20150225014124.jpg" alt="QQ截图20150225014124" width="1304" height="499" /></a></p>
<p>等跳转成功后，你就可以看到好多日志记录了，点击图中的那一行 login.taobo.com，然后查看参数，你就会发现表单数据了，其中就包括 ua 还有下面的 password2，把这俩复制下来，我们之后要用到的。这就是我们需要的 ua 还有 aes 加密后的密码。</p>
<p><a href="http://qiniu.cuiqingcai.com/wp-content/uploads/2015/02/QQ截图20150225014019.jpg"><img class="alignnone size-full wp-image-1086" src="http://qiniu.cuiqingcai.com/wp-content/uploads/2015/02/QQ截图20150225014019.jpg" alt="QQ截图20150225014019" width="1345" height="401" /></a></p>
<p>恩，读到这里，你应该获取到了属于自己的 ua 和 password2 两个内容。</p>
<h2>输入验证码并获取J_HToken</h2>
<p>经过博主本人亲自验证，有时候，在模拟登录时你并不需要输入验证码，它直接返回的结果就是前面所说的下一步用到的 J_Token，而有时候你则会需要输入验证码，等你手动输入验证码之后，重新请求登录一次。</p>
<p>博主是边写程序边更新文章的，现在写完了是否有必要输入验证码的检验以及在浏览器中呈现验证码。</p>
<p>代码如下</p><!-- Crayon Syntax Highlighter v2.7.1 -->

		<div id="crayon-5645b6f835890189300681" class="crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover wrap" style=" margin-top: 12px; margin-bottom: 12px; float: left; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button" title="切换是否显示行编号"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="纯文本显示代码"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="切换自动换行"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="点击展开代码"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="复制代码"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="在新窗口中显示代码"><div class="crayon-button-icon"></div></div></div></div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="crayon-plain-wrap"><textarea  class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
__author__ = 'CQC'
# -*- coding:utf-8 -*-

import urllib
import urllib2
import cookielib
import re
import webbrowser

#模拟登录淘宝类
class Taobao:

    #初始化方法
    def __init__(self):
        #登录的URL
        self.loginURL = "https://login.taobao.com/member/login.jhtml"
        #代理IP地址，防止自己的IP被封禁
        self.proxyURL = 'http://120.193.146.97:843'
        #登录POST数据时发送的头部信息
        self.loginHeaders =  {
            'Host':'login.taobao.com',
            'User-Agent' : 'Mozilla/5.0 (Windows NT 6.1; WOW64; rv:35.0) Gecko/20100101 Firefox/35.0',
            'Referer' : 'https://login.taobao.com/member/login.jhtml',
            'Content-Type': 'application/x-www-form-urlencoded',
            'Connection' : 'Keep-Alive'
        }
        #用户名
        self.username = 'cqcre'
        #ua字符串，经过淘宝ua算法计算得出，包含了时间戳,浏览器,屏幕分辨率,随机数,鼠标移动,鼠标点击,其实还有键盘输入记录,鼠标移动的记录、点击的记录等等的信息
        self.ua = '191UW5TcyMNYQwiAiwTR3tCf0J/QnhEcUpkMmQ=|Um5Ockt0TXdPc011TXVKdyE=|U2xMHDJ+H2QJZwBxX39Rb1d5WXcrSixAJ1kjDVsN|VGhXd1llXGNaYFhkWmJaYl1gV2pIdUtyTXRKfkN4Qn1FeEF6R31TBQ==|VWldfS0TMw8xDjYWKhAwHiUdOA9wCDEVaxgkATdcNU8iDFoM|VmNDbUMV|V2NDbUMV|WGRYeCgGZhtmH2VScVI2UT5fORtmD2gCawwuRSJHZAFsCWMOdVYyVTpbPR99HWAFYVMpUDUFORshHiQdJR0jAT0JPQc/BDoFPgooFDZtVBR5Fn9VOwt2EWhCOVQ4WSJPJFkHXhgoSDVIMRgnHyFqQ3xEezceIRkmahRqFDZLIkUvRiEDaA9qQ3xEezcZORc5bzk=|WWdHFy0TMw8vEy0UIQE0ADgYJBohGjoAOw4uEiwXLAw2DThu9a==|WmBAED5+KnIbdRh1GXgFQSZbGFdrUm1UblZqVGxQa1ZiTGxQcEp1I3U=|W2NDEz19KXENZwJjHkY7Ui9OJQsre09zSWlXY1oMLBExHzERLxsuE0UT|XGZGFjh4LHQdcx5zH34DRyBdHlFtVGtSaFBsUmpWbVBkSmpXd05zTnMlcw==|XWdHFzl5LXUJYwZnGkI/VitKIQ8vEzMKNws3YTc=|XmdaZ0d6WmVFeUB8XGJaYEB4TGxWbk5yTndXa0tyT29Ta0t1QGBeZDI='
        #密码，在这里不能输入真实密码，淘宝对此密码进行了加密处理，256位，此处为加密后的密码
        self.password2 = '7511aa68sx629e45de220d29174f1066537a73420ef6dbb5b46f202396703a2d56b0312df8769d886e6ca63d587fdbb99ee73927e8c07d9c88cd02182e1a21edc13fb8e140a4a2a4b5c253bf38484bd0e08199e03eb9bf7b365a5c673c03407d812b91394f0d3c7564042e3f2b11d156aeea37ad6460118914125ab8f8ac466f'
        self.post = post = {
            'ua':self.ua,
            'TPL_checkcode':'',
            'CtrlVersion': '1,0,0,7',
            'TPL_password':'',
            'TPL_redirect_url':'http://i.taobao.com/my_taobao.htm?nekot=udm8087E1424147022443',
            'TPL_username':self.username,
            'loginsite':'0',
            'newlogin':'0',
            'from':'tb',
            'fc':'default',
            'style':'default',
            'css_style':'',
            'tid':'XOR_1_000000000000000000000000000000_625C4720470A0A050976770A',
            'support':'000001',
            'loginType':'4',
            'minititle':'',
            'minipara':'',
            'umto':'NaN',
            'pstrong':'3',
            'llnick':'',
            'sign':'',
            'need_sign':'',
            'isIgnore':'',
            'full_redirect':'',
            'popid':'',
            'callback':'',
            'guf':'',
            'not_duplite_str':'',
            'need_user_id':'',
            'poy':'',
            'gvfdcname':'10',
            'gvfdcre':'',
            'from_encoding ':'',
            'sub':'',
            'TPL_password_2':self.password2,
            'loginASR':'1',
            'loginASRSuc':'1',
            'allp':'',
            'oslanguage':'zh-CN',
            'sr':'1366*768',
            'osVer':'windows|6.1',
            'naviVer':'firefox|35'
        }
        #将POST的数据进行编码转换
        self.postData = urllib.urlencode(self.post)
        #设置代理
        self.proxy = urllib2.ProxyHandler({'http':self.proxyURL})
        #设置cookie
        self.cookie = cookielib.LWPCookieJar()
        #设置cookie处理器
        self.cookieHandler = urllib2.HTTPCookieProcessor(self.cookie)
        #设置登录时用到的opener，它的open方法相当于urllib2.urlopen
        self.opener = urllib2.build_opener(self.cookieHandler,self.proxy,urllib2.HTTPHandler)


    #得到是否需要输入验证码，这次请求的相应有时会不同，有时需要验证有时不需要
    def needIdenCode(self):
        #第一次登录获取验证码尝试，构建request
        request = urllib2.Request(self.loginURL,self.postData,self.loginHeaders)
        #得到第一次登录尝试的相应
        response = self.opener.open(request)
        #获取其中的内容
        content = response.read().decode('gbk')
        #获取状态吗
        status = response.getcode()
        #状态码为200，获取成功
        if status == 200:
            print u"获取请求成功"
            #\u8bf7\u8f93\u5165\u9a8c\u8bc1\u7801这六个字是请输入验证码的utf-8编码
            pattern = re.compile(u'\u8bf7\u8f93\u5165\u9a8c\u8bc1\u7801',re.S)
            result = re.search(pattern,content)
            #如果找到该字符，代表需要输入验证码
            if result:
                print u"此次安全验证异常，您需要输入验证码"
                return content
            #否则不需要
            else:
                print u"此次安全验证通过，您这次不需要输入验证码"
                return False
        else:
            print u"获取请求失败"

    #得到验证码图片
    def getIdenCode(self,page):
        #得到验证码的图片
        pattern = re.compile('&lt;img id="J_StandardCode_m.*?data-src="(.*?)"',re.S)
        #匹配的结果
        matchResult = re.search(pattern,page)
        #已经匹配得到内容，并且验证码图片链接不为空
        if matchResult and matchResult.group(1):
            print matchResult.group(1)
            return matchResult.group(1)
        else:
            print u"没有找到验证码内容"
            return False

    #程序运行主干
    def main(self):
        #是否需要验证码，是则得到页面内容，不是则返回False
        needResult = self.needIdenCode()
        if not needResult == False:
            print u"您需要手动输入验证码"
            idenCode = self.getIdenCode(needResult)
            #得到了验证码的链接
            if not idenCode == False:
                print u"验证码获取成功"
                print u"请在浏览器中输入您看到的验证码"
                webbrowser.open_new_tab(idenCode)
            #验证码链接为空，无效验证码
            else:
                print u"验证码获取失败，请重试"
        else:
            print u"不需要输入验证码"



taobao = Taobao()
taobao.main()</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5645b6f835890189300681-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f835890189300681-2">2</div><div class="crayon-num" data-line="crayon-5645b6f835890189300681-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f835890189300681-4">4</div><div class="crayon-num" data-line="crayon-5645b6f835890189300681-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f835890189300681-6">6</div><div class="crayon-num" data-line="crayon-5645b6f835890189300681-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f835890189300681-8">8</div><div class="crayon-num" data-line="crayon-5645b6f835890189300681-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f835890189300681-10">10</div><div class="crayon-num" data-line="crayon-5645b6f835890189300681-11">11</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f835890189300681-12">12</div><div class="crayon-num" data-line="crayon-5645b6f835890189300681-13">13</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f835890189300681-14">14</div><div class="crayon-num" data-line="crayon-5645b6f835890189300681-15">15</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f835890189300681-16">16</div><div class="crayon-num" data-line="crayon-5645b6f835890189300681-17">17</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f835890189300681-18">18</div><div class="crayon-num" data-line="crayon-5645b6f835890189300681-19">19</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f835890189300681-20">20</div><div class="crayon-num" data-line="crayon-5645b6f835890189300681-21">21</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f835890189300681-22">22</div><div class="crayon-num" data-line="crayon-5645b6f835890189300681-23">23</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f835890189300681-24">24</div><div class="crayon-num" data-line="crayon-5645b6f835890189300681-25">25</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f835890189300681-26">26</div><div class="crayon-num" data-line="crayon-5645b6f835890189300681-27">27</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f835890189300681-28">28</div><div class="crayon-num" data-line="crayon-5645b6f835890189300681-29">29</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f835890189300681-30">30</div><div class="crayon-num" data-line="crayon-5645b6f835890189300681-31">31</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f835890189300681-32">32</div><div class="crayon-num" data-line="crayon-5645b6f835890189300681-33">33</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f835890189300681-34">34</div><div class="crayon-num" data-line="crayon-5645b6f835890189300681-35">35</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f835890189300681-36">36</div><div class="crayon-num" data-line="crayon-5645b6f835890189300681-37">37</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f835890189300681-38">38</div><div class="crayon-num" data-line="crayon-5645b6f835890189300681-39">39</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f835890189300681-40">40</div><div class="crayon-num" data-line="crayon-5645b6f835890189300681-41">41</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f835890189300681-42">42</div><div class="crayon-num" data-line="crayon-5645b6f835890189300681-43">43</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f835890189300681-44">44</div><div class="crayon-num" data-line="crayon-5645b6f835890189300681-45">45</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f835890189300681-46">46</div><div class="crayon-num" data-line="crayon-5645b6f835890189300681-47">47</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f835890189300681-48">48</div><div class="crayon-num" data-line="crayon-5645b6f835890189300681-49">49</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f835890189300681-50">50</div><div class="crayon-num" data-line="crayon-5645b6f835890189300681-51">51</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f835890189300681-52">52</div><div class="crayon-num" data-line="crayon-5645b6f835890189300681-53">53</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f835890189300681-54">54</div><div class="crayon-num" data-line="crayon-5645b6f835890189300681-55">55</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f835890189300681-56">56</div><div class="crayon-num" data-line="crayon-5645b6f835890189300681-57">57</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f835890189300681-58">58</div><div class="crayon-num" data-line="crayon-5645b6f835890189300681-59">59</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f835890189300681-60">60</div><div class="crayon-num" data-line="crayon-5645b6f835890189300681-61">61</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f835890189300681-62">62</div><div class="crayon-num" data-line="crayon-5645b6f835890189300681-63">63</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f835890189300681-64">64</div><div class="crayon-num" data-line="crayon-5645b6f835890189300681-65">65</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f835890189300681-66">66</div><div class="crayon-num" data-line="crayon-5645b6f835890189300681-67">67</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f835890189300681-68">68</div><div class="crayon-num" data-line="crayon-5645b6f835890189300681-69">69</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f835890189300681-70">70</div><div class="crayon-num" data-line="crayon-5645b6f835890189300681-71">71</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f835890189300681-72">72</div><div class="crayon-num" data-line="crayon-5645b6f835890189300681-73">73</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f835890189300681-74">74</div><div class="crayon-num" data-line="crayon-5645b6f835890189300681-75">75</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f835890189300681-76">76</div><div class="crayon-num" data-line="crayon-5645b6f835890189300681-77">77</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f835890189300681-78">78</div><div class="crayon-num" data-line="crayon-5645b6f835890189300681-79">79</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f835890189300681-80">80</div><div class="crayon-num" data-line="crayon-5645b6f835890189300681-81">81</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f835890189300681-82">82</div><div class="crayon-num" data-line="crayon-5645b6f835890189300681-83">83</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f835890189300681-84">84</div><div class="crayon-num" data-line="crayon-5645b6f835890189300681-85">85</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f835890189300681-86">86</div><div class="crayon-num" data-line="crayon-5645b6f835890189300681-87">87</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f835890189300681-88">88</div><div class="crayon-num" data-line="crayon-5645b6f835890189300681-89">89</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f835890189300681-90">90</div><div class="crayon-num" data-line="crayon-5645b6f835890189300681-91">91</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f835890189300681-92">92</div><div class="crayon-num" data-line="crayon-5645b6f835890189300681-93">93</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f835890189300681-94">94</div><div class="crayon-num" data-line="crayon-5645b6f835890189300681-95">95</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f835890189300681-96">96</div><div class="crayon-num" data-line="crayon-5645b6f835890189300681-97">97</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f835890189300681-98">98</div><div class="crayon-num" data-line="crayon-5645b6f835890189300681-99">99</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f835890189300681-100">100</div><div class="crayon-num" data-line="crayon-5645b6f835890189300681-101">101</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f835890189300681-102">102</div><div class="crayon-num" data-line="crayon-5645b6f835890189300681-103">103</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f835890189300681-104">104</div><div class="crayon-num" data-line="crayon-5645b6f835890189300681-105">105</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f835890189300681-106">106</div><div class="crayon-num" data-line="crayon-5645b6f835890189300681-107">107</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f835890189300681-108">108</div><div class="crayon-num" data-line="crayon-5645b6f835890189300681-109">109</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f835890189300681-110">110</div><div class="crayon-num" data-line="crayon-5645b6f835890189300681-111">111</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f835890189300681-112">112</div><div class="crayon-num" data-line="crayon-5645b6f835890189300681-113">113</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f835890189300681-114">114</div><div class="crayon-num" data-line="crayon-5645b6f835890189300681-115">115</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f835890189300681-116">116</div><div class="crayon-num" data-line="crayon-5645b6f835890189300681-117">117</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f835890189300681-118">118</div><div class="crayon-num" data-line="crayon-5645b6f835890189300681-119">119</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f835890189300681-120">120</div><div class="crayon-num" data-line="crayon-5645b6f835890189300681-121">121</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f835890189300681-122">122</div><div class="crayon-num" data-line="crayon-5645b6f835890189300681-123">123</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f835890189300681-124">124</div><div class="crayon-num" data-line="crayon-5645b6f835890189300681-125">125</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f835890189300681-126">126</div><div class="crayon-num" data-line="crayon-5645b6f835890189300681-127">127</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f835890189300681-128">128</div><div class="crayon-num" data-line="crayon-5645b6f835890189300681-129">129</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f835890189300681-130">130</div><div class="crayon-num" data-line="crayon-5645b6f835890189300681-131">131</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f835890189300681-132">132</div><div class="crayon-num" data-line="crayon-5645b6f835890189300681-133">133</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f835890189300681-134">134</div><div class="crayon-num" data-line="crayon-5645b6f835890189300681-135">135</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f835890189300681-136">136</div><div class="crayon-num" data-line="crayon-5645b6f835890189300681-137">137</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f835890189300681-138">138</div><div class="crayon-num" data-line="crayon-5645b6f835890189300681-139">139</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f835890189300681-140">140</div><div class="crayon-num" data-line="crayon-5645b6f835890189300681-141">141</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f835890189300681-142">142</div><div class="crayon-num" data-line="crayon-5645b6f835890189300681-143">143</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f835890189300681-144">144</div><div class="crayon-num" data-line="crayon-5645b6f835890189300681-145">145</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f835890189300681-146">146</div><div class="crayon-num" data-line="crayon-5645b6f835890189300681-147">147</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f835890189300681-148">148</div><div class="crayon-num" data-line="crayon-5645b6f835890189300681-149">149</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f835890189300681-150">150</div><div class="crayon-num" data-line="crayon-5645b6f835890189300681-151">151</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5645b6f835890189300681-1"><span class="crayon-v">__author__</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">'CQC'</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f835890189300681-2"><span class="crayon-p"># -*- coding:utf-8 -*-</span></div><div class="crayon-line" id="crayon-5645b6f835890189300681-3">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f835890189300681-4"><span class="crayon-e">import </span><span class="crayon-e">urllib</span></div><div class="crayon-line" id="crayon-5645b6f835890189300681-5"><span class="crayon-e">import </span><span class="crayon-e">urllib2</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f835890189300681-6"><span class="crayon-e">import </span><span class="crayon-e">cookielib</span></div><div class="crayon-line" id="crayon-5645b6f835890189300681-7"><span class="crayon-e">import </span><span class="crayon-e">re</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f835890189300681-8"><span class="crayon-e">import </span><span class="crayon-v">webbrowser</span></div><div class="crayon-line" id="crayon-5645b6f835890189300681-9">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f835890189300681-10"><span class="crayon-p">#模拟登录淘宝类</span></div><div class="crayon-line" id="crayon-5645b6f835890189300681-11"><span class="crayon-t">class</span><span class="crayon-h"> </span><span class="crayon-v">Taobao</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f835890189300681-12">&nbsp;</div><div class="crayon-line" id="crayon-5645b6f835890189300681-13"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#初始化方法</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f835890189300681-14"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">def </span><span class="crayon-e">__init__</span><span class="crayon-sy">(</span><span class="crayon-r">self</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5645b6f835890189300681-15"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#登录的URL</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f835890189300681-16"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">loginURL</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">"https://login.taobao.com/member/login.jhtml"</span></div><div class="crayon-line" id="crayon-5645b6f835890189300681-17"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#代理IP地址，防止自己的IP被封禁</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f835890189300681-18"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">proxyURL</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">'http://120.193.146.97:843'</span></div><div class="crayon-line" id="crayon-5645b6f835890189300681-19"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#登录POST数据时发送的头部信息</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f835890189300681-20"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">loginHeaders</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5645b6f835890189300681-21"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'Host'</span><span class="crayon-o">:</span><span class="crayon-s">'login.taobao.com'</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f835890189300681-22"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'User-Agent'</span><span class="crayon-h"> </span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-s">'Mozilla/5.0 (Windows NT 6.1; WOW64; rv:35.0) Gecko/20100101 Firefox/35.0'</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5645b6f835890189300681-23"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'Referer'</span><span class="crayon-h"> </span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-s">'https://login.taobao.com/member/login.jhtml'</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f835890189300681-24"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'Content-Type'</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-s">'application/x-www-form-urlencoded'</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5645b6f835890189300681-25"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'Connection'</span><span class="crayon-h"> </span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-s">'Keep-Alive'</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f835890189300681-26"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-5645b6f835890189300681-27"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#用户名</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f835890189300681-28"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">username</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">'cqcre'</span></div><div class="crayon-line" id="crayon-5645b6f835890189300681-29"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#ua字符串，经过淘宝ua算法计算得出，包含了时间戳,浏览器,屏幕分辨率,随机数,鼠标移动,鼠标点击,其实还有键盘输入记录,鼠标移动的记录、点击的记录等等的信息</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f835890189300681-30"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">ua</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">'191UW5TcyMNYQwiAiwTR3tCf0J/QnhEcUpkMmQ=|Um5Ockt0TXdPc011TXVKdyE=|U2xMHDJ+H2QJZwBxX39Rb1d5WXcrSixAJ1kjDVsN|VGhXd1llXGNaYFhkWmJaYl1gV2pIdUtyTXRKfkN4Qn1FeEF6R31TBQ==|VWldfS0TMw8xDjYWKhAwHiUdOA9wCDEVaxgkATdcNU8iDFoM|VmNDbUMV|V2NDbUMV|WGRYeCgGZhtmH2VScVI2UT5fORtmD2gCawwuRSJHZAFsCWMOdVYyVTpbPR99HWAFYVMpUDUFORshHiQdJR0jAT0JPQc/BDoFPgooFDZtVBR5Fn9VOwt2EWhCOVQ4WSJPJFkHXhgoSDVIMRgnHyFqQ3xEezceIRkmahRqFDZLIkUvRiEDaA9qQ3xEezcZORc5bzk=|WWdHFy0TMw8vEy0UIQE0ADgYJBohGjoAOw4uEiwXLAw2DThu9a==|WmBAED5+KnIbdRh1GXgFQSZbGFdrUm1UblZqVGxQa1ZiTGxQcEp1I3U=|W2NDEz19KXENZwJjHkY7Ui9OJQsre09zSWlXY1oMLBExHzERLxsuE0UT|XGZGFjh4LHQdcx5zH34DRyBdHlFtVGtSaFBsUmpWbVBkSmpXd05zTnMlcw==|XWdHFzl5LXUJYwZnGkI/VitKIQ8vEzMKNws3YTc=|XmdaZ0d6WmVFeUB8XGJaYEB4TGxWbk5yTndXa0tyT29Ta0t1QGBeZDI='</span></div><div class="crayon-line" id="crayon-5645b6f835890189300681-31"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#密码，在这里不能输入真实密码，淘宝对此密码进行了加密处理，256位，此处为加密后的密码</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f835890189300681-32"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">password2</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">'7511aa68sx629e45de220d29174f1066537a73420ef6dbb5b46f202396703a2d56b0312df8769d886e6ca63d587fdbb99ee73927e8c07d9c88cd02182e1a21edc13fb8e140a4a2a4b5c253bf38484bd0e08199e03eb9bf7b365a5c673c03407d812b91394f0d3c7564042e3f2b11d156aeea37ad6460118914125ab8f8ac466f'</span></div><div class="crayon-line" id="crayon-5645b6f835890189300681-33"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">post</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">post</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f835890189300681-34"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'ua'</span><span class="crayon-o">:</span><span class="crayon-v">self</span><span class="crayon-sy">.</span><span class="crayon-v">ua</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5645b6f835890189300681-35"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'TPL_checkcode'</span><span class="crayon-o">:</span><span class="crayon-s">''</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f835890189300681-36"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'CtrlVersion'</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-s">'1,0,0,7'</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5645b6f835890189300681-37"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'TPL_password'</span><span class="crayon-o">:</span><span class="crayon-s">''</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f835890189300681-38"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'TPL_redirect_url'</span><span class="crayon-o">:</span><span class="crayon-s">'http://i.taobao.com/my_taobao.htm?nekot=udm8087E1424147022443'</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5645b6f835890189300681-39"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'TPL_username'</span><span class="crayon-o">:</span><span class="crayon-v">self</span><span class="crayon-sy">.</span><span class="crayon-v">username</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f835890189300681-40"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'loginsite'</span><span class="crayon-o">:</span><span class="crayon-s">'0'</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5645b6f835890189300681-41"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'newlogin'</span><span class="crayon-o">:</span><span class="crayon-s">'0'</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f835890189300681-42"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'from'</span><span class="crayon-o">:</span><span class="crayon-s">'tb'</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5645b6f835890189300681-43"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'fc'</span><span class="crayon-o">:</span><span class="crayon-s">'default'</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f835890189300681-44"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'style'</span><span class="crayon-o">:</span><span class="crayon-s">'default'</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5645b6f835890189300681-45"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'css_style'</span><span class="crayon-o">:</span><span class="crayon-s">''</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f835890189300681-46"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'tid'</span><span class="crayon-o">:</span><span class="crayon-s">'XOR_1_000000000000000000000000000000_625C4720470A0A050976770A'</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5645b6f835890189300681-47"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'support'</span><span class="crayon-o">:</span><span class="crayon-s">'000001'</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f835890189300681-48"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'loginType'</span><span class="crayon-o">:</span><span class="crayon-s">'4'</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5645b6f835890189300681-49"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'minititle'</span><span class="crayon-o">:</span><span class="crayon-s">''</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f835890189300681-50"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'minipara'</span><span class="crayon-o">:</span><span class="crayon-s">''</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5645b6f835890189300681-51"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'umto'</span><span class="crayon-o">:</span><span class="crayon-s">'NaN'</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f835890189300681-52"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'pstrong'</span><span class="crayon-o">:</span><span class="crayon-s">'3'</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5645b6f835890189300681-53"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'llnick'</span><span class="crayon-o">:</span><span class="crayon-s">''</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f835890189300681-54"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'sign'</span><span class="crayon-o">:</span><span class="crayon-s">''</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5645b6f835890189300681-55"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'need_sign'</span><span class="crayon-o">:</span><span class="crayon-s">''</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f835890189300681-56"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'isIgnore'</span><span class="crayon-o">:</span><span class="crayon-s">''</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5645b6f835890189300681-57"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'full_redirect'</span><span class="crayon-o">:</span><span class="crayon-s">''</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f835890189300681-58"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'popid'</span><span class="crayon-o">:</span><span class="crayon-s">''</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5645b6f835890189300681-59"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'callback'</span><span class="crayon-o">:</span><span class="crayon-s">''</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f835890189300681-60"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'guf'</span><span class="crayon-o">:</span><span class="crayon-s">''</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5645b6f835890189300681-61"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'not_duplite_str'</span><span class="crayon-o">:</span><span class="crayon-s">''</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f835890189300681-62"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'need_user_id'</span><span class="crayon-o">:</span><span class="crayon-s">''</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5645b6f835890189300681-63"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'poy'</span><span class="crayon-o">:</span><span class="crayon-s">''</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f835890189300681-64"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'gvfdcname'</span><span class="crayon-o">:</span><span class="crayon-s">'10'</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5645b6f835890189300681-65"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'gvfdcre'</span><span class="crayon-o">:</span><span class="crayon-s">''</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f835890189300681-66"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'from_encoding '</span><span class="crayon-o">:</span><span class="crayon-s">''</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5645b6f835890189300681-67"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'sub'</span><span class="crayon-o">:</span><span class="crayon-s">''</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f835890189300681-68"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'TPL_password_2'</span><span class="crayon-o">:</span><span class="crayon-v">self</span><span class="crayon-sy">.</span><span class="crayon-v">password2</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5645b6f835890189300681-69"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'loginASR'</span><span class="crayon-o">:</span><span class="crayon-s">'1'</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f835890189300681-70"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'loginASRSuc'</span><span class="crayon-o">:</span><span class="crayon-s">'1'</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5645b6f835890189300681-71"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'allp'</span><span class="crayon-o">:</span><span class="crayon-s">''</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f835890189300681-72"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'oslanguage'</span><span class="crayon-o">:</span><span class="crayon-s">'zh-CN'</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5645b6f835890189300681-73"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'sr'</span><span class="crayon-o">:</span><span class="crayon-s">'1366*768'</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f835890189300681-74"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'osVer'</span><span class="crayon-o">:</span><span class="crayon-s">'windows|6.1'</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5645b6f835890189300681-75"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'naviVer'</span><span class="crayon-o">:</span><span class="crayon-s">'firefox|35'</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f835890189300681-76"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-5645b6f835890189300681-77"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#将POST的数据进行编码转换</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f835890189300681-78"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">postData</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">urllib</span><span class="crayon-sy">.</span><span class="crayon-e">urlencode</span><span class="crayon-sy">(</span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">post</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5645b6f835890189300681-79"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#设置代理</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f835890189300681-80"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">proxy</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">urllib2</span><span class="crayon-sy">.</span><span class="crayon-e">ProxyHandler</span><span class="crayon-sy">(</span><span class="crayon-sy">{</span><span class="crayon-s">'http'</span><span class="crayon-o">:</span><span class="crayon-v">self</span><span class="crayon-sy">.</span><span class="crayon-v">proxyURL</span><span class="crayon-sy">}</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5645b6f835890189300681-81"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#设置cookie</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f835890189300681-82"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">cookie</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">cookielib</span><span class="crayon-sy">.</span><span class="crayon-e">LWPCookieJar</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5645b6f835890189300681-83"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#设置cookie处理器</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f835890189300681-84"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">cookieHandler</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">urllib2</span><span class="crayon-sy">.</span><span class="crayon-e">HTTPCookieProcessor</span><span class="crayon-sy">(</span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">cookie</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5645b6f835890189300681-85"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#设置登录时用到的opener，它的open方法相当于urllib2.urlopen</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f835890189300681-86"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">opener</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">urllib2</span><span class="crayon-sy">.</span><span class="crayon-e">build_opener</span><span class="crayon-sy">(</span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">cookieHandler</span><span class="crayon-sy">,</span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">proxy</span><span class="crayon-sy">,</span><span class="crayon-v">urllib2</span><span class="crayon-sy">.</span><span class="crayon-v">HTTPHandler</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5645b6f835890189300681-87">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f835890189300681-88">&nbsp;</div><div class="crayon-line" id="crayon-5645b6f835890189300681-89"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#得到是否需要输入验证码，这次请求的相应有时会不同，有时需要验证有时不需要</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f835890189300681-90"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">def </span><span class="crayon-e">needIdenCode</span><span class="crayon-sy">(</span><span class="crayon-r">self</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5645b6f835890189300681-91"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#第一次登录获取验证码尝试，构建request</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f835890189300681-92"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">request</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">urllib2</span><span class="crayon-sy">.</span><span class="crayon-e">Request</span><span class="crayon-sy">(</span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">loginURL</span><span class="crayon-sy">,</span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">postData</span><span class="crayon-sy">,</span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">loginHeaders</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5645b6f835890189300681-93"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#得到第一次登录尝试的相应</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f835890189300681-94"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">response</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">opener</span><span class="crayon-sy">.</span><span class="crayon-e">open</span><span class="crayon-sy">(</span><span class="crayon-v">request</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5645b6f835890189300681-95"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#获取其中的内容</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f835890189300681-96"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">content</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">response</span><span class="crayon-sy">.</span><span class="crayon-e">read</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">.</span><span class="crayon-e">decode</span><span class="crayon-sy">(</span><span class="crayon-s">'gbk'</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5645b6f835890189300681-97"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#获取状态吗</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f835890189300681-98"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">status</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">response</span><span class="crayon-sy">.</span><span class="crayon-e">getcode</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5645b6f835890189300681-99"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#状态码为200，获取成功</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f835890189300681-100"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-v">status</span><span class="crayon-h"> </span><span class="crayon-o">==</span><span class="crayon-h"> </span><span class="crayon-cn">200</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5645b6f835890189300681-101"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-i">print</span><span class="crayon-h"> </span><span class="crayon-i">u</span><span class="crayon-s">"获取请求成功"</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f835890189300681-102"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#\u8bf7\u8f93\u5165\u9a8c\u8bc1\u7801这六个字是请输入验证码的utf-8编码</span></div><div class="crayon-line" id="crayon-5645b6f835890189300681-103"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">pattern</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">re</span><span class="crayon-sy">.</span><span class="crayon-e">compile</span><span class="crayon-sy">(</span><span class="crayon-i">u</span><span class="crayon-s">'\u8bf7\u8f93\u5165\u9a8c\u8bc1\u7801'</span><span class="crayon-sy">,</span><span class="crayon-v">re</span><span class="crayon-sy">.</span><span class="crayon-v">S</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f835890189300681-104"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">result</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">re</span><span class="crayon-sy">.</span><span class="crayon-e">search</span><span class="crayon-sy">(</span><span class="crayon-v">pattern</span><span class="crayon-sy">,</span><span class="crayon-v">content</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5645b6f835890189300681-105"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#如果找到该字符，代表需要输入验证码</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f835890189300681-106"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-v">result</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5645b6f835890189300681-107"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-i">print</span><span class="crayon-h"> </span><span class="crayon-i">u</span><span class="crayon-s">"此次安全验证异常，您需要输入验证码"</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f835890189300681-108"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-v">content</span></div><div class="crayon-line" id="crayon-5645b6f835890189300681-109"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#否则不需要</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f835890189300681-110"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">else</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5645b6f835890189300681-111"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-i">print</span><span class="crayon-h"> </span><span class="crayon-i">u</span><span class="crayon-s">"此次安全验证通过，您这次不需要输入验证码"</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f835890189300681-112"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-t">False</span></div><div class="crayon-line" id="crayon-5645b6f835890189300681-113"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">else</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f835890189300681-114"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-i">print</span><span class="crayon-h"> </span><span class="crayon-i">u</span><span class="crayon-s">"获取请求失败"</span></div><div class="crayon-line" id="crayon-5645b6f835890189300681-115">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f835890189300681-116"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#得到验证码图片</span></div><div class="crayon-line" id="crayon-5645b6f835890189300681-117"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">def </span><span class="crayon-e">getIdenCode</span><span class="crayon-sy">(</span><span class="crayon-r">self</span><span class="crayon-sy">,</span><span class="crayon-v">page</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f835890189300681-118"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#得到验证码的图片</span></div><div class="crayon-line" id="crayon-5645b6f835890189300681-119"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">pattern</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">re</span><span class="crayon-sy">.</span><span class="crayon-e">compile</span><span class="crayon-sy">(</span><span class="crayon-s">'&lt;img id="J_StandardCode_m.*?data-src="(.*?)"'</span><span class="crayon-sy">,</span><span class="crayon-v">re</span><span class="crayon-sy">.</span><span class="crayon-v">S</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f835890189300681-120"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#匹配的结果</span></div><div class="crayon-line" id="crayon-5645b6f835890189300681-121"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">matchResult</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">re</span><span class="crayon-sy">.</span><span class="crayon-e">search</span><span class="crayon-sy">(</span><span class="crayon-v">pattern</span><span class="crayon-sy">,</span><span class="crayon-v">page</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f835890189300681-122"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#已经匹配得到内容，并且验证码图片链接不为空</span></div><div class="crayon-line" id="crayon-5645b6f835890189300681-123"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-e">matchResult </span><span class="crayon-st">and</span><span class="crayon-h"> </span><span class="crayon-v">matchResult</span><span class="crayon-sy">.</span><span class="crayon-e">group</span><span class="crayon-sy">(</span><span class="crayon-cn">1</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f835890189300681-124"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">print </span><span class="crayon-v">matchResult</span><span class="crayon-sy">.</span><span class="crayon-e">group</span><span class="crayon-sy">(</span><span class="crayon-cn">1</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5645b6f835890189300681-125"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-v">matchResult</span><span class="crayon-sy">.</span><span class="crayon-e">group</span><span class="crayon-sy">(</span><span class="crayon-cn">1</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f835890189300681-126"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">else</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5645b6f835890189300681-127"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-i">print</span><span class="crayon-h"> </span><span class="crayon-i">u</span><span class="crayon-s">"没有找到验证码内容"</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f835890189300681-128"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-t">False</span></div><div class="crayon-line" id="crayon-5645b6f835890189300681-129">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f835890189300681-130"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#程序运行主干</span></div><div class="crayon-line" id="crayon-5645b6f835890189300681-131"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">def </span><span class="crayon-e">main</span><span class="crayon-sy">(</span><span class="crayon-r">self</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f835890189300681-132"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#是否需要验证码，是则得到页面内容，不是则返回False</span></div><div class="crayon-line" id="crayon-5645b6f835890189300681-133"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">needResult</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-e">needIdenCode</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f835890189300681-134"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-st">not</span><span class="crayon-h"> </span><span class="crayon-v">needResult</span><span class="crayon-h"> </span><span class="crayon-o">==</span><span class="crayon-h"> </span><span class="crayon-t">False</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5645b6f835890189300681-135"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-i">print</span><span class="crayon-h"> </span><span class="crayon-i">u</span><span class="crayon-s">"您需要手动输入验证码"</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f835890189300681-136"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">idenCode</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-e">getIdenCode</span><span class="crayon-sy">(</span><span class="crayon-v">needResult</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5645b6f835890189300681-137"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#得到了验证码的链接</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f835890189300681-138"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-st">not</span><span class="crayon-h"> </span><span class="crayon-v">idenCode</span><span class="crayon-h"> </span><span class="crayon-o">==</span><span class="crayon-h"> </span><span class="crayon-t">False</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5645b6f835890189300681-139"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-i">print</span><span class="crayon-h"> </span><span class="crayon-i">u</span><span class="crayon-s">"验证码获取成功"</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f835890189300681-140"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-i">print</span><span class="crayon-h"> </span><span class="crayon-i">u</span><span class="crayon-s">"请在浏览器中输入您看到的验证码"</span></div><div class="crayon-line" id="crayon-5645b6f835890189300681-141"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">webbrowser</span><span class="crayon-sy">.</span><span class="crayon-e">open_new_tab</span><span class="crayon-sy">(</span><span class="crayon-v">idenCode</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f835890189300681-142"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#验证码链接为空，无效验证码</span></div><div class="crayon-line" id="crayon-5645b6f835890189300681-143"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">else</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f835890189300681-144"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-i">print</span><span class="crayon-h"> </span><span class="crayon-i">u</span><span class="crayon-s">"验证码获取失败，请重试"</span></div><div class="crayon-line" id="crayon-5645b6f835890189300681-145"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">else</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f835890189300681-146"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-i">print</span><span class="crayon-h"> </span><span class="crayon-i">u</span><span class="crayon-s">"不需要输入验证码"</span></div><div class="crayon-line" id="crayon-5645b6f835890189300681-147">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f835890189300681-148">&nbsp;</div><div class="crayon-line" id="crayon-5645b6f835890189300681-149">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f835890189300681-150"><span class="crayon-v">taobao</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">Taobao</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5645b6f835890189300681-151"><span class="crayon-v">taobao</span><span class="crayon-sy">.</span><span class="crayon-e">main</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0201 seconds] -->
<p>恩，请把里面的 ua 和 password2 还有用户名换成自己的进行尝试，用我的可能会产生错误的。</p>
<p>运行结果</p>
<p><a href="http://qiniu.cuiqingcai.com/wp-content/uploads/2015/02/QQ截图20150225015508.jpg"><img class="alignnone size-full wp-image-1087" src="http://qiniu.cuiqingcai.com/wp-content/uploads/2015/02/QQ截图20150225015508.jpg" alt="QQ截图20150225015508" width="830" height="145" /></a></p>
<p>然后会蹦出浏览器，显示了验证码的内容，这个需要你来手动输入。</p>
<p>在这里有小伙伴向我反映有这么个错误</p>
<p><a href="http://qiniu.cuiqingcai.com/wp-content/uploads/2015/02/QQ图片20150227181617.png"><img class="alignnone size-full wp-image-1184" src="http://qiniu.cuiqingcai.com/wp-content/uploads/2015/02/QQ图片20150227181617.png" alt="QQ图片20150227181617" width="644" height="370" /></a></p>
<p>经过查证，竟然是版本问题，博主本人用的是 2.7.7，而小伙伴用的是 2.7.9。后来换成 2.7.7 就好了&#8230;，我也是醉了，希望有相同错误的小伙伴，可以尝试换一下版本&#8230;</p>
<p>好啦，运行时会弹出浏览器，如图</p>
<p><a href="http://qiniu.cuiqingcai.com/wp-content/uploads/2015/02/QQ截图20150225015717.jpg"><img class="alignnone size-full wp-image-1088" src="http://qiniu.cuiqingcai.com/wp-content/uploads/2015/02/QQ截图20150225015717.jpg" alt="QQ截图20150225015717" width="1017" height="131" /></a></p>
<p>那么，我们现在需要手动输入验证码，重新向登录界面发出登录请求，之前的post数据内容加入验证码这一项，重新请求一次，如果请求成功，则会返回下一步我们需要的 J_HToken，如果验证码输入错误，则会返回验证码输入错误的选项。好，下面，我已经写到了获取J_HToken的进度，代码如下，现在运行程序，会蹦出浏览器，然后提示你输入验证码，用户手动输入之后，则会返回一个页面，我们提取出 J_Htoken即可。</p>
<p>注意，到现在为止，你还没有登录成功，只是获取到了J_HToken的值。</p>
<p>目前写到的代码如下</p><!-- Crayon Syntax Highlighter v2.7.1 -->

		<div id="crayon-5645b6f8358a6494125384" class="crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover wrap" style=" margin-top: 12px; margin-bottom: 12px; float: left; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button" title="切换是否显示行编号"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="纯文本显示代码"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="切换自动换行"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="点击展开代码"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="复制代码"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="在新窗口中显示代码"><div class="crayon-button-icon"></div></div></div></div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="crayon-plain-wrap"><textarea  class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
__author__ = 'CQC'
# -*- coding:utf-8 -*-

import urllib
import urllib2
import cookielib
import re
import webbrowser

#模拟登录淘宝类
class Taobao:

    #初始化方法
    def __init__(self):
        #登录的URL
        self.loginURL = "https://login.taobao.com/member/login.jhtml"
        #代理IP地址，防止自己的IP被封禁
        self.proxyURL = 'http://120.193.146.97:843'
        #登录POST数据时发送的头部信息
        self.loginHeaders =  {
            'Host':'login.taobao.com',
            'User-Agent' : 'Mozilla/5.0 (Windows NT 6.1; WOW64; rv:35.0) Gecko/20100101 Firefox/35.0',
            'Referer' : 'https://login.taobao.com/member/login.jhtml',
            'Content-Type': 'application/x-www-form-urlencoded',
            'Connection' : 'Keep-Alive'
        }
        #用户名
        self.username = 'cqcre'
        #ua字符串，经过淘宝ua算法计算得出，包含了时间戳,浏览器,屏幕分辨率,随机数,鼠标移动,鼠标点击,其实还有键盘输入记录,鼠标移动的记录、点击的记录等等的信息
        self.ua = '191UW5TcyMNYQwiAiwTR3tCf0J/QnhEcUpkMmQ=|Um5Ockt0TXdPc011TXVKdyE=|U2xMHDJ+H2QJZwBxX39Rb1d5WXcrSixAJ1kjDVsN|VGhXd1llXGNaYFhkWmJaYl1gV2pIdUtyTXRKfkN4Qn1FeEF6R31TBQ==|VWldfS0TMw8xDjYWKhAwHiUdOA9wCDEVaxgkATdcNU8iDFoM|VmNDbUMV|V2NDbUMV|WGRYeCgGZhtmH2VScVI2UT5fORtmD2gCawwuRSJHZAFsCWMOdVYyVTpbPR99HWAFYVMpUDUFORshHiQdJR0jAT0JPQc/BDoFPgooFDZtVBR5Fn9VOwt2EWhCOVQ4WSJPJFkHXhgoSDVIMRgnHyFqQ3xEezceIRkmahRqFDZLIkUvRiEDaA9qQ3xEezcZORc5bzk=|WWdHFy0TMw8vEy0UIQE0ADgYJBohGjoAOw4uEiwXLAw2DThuOA==|WmBAED5+KnIbdRh1GXgFQSZbGFdrUm1UblZqVGxQa1ZiTGxQcEp1I3U=|W2NDEz19KXENZwJjHkY7Ui9OJQsre09zSWlXY1oMLBExHzERLxsuE0UT|XGZGFjh4LHQdcx5zH34DRyBdHlFtVGtSaFBsUmpWbVBkSmpXd05zTnMlcw==|XWdHFzl5LXUJYwZnGkI/VitKIQ8vEzMKNws3YTc=|XmdaZ0d6WmVFeUB8XGJaYEB4TGxWbk5yTndXa0tyT29Ta0t1QGBeZDI='
        #密码，在这里不能输入真实密码，淘宝对此密码进行了加密处理，256位，此处为加密后的密码
        self.password2 = '7511aa6854629e45de220d29174f1066537a73420ef6dbb5b46f202396703a2d56b0312df8769d886e6ca63d587fdbb99ee73927e8c07d9c88cd02182e1a21edc13fb8e0a4a2a4b5c253bf38484bd0e08199e03eb9bf7b365a5c673c03407d812b91394f0d3c7564042e3f2b11d156aeea37ad6460118914125ab8f8ac466f'
        self.post = post = {
            'ua':self.ua,
            'TPL_checkcode':'',
            'CtrlVersion': '1,0,0,7',
            'TPL_password':'',
            'TPL_redirect_url':'http://i.taobao.com/my_taobao.htm?nekot=udm8087E1424147022443',
            'TPL_username':self.username,
            'loginsite':'0',
            'newlogin':'0',
            'from':'tb',
            'fc':'default',
            'style':'default',
            'css_style':'',
            'tid':'XOR_1_000000000000000000000000000000_625C4720470A0A050976770A',
            'support':'000001',
            'loginType':'4',
            'minititle':'',
            'minipara':'',
            'umto':'NaN',
            'pstrong':'3',
            'llnick':'',
            'sign':'',
            'need_sign':'',
            'isIgnore':'',
            'full_redirect':'',
            'popid':'',
            'callback':'',
            'guf':'',
            'not_duplite_str':'',
            'need_user_id':'',
            'poy':'',
            'gvfdcname':'10',
            'gvfdcre':'',
            'from_encoding ':'',
            'sub':'',
            'TPL_password_2':self.password2,
            'loginASR':'1',
            'loginASRSuc':'1',
            'allp':'',
            'oslanguage':'zh-CN',
            'sr':'1366*768',
            'osVer':'windows|6.1',
            'naviVer':'firefox|35'
        }
        #将POST的数据进行编码转换
        self.postData = urllib.urlencode(self.post)
        #设置代理
        self.proxy = urllib2.ProxyHandler({'http':self.proxyURL})
        #设置cookie
        self.cookie = cookielib.LWPCookieJar()
        #设置cookie处理器
        self.cookieHandler = urllib2.HTTPCookieProcessor(self.cookie)
        #设置登录时用到的opener，它的open方法相当于urllib2.urlopen
        self.opener = urllib2.build_opener(self.cookieHandler,self.proxy,urllib2.HTTPHandler)


    #得到是否需要输入验证码，这次请求的相应有时会不同，有时需要验证有时不需要
    def needCheckCode(self):
        #第一次登录获取验证码尝试，构建request
        request = urllib2.Request(self.loginURL,self.postData,self.loginHeaders)
        #得到第一次登录尝试的相应
        response = self.opener.open(request)
        #获取其中的内容
        content = response.read().decode('gbk')
        #获取状态吗
        status = response.getcode()
        #状态码为200，获取成功
        if status == 200:
            print u"获取请求成功"
            #\u8bf7\u8f93\u5165\u9a8c\u8bc1\u7801这六个字是请输入验证码的utf-8编码
            pattern = re.compile(u'\u8bf7\u8f93\u5165\u9a8c\u8bc1\u7801',re.S)
            result = re.search(pattern,content)
            print content
            #如果找到该字符，代表需要输入验证码
            if result:
                print u"此次安全验证异常，您需要输入验证码"
                return content
            #否则不需要
            else:
                #返回结果直接带有J_HToken字样，表明直接验证通过
                tokenPattern = re.compile('id="J_HToken"')
                tokenMatch = re.search(tokenPattern,content)
                if tokenMatch:
                    print u"此次安全验证通过，您这次不需要输入验证码"
                    return False
        else:
            print u"获取请求失败"
            return None

    #得到验证码图片
    def getCheckCode(self,page):
        #得到验证码的图片
        pattern = re.compile('&lt;img id="J_StandardCode_m.*?data-src="(.*?)"',re.S)
        #匹配的结果
        matchResult = re.search(pattern,page)
        #已经匹配得到内容，并且验证码图片链接不为空
        if matchResult and matchResult.group(1):
            print matchResult.group(1)
            return matchResult.group(1)
        else:
            print u"没有找到验证码内容"
            return False


    #输入验证码，重新请求，如果验证成功，则返回J_HToken
    def loginWithCheckCode(self):
        #提示用户输入验证码
        checkcode = raw_input('请输入验证码:')
        #将验证码重新添加到post的数据中
        self.post['TPL_checkcode'] = checkcode
        #对post数据重新进行编码
        self.postData = urllib.urlencode(self.post)
        try:
            #再次构建请求，加入验证码之后的第二次登录尝试
            request = urllib2.Request(self.loginURL,self.postData,self.loginHeaders)
            #得到第一次登录尝试的相应
            response = self.opener.open(request)
            #获取其中的内容
            content = response.read().decode('gbk')
            #检测验证码错误的正则表达式，\u9a8c\u8bc1\u7801\u9519\u8bef 是验证码错误五个字的编码
            pattern = re.compile(u'\u9a8c\u8bc1\u7801\u9519\u8bef',re.S)
            result = re.search(pattern,content)
            #如果返回页面包括了，验证码错误五个字
            if result:
                print u"验证码输入错误"
                return False
            else:
                #返回结果直接带有J_HToken字样，说明验证码输入成功，成功跳转到了获取HToken的界面
                tokenPattern = re.compile('id="J_HToken" value="(.*?)"')
                tokenMatch = re.search(tokenPattern,content)
                #如果匹配成功，找到了J_HToken
                if tokenMatch:
                    print u"验证码输入正确"
                    print tokenMatch.group(1)
                    return tokenMatch.group(1)
                else:
                    #匹配失败，J_Token获取失败
                    print u"J_Token获取失败"
                    return False
        except urllib2.HTTPError, e:
            print u"连接服务器出错，错误原因",e.reason
            return False

    #程序运行主干
    def main(self):
        #是否需要验证码，是则得到页面内容，不是则返回False
        needResult = self.needCheckCode()
        #请求获取失败，得到的结果是None
        if not needResult ==None:
            if not needResult == False:
                print u"您需要手动输入验证码"
                idenCode = self.getCheckCode(needResult)
                #得到了验证码的链接
                if not idenCode == False:
                    print u"验证码获取成功"
                    print u"请在浏览器中输入您看到的验证码"
                    webbrowser.open_new_tab(idenCode)
                    J_HToken = self.loginWithCheckCode()
                    print "J_HToken",J_HToken
                #验证码链接为空，无效验证码
                else:
                    print u"验证码获取失败，请重试"
            else:
                print u"不需要输入验证码"
        else:
            print u"请求登录页面失败，无法确认是否需要验证码"



taobao = Taobao()
taobao.main()</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5645b6f8358a6494125384-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358a6494125384-2">2</div><div class="crayon-num" data-line="crayon-5645b6f8358a6494125384-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358a6494125384-4">4</div><div class="crayon-num" data-line="crayon-5645b6f8358a6494125384-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358a6494125384-6">6</div><div class="crayon-num" data-line="crayon-5645b6f8358a6494125384-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358a6494125384-8">8</div><div class="crayon-num" data-line="crayon-5645b6f8358a6494125384-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358a6494125384-10">10</div><div class="crayon-num" data-line="crayon-5645b6f8358a6494125384-11">11</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358a6494125384-12">12</div><div class="crayon-num" data-line="crayon-5645b6f8358a6494125384-13">13</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358a6494125384-14">14</div><div class="crayon-num" data-line="crayon-5645b6f8358a6494125384-15">15</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358a6494125384-16">16</div><div class="crayon-num" data-line="crayon-5645b6f8358a6494125384-17">17</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358a6494125384-18">18</div><div class="crayon-num" data-line="crayon-5645b6f8358a6494125384-19">19</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358a6494125384-20">20</div><div class="crayon-num" data-line="crayon-5645b6f8358a6494125384-21">21</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358a6494125384-22">22</div><div class="crayon-num" data-line="crayon-5645b6f8358a6494125384-23">23</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358a6494125384-24">24</div><div class="crayon-num" data-line="crayon-5645b6f8358a6494125384-25">25</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358a6494125384-26">26</div><div class="crayon-num" data-line="crayon-5645b6f8358a6494125384-27">27</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358a6494125384-28">28</div><div class="crayon-num" data-line="crayon-5645b6f8358a6494125384-29">29</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358a6494125384-30">30</div><div class="crayon-num" data-line="crayon-5645b6f8358a6494125384-31">31</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358a6494125384-32">32</div><div class="crayon-num" data-line="crayon-5645b6f8358a6494125384-33">33</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358a6494125384-34">34</div><div class="crayon-num" data-line="crayon-5645b6f8358a6494125384-35">35</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358a6494125384-36">36</div><div class="crayon-num" data-line="crayon-5645b6f8358a6494125384-37">37</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358a6494125384-38">38</div><div class="crayon-num" data-line="crayon-5645b6f8358a6494125384-39">39</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358a6494125384-40">40</div><div class="crayon-num" data-line="crayon-5645b6f8358a6494125384-41">41</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358a6494125384-42">42</div><div class="crayon-num" data-line="crayon-5645b6f8358a6494125384-43">43</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358a6494125384-44">44</div><div class="crayon-num" data-line="crayon-5645b6f8358a6494125384-45">45</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358a6494125384-46">46</div><div class="crayon-num" data-line="crayon-5645b6f8358a6494125384-47">47</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358a6494125384-48">48</div><div class="crayon-num" data-line="crayon-5645b6f8358a6494125384-49">49</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358a6494125384-50">50</div><div class="crayon-num" data-line="crayon-5645b6f8358a6494125384-51">51</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358a6494125384-52">52</div><div class="crayon-num" data-line="crayon-5645b6f8358a6494125384-53">53</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358a6494125384-54">54</div><div class="crayon-num" data-line="crayon-5645b6f8358a6494125384-55">55</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358a6494125384-56">56</div><div class="crayon-num" data-line="crayon-5645b6f8358a6494125384-57">57</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358a6494125384-58">58</div><div class="crayon-num" data-line="crayon-5645b6f8358a6494125384-59">59</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358a6494125384-60">60</div><div class="crayon-num" data-line="crayon-5645b6f8358a6494125384-61">61</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358a6494125384-62">62</div><div class="crayon-num" data-line="crayon-5645b6f8358a6494125384-63">63</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358a6494125384-64">64</div><div class="crayon-num" data-line="crayon-5645b6f8358a6494125384-65">65</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358a6494125384-66">66</div><div class="crayon-num" data-line="crayon-5645b6f8358a6494125384-67">67</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358a6494125384-68">68</div><div class="crayon-num" data-line="crayon-5645b6f8358a6494125384-69">69</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358a6494125384-70">70</div><div class="crayon-num" data-line="crayon-5645b6f8358a6494125384-71">71</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358a6494125384-72">72</div><div class="crayon-num" data-line="crayon-5645b6f8358a6494125384-73">73</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358a6494125384-74">74</div><div class="crayon-num" data-line="crayon-5645b6f8358a6494125384-75">75</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358a6494125384-76">76</div><div class="crayon-num" data-line="crayon-5645b6f8358a6494125384-77">77</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358a6494125384-78">78</div><div class="crayon-num" data-line="crayon-5645b6f8358a6494125384-79">79</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358a6494125384-80">80</div><div class="crayon-num" data-line="crayon-5645b6f8358a6494125384-81">81</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358a6494125384-82">82</div><div class="crayon-num" data-line="crayon-5645b6f8358a6494125384-83">83</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358a6494125384-84">84</div><div class="crayon-num" data-line="crayon-5645b6f8358a6494125384-85">85</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358a6494125384-86">86</div><div class="crayon-num" data-line="crayon-5645b6f8358a6494125384-87">87</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358a6494125384-88">88</div><div class="crayon-num" data-line="crayon-5645b6f8358a6494125384-89">89</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358a6494125384-90">90</div><div class="crayon-num" data-line="crayon-5645b6f8358a6494125384-91">91</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358a6494125384-92">92</div><div class="crayon-num" data-line="crayon-5645b6f8358a6494125384-93">93</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358a6494125384-94">94</div><div class="crayon-num" data-line="crayon-5645b6f8358a6494125384-95">95</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358a6494125384-96">96</div><div class="crayon-num" data-line="crayon-5645b6f8358a6494125384-97">97</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358a6494125384-98">98</div><div class="crayon-num" data-line="crayon-5645b6f8358a6494125384-99">99</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358a6494125384-100">100</div><div class="crayon-num" data-line="crayon-5645b6f8358a6494125384-101">101</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358a6494125384-102">102</div><div class="crayon-num" data-line="crayon-5645b6f8358a6494125384-103">103</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358a6494125384-104">104</div><div class="crayon-num" data-line="crayon-5645b6f8358a6494125384-105">105</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358a6494125384-106">106</div><div class="crayon-num" data-line="crayon-5645b6f8358a6494125384-107">107</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358a6494125384-108">108</div><div class="crayon-num" data-line="crayon-5645b6f8358a6494125384-109">109</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358a6494125384-110">110</div><div class="crayon-num" data-line="crayon-5645b6f8358a6494125384-111">111</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358a6494125384-112">112</div><div class="crayon-num" data-line="crayon-5645b6f8358a6494125384-113">113</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358a6494125384-114">114</div><div class="crayon-num" data-line="crayon-5645b6f8358a6494125384-115">115</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358a6494125384-116">116</div><div class="crayon-num" data-line="crayon-5645b6f8358a6494125384-117">117</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358a6494125384-118">118</div><div class="crayon-num" data-line="crayon-5645b6f8358a6494125384-119">119</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358a6494125384-120">120</div><div class="crayon-num" data-line="crayon-5645b6f8358a6494125384-121">121</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358a6494125384-122">122</div><div class="crayon-num" data-line="crayon-5645b6f8358a6494125384-123">123</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358a6494125384-124">124</div><div class="crayon-num" data-line="crayon-5645b6f8358a6494125384-125">125</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358a6494125384-126">126</div><div class="crayon-num" data-line="crayon-5645b6f8358a6494125384-127">127</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358a6494125384-128">128</div><div class="crayon-num" data-line="crayon-5645b6f8358a6494125384-129">129</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358a6494125384-130">130</div><div class="crayon-num" data-line="crayon-5645b6f8358a6494125384-131">131</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358a6494125384-132">132</div><div class="crayon-num" data-line="crayon-5645b6f8358a6494125384-133">133</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358a6494125384-134">134</div><div class="crayon-num" data-line="crayon-5645b6f8358a6494125384-135">135</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358a6494125384-136">136</div><div class="crayon-num" data-line="crayon-5645b6f8358a6494125384-137">137</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358a6494125384-138">138</div><div class="crayon-num" data-line="crayon-5645b6f8358a6494125384-139">139</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358a6494125384-140">140</div><div class="crayon-num" data-line="crayon-5645b6f8358a6494125384-141">141</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358a6494125384-142">142</div><div class="crayon-num" data-line="crayon-5645b6f8358a6494125384-143">143</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358a6494125384-144">144</div><div class="crayon-num" data-line="crayon-5645b6f8358a6494125384-145">145</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358a6494125384-146">146</div><div class="crayon-num" data-line="crayon-5645b6f8358a6494125384-147">147</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358a6494125384-148">148</div><div class="crayon-num" data-line="crayon-5645b6f8358a6494125384-149">149</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358a6494125384-150">150</div><div class="crayon-num" data-line="crayon-5645b6f8358a6494125384-151">151</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358a6494125384-152">152</div><div class="crayon-num" data-line="crayon-5645b6f8358a6494125384-153">153</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358a6494125384-154">154</div><div class="crayon-num" data-line="crayon-5645b6f8358a6494125384-155">155</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358a6494125384-156">156</div><div class="crayon-num" data-line="crayon-5645b6f8358a6494125384-157">157</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358a6494125384-158">158</div><div class="crayon-num" data-line="crayon-5645b6f8358a6494125384-159">159</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358a6494125384-160">160</div><div class="crayon-num" data-line="crayon-5645b6f8358a6494125384-161">161</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358a6494125384-162">162</div><div class="crayon-num" data-line="crayon-5645b6f8358a6494125384-163">163</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358a6494125384-164">164</div><div class="crayon-num" data-line="crayon-5645b6f8358a6494125384-165">165</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358a6494125384-166">166</div><div class="crayon-num" data-line="crayon-5645b6f8358a6494125384-167">167</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358a6494125384-168">168</div><div class="crayon-num" data-line="crayon-5645b6f8358a6494125384-169">169</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358a6494125384-170">170</div><div class="crayon-num" data-line="crayon-5645b6f8358a6494125384-171">171</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358a6494125384-172">172</div><div class="crayon-num" data-line="crayon-5645b6f8358a6494125384-173">173</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358a6494125384-174">174</div><div class="crayon-num" data-line="crayon-5645b6f8358a6494125384-175">175</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358a6494125384-176">176</div><div class="crayon-num" data-line="crayon-5645b6f8358a6494125384-177">177</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358a6494125384-178">178</div><div class="crayon-num" data-line="crayon-5645b6f8358a6494125384-179">179</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358a6494125384-180">180</div><div class="crayon-num" data-line="crayon-5645b6f8358a6494125384-181">181</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358a6494125384-182">182</div><div class="crayon-num" data-line="crayon-5645b6f8358a6494125384-183">183</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358a6494125384-184">184</div><div class="crayon-num" data-line="crayon-5645b6f8358a6494125384-185">185</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358a6494125384-186">186</div><div class="crayon-num" data-line="crayon-5645b6f8358a6494125384-187">187</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358a6494125384-188">188</div><div class="crayon-num" data-line="crayon-5645b6f8358a6494125384-189">189</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358a6494125384-190">190</div><div class="crayon-num" data-line="crayon-5645b6f8358a6494125384-191">191</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358a6494125384-192">192</div><div class="crayon-num" data-line="crayon-5645b6f8358a6494125384-193">193</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358a6494125384-194">194</div><div class="crayon-num" data-line="crayon-5645b6f8358a6494125384-195">195</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358a6494125384-196">196</div><div class="crayon-num" data-line="crayon-5645b6f8358a6494125384-197">197</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358a6494125384-198">198</div><div class="crayon-num" data-line="crayon-5645b6f8358a6494125384-199">199</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358a6494125384-200">200</div><div class="crayon-num" data-line="crayon-5645b6f8358a6494125384-201">201</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358a6494125384-202">202</div><div class="crayon-num" data-line="crayon-5645b6f8358a6494125384-203">203</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5645b6f8358a6494125384-1"><span class="crayon-v">__author__</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">'CQC'</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358a6494125384-2"><span class="crayon-p"># -*- coding:utf-8 -*-</span></div><div class="crayon-line" id="crayon-5645b6f8358a6494125384-3">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358a6494125384-4"><span class="crayon-e">import </span><span class="crayon-e">urllib</span></div><div class="crayon-line" id="crayon-5645b6f8358a6494125384-5"><span class="crayon-e">import </span><span class="crayon-e">urllib2</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358a6494125384-6"><span class="crayon-e">import </span><span class="crayon-e">cookielib</span></div><div class="crayon-line" id="crayon-5645b6f8358a6494125384-7"><span class="crayon-e">import </span><span class="crayon-e">re</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358a6494125384-8"><span class="crayon-e">import </span><span class="crayon-v">webbrowser</span></div><div class="crayon-line" id="crayon-5645b6f8358a6494125384-9">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358a6494125384-10"><span class="crayon-p">#模拟登录淘宝类</span></div><div class="crayon-line" id="crayon-5645b6f8358a6494125384-11"><span class="crayon-t">class</span><span class="crayon-h"> </span><span class="crayon-v">Taobao</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358a6494125384-12">&nbsp;</div><div class="crayon-line" id="crayon-5645b6f8358a6494125384-13"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#初始化方法</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358a6494125384-14"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">def </span><span class="crayon-e">__init__</span><span class="crayon-sy">(</span><span class="crayon-r">self</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5645b6f8358a6494125384-15"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#登录的URL</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358a6494125384-16"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">loginURL</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">"https://login.taobao.com/member/login.jhtml"</span></div><div class="crayon-line" id="crayon-5645b6f8358a6494125384-17"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#代理IP地址，防止自己的IP被封禁</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358a6494125384-18"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">proxyURL</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">'http://120.193.146.97:843'</span></div><div class="crayon-line" id="crayon-5645b6f8358a6494125384-19"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#登录POST数据时发送的头部信息</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358a6494125384-20"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">loginHeaders</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5645b6f8358a6494125384-21"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'Host'</span><span class="crayon-o">:</span><span class="crayon-s">'login.taobao.com'</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358a6494125384-22"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'User-Agent'</span><span class="crayon-h"> </span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-s">'Mozilla/5.0 (Windows NT 6.1; WOW64; rv:35.0) Gecko/20100101 Firefox/35.0'</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5645b6f8358a6494125384-23"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'Referer'</span><span class="crayon-h"> </span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-s">'https://login.taobao.com/member/login.jhtml'</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358a6494125384-24"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'Content-Type'</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-s">'application/x-www-form-urlencoded'</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5645b6f8358a6494125384-25"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'Connection'</span><span class="crayon-h"> </span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-s">'Keep-Alive'</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358a6494125384-26"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-5645b6f8358a6494125384-27"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#用户名</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358a6494125384-28"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">username</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">'cqcre'</span></div><div class="crayon-line" id="crayon-5645b6f8358a6494125384-29"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#ua字符串，经过淘宝ua算法计算得出，包含了时间戳,浏览器,屏幕分辨率,随机数,鼠标移动,鼠标点击,其实还有键盘输入记录,鼠标移动的记录、点击的记录等等的信息</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358a6494125384-30"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">ua</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">'191UW5TcyMNYQwiAiwTR3tCf0J/QnhEcUpkMmQ=|Um5Ockt0TXdPc011TXVKdyE=|U2xMHDJ+H2QJZwBxX39Rb1d5WXcrSixAJ1kjDVsN|VGhXd1llXGNaYFhkWmJaYl1gV2pIdUtyTXRKfkN4Qn1FeEF6R31TBQ==|VWldfS0TMw8xDjYWKhAwHiUdOA9wCDEVaxgkATdcNU8iDFoM|VmNDbUMV|V2NDbUMV|WGRYeCgGZhtmH2VScVI2UT5fORtmD2gCawwuRSJHZAFsCWMOdVYyVTpbPR99HWAFYVMpUDUFORshHiQdJR0jAT0JPQc/BDoFPgooFDZtVBR5Fn9VOwt2EWhCOVQ4WSJPJFkHXhgoSDVIMRgnHyFqQ3xEezceIRkmahRqFDZLIkUvRiEDaA9qQ3xEezcZORc5bzk=|WWdHFy0TMw8vEy0UIQE0ADgYJBohGjoAOw4uEiwXLAw2DThuOA==|WmBAED5+KnIbdRh1GXgFQSZbGFdrUm1UblZqVGxQa1ZiTGxQcEp1I3U=|W2NDEz19KXENZwJjHkY7Ui9OJQsre09zSWlXY1oMLBExHzERLxsuE0UT|XGZGFjh4LHQdcx5zH34DRyBdHlFtVGtSaFBsUmpWbVBkSmpXd05zTnMlcw==|XWdHFzl5LXUJYwZnGkI/VitKIQ8vEzMKNws3YTc=|XmdaZ0d6WmVFeUB8XGJaYEB4TGxWbk5yTndXa0tyT29Ta0t1QGBeZDI='</span></div><div class="crayon-line" id="crayon-5645b6f8358a6494125384-31"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#密码，在这里不能输入真实密码，淘宝对此密码进行了加密处理，256位，此处为加密后的密码</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358a6494125384-32"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">password2</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">'7511aa6854629e45de220d29174f1066537a73420ef6dbb5b46f202396703a2d56b0312df8769d886e6ca63d587fdbb99ee73927e8c07d9c88cd02182e1a21edc13fb8e0a4a2a4b5c253bf38484bd0e08199e03eb9bf7b365a5c673c03407d812b91394f0d3c7564042e3f2b11d156aeea37ad6460118914125ab8f8ac466f'</span></div><div class="crayon-line" id="crayon-5645b6f8358a6494125384-33"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">post</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">post</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358a6494125384-34"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'ua'</span><span class="crayon-o">:</span><span class="crayon-v">self</span><span class="crayon-sy">.</span><span class="crayon-v">ua</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5645b6f8358a6494125384-35"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'TPL_checkcode'</span><span class="crayon-o">:</span><span class="crayon-s">''</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358a6494125384-36"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'CtrlVersion'</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-s">'1,0,0,7'</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5645b6f8358a6494125384-37"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'TPL_password'</span><span class="crayon-o">:</span><span class="crayon-s">''</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358a6494125384-38"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'TPL_redirect_url'</span><span class="crayon-o">:</span><span class="crayon-s">'http://i.taobao.com/my_taobao.htm?nekot=udm8087E1424147022443'</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5645b6f8358a6494125384-39"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'TPL_username'</span><span class="crayon-o">:</span><span class="crayon-v">self</span><span class="crayon-sy">.</span><span class="crayon-v">username</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358a6494125384-40"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'loginsite'</span><span class="crayon-o">:</span><span class="crayon-s">'0'</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5645b6f8358a6494125384-41"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'newlogin'</span><span class="crayon-o">:</span><span class="crayon-s">'0'</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358a6494125384-42"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'from'</span><span class="crayon-o">:</span><span class="crayon-s">'tb'</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5645b6f8358a6494125384-43"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'fc'</span><span class="crayon-o">:</span><span class="crayon-s">'default'</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358a6494125384-44"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'style'</span><span class="crayon-o">:</span><span class="crayon-s">'default'</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5645b6f8358a6494125384-45"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'css_style'</span><span class="crayon-o">:</span><span class="crayon-s">''</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358a6494125384-46"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'tid'</span><span class="crayon-o">:</span><span class="crayon-s">'XOR_1_000000000000000000000000000000_625C4720470A0A050976770A'</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5645b6f8358a6494125384-47"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'support'</span><span class="crayon-o">:</span><span class="crayon-s">'000001'</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358a6494125384-48"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'loginType'</span><span class="crayon-o">:</span><span class="crayon-s">'4'</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5645b6f8358a6494125384-49"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'minititle'</span><span class="crayon-o">:</span><span class="crayon-s">''</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358a6494125384-50"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'minipara'</span><span class="crayon-o">:</span><span class="crayon-s">''</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5645b6f8358a6494125384-51"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'umto'</span><span class="crayon-o">:</span><span class="crayon-s">'NaN'</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358a6494125384-52"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'pstrong'</span><span class="crayon-o">:</span><span class="crayon-s">'3'</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5645b6f8358a6494125384-53"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'llnick'</span><span class="crayon-o">:</span><span class="crayon-s">''</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358a6494125384-54"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'sign'</span><span class="crayon-o">:</span><span class="crayon-s">''</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5645b6f8358a6494125384-55"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'need_sign'</span><span class="crayon-o">:</span><span class="crayon-s">''</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358a6494125384-56"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'isIgnore'</span><span class="crayon-o">:</span><span class="crayon-s">''</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5645b6f8358a6494125384-57"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'full_redirect'</span><span class="crayon-o">:</span><span class="crayon-s">''</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358a6494125384-58"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'popid'</span><span class="crayon-o">:</span><span class="crayon-s">''</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5645b6f8358a6494125384-59"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'callback'</span><span class="crayon-o">:</span><span class="crayon-s">''</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358a6494125384-60"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'guf'</span><span class="crayon-o">:</span><span class="crayon-s">''</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5645b6f8358a6494125384-61"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'not_duplite_str'</span><span class="crayon-o">:</span><span class="crayon-s">''</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358a6494125384-62"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'need_user_id'</span><span class="crayon-o">:</span><span class="crayon-s">''</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5645b6f8358a6494125384-63"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'poy'</span><span class="crayon-o">:</span><span class="crayon-s">''</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358a6494125384-64"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'gvfdcname'</span><span class="crayon-o">:</span><span class="crayon-s">'10'</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5645b6f8358a6494125384-65"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'gvfdcre'</span><span class="crayon-o">:</span><span class="crayon-s">''</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358a6494125384-66"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'from_encoding '</span><span class="crayon-o">:</span><span class="crayon-s">''</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5645b6f8358a6494125384-67"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'sub'</span><span class="crayon-o">:</span><span class="crayon-s">''</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358a6494125384-68"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'TPL_password_2'</span><span class="crayon-o">:</span><span class="crayon-v">self</span><span class="crayon-sy">.</span><span class="crayon-v">password2</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5645b6f8358a6494125384-69"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'loginASR'</span><span class="crayon-o">:</span><span class="crayon-s">'1'</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358a6494125384-70"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'loginASRSuc'</span><span class="crayon-o">:</span><span class="crayon-s">'1'</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5645b6f8358a6494125384-71"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'allp'</span><span class="crayon-o">:</span><span class="crayon-s">''</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358a6494125384-72"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'oslanguage'</span><span class="crayon-o">:</span><span class="crayon-s">'zh-CN'</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5645b6f8358a6494125384-73"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'sr'</span><span class="crayon-o">:</span><span class="crayon-s">'1366*768'</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358a6494125384-74"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'osVer'</span><span class="crayon-o">:</span><span class="crayon-s">'windows|6.1'</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5645b6f8358a6494125384-75"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'naviVer'</span><span class="crayon-o">:</span><span class="crayon-s">'firefox|35'</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358a6494125384-76"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-5645b6f8358a6494125384-77"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#将POST的数据进行编码转换</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358a6494125384-78"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">postData</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">urllib</span><span class="crayon-sy">.</span><span class="crayon-e">urlencode</span><span class="crayon-sy">(</span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">post</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5645b6f8358a6494125384-79"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#设置代理</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358a6494125384-80"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">proxy</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">urllib2</span><span class="crayon-sy">.</span><span class="crayon-e">ProxyHandler</span><span class="crayon-sy">(</span><span class="crayon-sy">{</span><span class="crayon-s">'http'</span><span class="crayon-o">:</span><span class="crayon-v">self</span><span class="crayon-sy">.</span><span class="crayon-v">proxyURL</span><span class="crayon-sy">}</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5645b6f8358a6494125384-81"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#设置cookie</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358a6494125384-82"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">cookie</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">cookielib</span><span class="crayon-sy">.</span><span class="crayon-e">LWPCookieJar</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5645b6f8358a6494125384-83"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#设置cookie处理器</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358a6494125384-84"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">cookieHandler</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">urllib2</span><span class="crayon-sy">.</span><span class="crayon-e">HTTPCookieProcessor</span><span class="crayon-sy">(</span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">cookie</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5645b6f8358a6494125384-85"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#设置登录时用到的opener，它的open方法相当于urllib2.urlopen</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358a6494125384-86"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">opener</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">urllib2</span><span class="crayon-sy">.</span><span class="crayon-e">build_opener</span><span class="crayon-sy">(</span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">cookieHandler</span><span class="crayon-sy">,</span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">proxy</span><span class="crayon-sy">,</span><span class="crayon-v">urllib2</span><span class="crayon-sy">.</span><span class="crayon-v">HTTPHandler</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5645b6f8358a6494125384-87">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358a6494125384-88">&nbsp;</div><div class="crayon-line" id="crayon-5645b6f8358a6494125384-89"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#得到是否需要输入验证码，这次请求的相应有时会不同，有时需要验证有时不需要</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358a6494125384-90"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">def </span><span class="crayon-e">needCheckCode</span><span class="crayon-sy">(</span><span class="crayon-r">self</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5645b6f8358a6494125384-91"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#第一次登录获取验证码尝试，构建request</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358a6494125384-92"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">request</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">urllib2</span><span class="crayon-sy">.</span><span class="crayon-e">Request</span><span class="crayon-sy">(</span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">loginURL</span><span class="crayon-sy">,</span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">postData</span><span class="crayon-sy">,</span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">loginHeaders</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5645b6f8358a6494125384-93"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#得到第一次登录尝试的相应</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358a6494125384-94"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">response</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">opener</span><span class="crayon-sy">.</span><span class="crayon-e">open</span><span class="crayon-sy">(</span><span class="crayon-v">request</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5645b6f8358a6494125384-95"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#获取其中的内容</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358a6494125384-96"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">content</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">response</span><span class="crayon-sy">.</span><span class="crayon-e">read</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">.</span><span class="crayon-e">decode</span><span class="crayon-sy">(</span><span class="crayon-s">'gbk'</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5645b6f8358a6494125384-97"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#获取状态吗</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358a6494125384-98"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">status</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">response</span><span class="crayon-sy">.</span><span class="crayon-e">getcode</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5645b6f8358a6494125384-99"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#状态码为200，获取成功</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358a6494125384-100"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-v">status</span><span class="crayon-h"> </span><span class="crayon-o">==</span><span class="crayon-h"> </span><span class="crayon-cn">200</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5645b6f8358a6494125384-101"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-i">print</span><span class="crayon-h"> </span><span class="crayon-i">u</span><span class="crayon-s">"获取请求成功"</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358a6494125384-102"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#\u8bf7\u8f93\u5165\u9a8c\u8bc1\u7801这六个字是请输入验证码的utf-8编码</span></div><div class="crayon-line" id="crayon-5645b6f8358a6494125384-103"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">pattern</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">re</span><span class="crayon-sy">.</span><span class="crayon-e">compile</span><span class="crayon-sy">(</span><span class="crayon-i">u</span><span class="crayon-s">'\u8bf7\u8f93\u5165\u9a8c\u8bc1\u7801'</span><span class="crayon-sy">,</span><span class="crayon-v">re</span><span class="crayon-sy">.</span><span class="crayon-v">S</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358a6494125384-104"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">result</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">re</span><span class="crayon-sy">.</span><span class="crayon-e">search</span><span class="crayon-sy">(</span><span class="crayon-v">pattern</span><span class="crayon-sy">,</span><span class="crayon-v">content</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5645b6f8358a6494125384-105"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">print </span><span class="crayon-v">content</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358a6494125384-106"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#如果找到该字符，代表需要输入验证码</span></div><div class="crayon-line" id="crayon-5645b6f8358a6494125384-107"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-v">result</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358a6494125384-108"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-i">print</span><span class="crayon-h"> </span><span class="crayon-i">u</span><span class="crayon-s">"此次安全验证异常，您需要输入验证码"</span></div><div class="crayon-line" id="crayon-5645b6f8358a6494125384-109"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-v">content</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358a6494125384-110"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#否则不需要</span></div><div class="crayon-line" id="crayon-5645b6f8358a6494125384-111"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">else</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358a6494125384-112"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#返回结果直接带有J_HToken字样，表明直接验证通过</span></div><div class="crayon-line" id="crayon-5645b6f8358a6494125384-113"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">tokenPattern</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">re</span><span class="crayon-sy">.</span><span class="crayon-e">compile</span><span class="crayon-sy">(</span><span class="crayon-s">'id="J_HToken"'</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358a6494125384-114"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">tokenMatch</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">re</span><span class="crayon-sy">.</span><span class="crayon-e">search</span><span class="crayon-sy">(</span><span class="crayon-v">tokenPattern</span><span class="crayon-sy">,</span><span class="crayon-v">content</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5645b6f8358a6494125384-115"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-v">tokenMatch</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358a6494125384-116"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-i">print</span><span class="crayon-h"> </span><span class="crayon-i">u</span><span class="crayon-s">"此次安全验证通过，您这次不需要输入验证码"</span></div><div class="crayon-line" id="crayon-5645b6f8358a6494125384-117"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-t">False</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358a6494125384-118"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">else</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5645b6f8358a6494125384-119"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-i">print</span><span class="crayon-h"> </span><span class="crayon-i">u</span><span class="crayon-s">"获取请求失败"</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358a6494125384-120"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-v">None</span></div><div class="crayon-line" id="crayon-5645b6f8358a6494125384-121">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358a6494125384-122"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#得到验证码图片</span></div><div class="crayon-line" id="crayon-5645b6f8358a6494125384-123"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">def </span><span class="crayon-e">getCheckCode</span><span class="crayon-sy">(</span><span class="crayon-r">self</span><span class="crayon-sy">,</span><span class="crayon-v">page</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358a6494125384-124"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#得到验证码的图片</span></div><div class="crayon-line" id="crayon-5645b6f8358a6494125384-125"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">pattern</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">re</span><span class="crayon-sy">.</span><span class="crayon-e">compile</span><span class="crayon-sy">(</span><span class="crayon-s">'&lt;img id="J_StandardCode_m.*?data-src="(.*?)"'</span><span class="crayon-sy">,</span><span class="crayon-v">re</span><span class="crayon-sy">.</span><span class="crayon-v">S</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358a6494125384-126"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#匹配的结果</span></div><div class="crayon-line" id="crayon-5645b6f8358a6494125384-127"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">matchResult</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">re</span><span class="crayon-sy">.</span><span class="crayon-e">search</span><span class="crayon-sy">(</span><span class="crayon-v">pattern</span><span class="crayon-sy">,</span><span class="crayon-v">page</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358a6494125384-128"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#已经匹配得到内容，并且验证码图片链接不为空</span></div><div class="crayon-line" id="crayon-5645b6f8358a6494125384-129"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-e">matchResult </span><span class="crayon-st">and</span><span class="crayon-h"> </span><span class="crayon-v">matchResult</span><span class="crayon-sy">.</span><span class="crayon-e">group</span><span class="crayon-sy">(</span><span class="crayon-cn">1</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358a6494125384-130"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">print </span><span class="crayon-v">matchResult</span><span class="crayon-sy">.</span><span class="crayon-e">group</span><span class="crayon-sy">(</span><span class="crayon-cn">1</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5645b6f8358a6494125384-131"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-v">matchResult</span><span class="crayon-sy">.</span><span class="crayon-e">group</span><span class="crayon-sy">(</span><span class="crayon-cn">1</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358a6494125384-132"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">else</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5645b6f8358a6494125384-133"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-i">print</span><span class="crayon-h"> </span><span class="crayon-i">u</span><span class="crayon-s">"没有找到验证码内容"</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358a6494125384-134"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-t">False</span></div><div class="crayon-line" id="crayon-5645b6f8358a6494125384-135">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358a6494125384-136">&nbsp;</div><div class="crayon-line" id="crayon-5645b6f8358a6494125384-137"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#输入验证码，重新请求，如果验证成功，则返回J_HToken</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358a6494125384-138"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">def </span><span class="crayon-e">loginWithCheckCode</span><span class="crayon-sy">(</span><span class="crayon-r">self</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5645b6f8358a6494125384-139"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#提示用户输入验证码</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358a6494125384-140"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">checkcode</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">raw_input</span><span class="crayon-sy">(</span><span class="crayon-s">'请输入验证码:'</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5645b6f8358a6494125384-141"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#将验证码重新添加到post的数据中</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358a6494125384-142"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">post</span><span class="crayon-sy">[</span><span class="crayon-s">'TPL_checkcode'</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">checkcode</span></div><div class="crayon-line" id="crayon-5645b6f8358a6494125384-143"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#对post数据重新进行编码</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358a6494125384-144"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">postData</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">urllib</span><span class="crayon-sy">.</span><span class="crayon-e">urlencode</span><span class="crayon-sy">(</span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">post</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5645b6f8358a6494125384-145"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">try</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358a6494125384-146"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#再次构建请求，加入验证码之后的第二次登录尝试</span></div><div class="crayon-line" id="crayon-5645b6f8358a6494125384-147"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">request</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">urllib2</span><span class="crayon-sy">.</span><span class="crayon-e">Request</span><span class="crayon-sy">(</span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">loginURL</span><span class="crayon-sy">,</span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">postData</span><span class="crayon-sy">,</span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">loginHeaders</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358a6494125384-148"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#得到第一次登录尝试的相应</span></div><div class="crayon-line" id="crayon-5645b6f8358a6494125384-149"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">response</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">opener</span><span class="crayon-sy">.</span><span class="crayon-e">open</span><span class="crayon-sy">(</span><span class="crayon-v">request</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358a6494125384-150"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#获取其中的内容</span></div><div class="crayon-line" id="crayon-5645b6f8358a6494125384-151"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">content</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">response</span><span class="crayon-sy">.</span><span class="crayon-e">read</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">.</span><span class="crayon-e">decode</span><span class="crayon-sy">(</span><span class="crayon-s">'gbk'</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358a6494125384-152"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#检测验证码错误的正则表达式，\u9a8c\u8bc1\u7801\u9519\u8bef 是验证码错误五个字的编码</span></div><div class="crayon-line" id="crayon-5645b6f8358a6494125384-153"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">pattern</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">re</span><span class="crayon-sy">.</span><span class="crayon-e">compile</span><span class="crayon-sy">(</span><span class="crayon-i">u</span><span class="crayon-s">'\u9a8c\u8bc1\u7801\u9519\u8bef'</span><span class="crayon-sy">,</span><span class="crayon-v">re</span><span class="crayon-sy">.</span><span class="crayon-v">S</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358a6494125384-154"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">result</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">re</span><span class="crayon-sy">.</span><span class="crayon-e">search</span><span class="crayon-sy">(</span><span class="crayon-v">pattern</span><span class="crayon-sy">,</span><span class="crayon-v">content</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5645b6f8358a6494125384-155"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#如果返回页面包括了，验证码错误五个字</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358a6494125384-156"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-v">result</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5645b6f8358a6494125384-157"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-i">print</span><span class="crayon-h"> </span><span class="crayon-i">u</span><span class="crayon-s">"验证码输入错误"</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358a6494125384-158"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-t">False</span></div><div class="crayon-line" id="crayon-5645b6f8358a6494125384-159"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">else</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358a6494125384-160"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#返回结果直接带有J_HToken字样，说明验证码输入成功，成功跳转到了获取HToken的界面</span></div><div class="crayon-line" id="crayon-5645b6f8358a6494125384-161"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">tokenPattern</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">re</span><span class="crayon-sy">.</span><span class="crayon-e">compile</span><span class="crayon-sy">(</span><span class="crayon-s">'id="J_HToken" value="(.*?)"'</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358a6494125384-162"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">tokenMatch</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">re</span><span class="crayon-sy">.</span><span class="crayon-e">search</span><span class="crayon-sy">(</span><span class="crayon-v">tokenPattern</span><span class="crayon-sy">,</span><span class="crayon-v">content</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5645b6f8358a6494125384-163"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#如果匹配成功，找到了J_HToken</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358a6494125384-164"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-v">tokenMatch</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5645b6f8358a6494125384-165"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-i">print</span><span class="crayon-h"> </span><span class="crayon-i">u</span><span class="crayon-s">"验证码输入正确"</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358a6494125384-166"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">print </span><span class="crayon-v">tokenMatch</span><span class="crayon-sy">.</span><span class="crayon-e">group</span><span class="crayon-sy">(</span><span class="crayon-cn">1</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5645b6f8358a6494125384-167"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-v">tokenMatch</span><span class="crayon-sy">.</span><span class="crayon-e">group</span><span class="crayon-sy">(</span><span class="crayon-cn">1</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358a6494125384-168"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">else</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5645b6f8358a6494125384-169"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#匹配失败，J_Token获取失败</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358a6494125384-170"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-i">print</span><span class="crayon-h"> </span><span class="crayon-i">u</span><span class="crayon-s">"J_Token获取失败"</span></div><div class="crayon-line" id="crayon-5645b6f8358a6494125384-171"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-t">False</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358a6494125384-172"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">except </span><span class="crayon-v">urllib2</span><span class="crayon-sy">.</span><span class="crayon-v">HTTPError</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">e</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5645b6f8358a6494125384-173"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-i">print</span><span class="crayon-h"> </span><span class="crayon-i">u</span><span class="crayon-s">"连接服务器出错，错误原因"</span><span class="crayon-sy">,</span><span class="crayon-v">e</span><span class="crayon-sy">.</span><span class="crayon-e">reason</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358a6494125384-174"><span class="crayon-e">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-t">False</span></div><div class="crayon-line" id="crayon-5645b6f8358a6494125384-175">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358a6494125384-176"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#程序运行主干</span></div><div class="crayon-line" id="crayon-5645b6f8358a6494125384-177"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">def </span><span class="crayon-e">main</span><span class="crayon-sy">(</span><span class="crayon-r">self</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358a6494125384-178"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#是否需要验证码，是则得到页面内容，不是则返回False</span></div><div class="crayon-line" id="crayon-5645b6f8358a6494125384-179"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">needResult</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-e">needCheckCode</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358a6494125384-180"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#请求获取失败，得到的结果是None</span></div><div class="crayon-line" id="crayon-5645b6f8358a6494125384-181"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-st">not</span><span class="crayon-h"> </span><span class="crayon-v">needResult</span><span class="crayon-h"> </span><span class="crayon-o">==</span><span class="crayon-v">None</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358a6494125384-182"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-st">not</span><span class="crayon-h"> </span><span class="crayon-v">needResult</span><span class="crayon-h"> </span><span class="crayon-o">==</span><span class="crayon-h"> </span><span class="crayon-t">False</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5645b6f8358a6494125384-183"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-i">print</span><span class="crayon-h"> </span><span class="crayon-i">u</span><span class="crayon-s">"您需要手动输入验证码"</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358a6494125384-184"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">idenCode</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-e">getCheckCode</span><span class="crayon-sy">(</span><span class="crayon-v">needResult</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5645b6f8358a6494125384-185"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#得到了验证码的链接</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358a6494125384-186"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-st">not</span><span class="crayon-h"> </span><span class="crayon-v">idenCode</span><span class="crayon-h"> </span><span class="crayon-o">==</span><span class="crayon-h"> </span><span class="crayon-t">False</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5645b6f8358a6494125384-187"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-i">print</span><span class="crayon-h"> </span><span class="crayon-i">u</span><span class="crayon-s">"验证码获取成功"</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358a6494125384-188"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-i">print</span><span class="crayon-h"> </span><span class="crayon-i">u</span><span class="crayon-s">"请在浏览器中输入您看到的验证码"</span></div><div class="crayon-line" id="crayon-5645b6f8358a6494125384-189"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">webbrowser</span><span class="crayon-sy">.</span><span class="crayon-e">open_new_tab</span><span class="crayon-sy">(</span><span class="crayon-v">idenCode</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358a6494125384-190"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">J_HToken</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-e">loginWithCheckCode</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5645b6f8358a6494125384-191"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-i">print</span><span class="crayon-h"> </span><span class="crayon-s">"J_HToken"</span><span class="crayon-sy">,</span><span class="crayon-v">J_HToken</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358a6494125384-192"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#验证码链接为空，无效验证码</span></div><div class="crayon-line" id="crayon-5645b6f8358a6494125384-193"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">else</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358a6494125384-194"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-i">print</span><span class="crayon-h"> </span><span class="crayon-i">u</span><span class="crayon-s">"验证码获取失败，请重试"</span></div><div class="crayon-line" id="crayon-5645b6f8358a6494125384-195"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">else</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358a6494125384-196"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-i">print</span><span class="crayon-h"> </span><span class="crayon-i">u</span><span class="crayon-s">"不需要输入验证码"</span></div><div class="crayon-line" id="crayon-5645b6f8358a6494125384-197"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">else</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358a6494125384-198"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-i">print</span><span class="crayon-h"> </span><span class="crayon-i">u</span><span class="crayon-s">"请求登录页面失败，无法确认是否需要验证码"</span></div><div class="crayon-line" id="crayon-5645b6f8358a6494125384-199">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358a6494125384-200">&nbsp;</div><div class="crayon-line" id="crayon-5645b6f8358a6494125384-201">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358a6494125384-202"><span class="crayon-v">taobao</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">Taobao</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5645b6f8358a6494125384-203"><span class="crayon-v">taobao</span><span class="crayon-sy">.</span><span class="crayon-e">main</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0281 seconds] -->
<p>现在的运行结果是这样的，我们已经可以得到 J_HToken 了，离成功又迈进了一步。</p>
<p><a href="http://qiniu.cuiqingcai.com/wp-content/uploads/2015/02/QQ截图20150225200329.jpg"><img class="alignnone size-full wp-image-1091" src="http://qiniu.cuiqingcai.com/wp-content/uploads/2015/02/QQ截图20150225200329.jpg" alt="QQ截图20150225200329" width="767" height="209" /></a></p>
<p>好，到现在为止，我们应该可以获取到J_HToken的值啦。</p>
<h2>利用J_HToken获取st</h2>
<p>st也是一个经计算得到的code，可以这么理解，st是淘宝后台利用J_HToken以及其他数据经过计算之后得到的，可以利用st和用户名直接用get方式登录，所以st可以理解为一个秘钥。这个st值只会使用一次，如果第二次用get方式登录则会失效。所以它是一次性使用的。</p>
<p>下面J_HToken计算st的方法如下</p><!-- Crayon Syntax Highlighter v2.7.1 -->

		<div id="crayon-5645b6f8358b6953190537" class="crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover wrap" style=" margin-top: 12px; margin-bottom: 12px; float: left; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button" title="切换是否显示行编号"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="纯文本显示代码"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="切换自动换行"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="点击展开代码"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="复制代码"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="在新窗口中显示代码"><div class="crayon-button-icon"></div></div></div></div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="crayon-plain-wrap"><textarea  class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
#通过token获得st
def getSTbyToken(self,token):
    tokenURL = 'https://passport.alipay.com/mini_apply_st.js?site=0&amp;token=%s&amp;callback=stCallback6' % token
    request = urllib2.Request(tokenURL)
    response = urllib2.urlopen(request)
    #处理st，获得用户淘宝主页的登录地址
    pattern = re.compile('{"st":"(.*?)"}',re.S)
    result = re.search(pattern,response.read())
    #如果成功匹配
    if result:
        print u"成功获取st码"
        #获取st的值
        st = result.group(1)
        return st
    else:
        print u"未匹配到st"
        return False</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5645b6f8358b6953190537-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358b6953190537-2">2</div><div class="crayon-num" data-line="crayon-5645b6f8358b6953190537-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358b6953190537-4">4</div><div class="crayon-num" data-line="crayon-5645b6f8358b6953190537-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358b6953190537-6">6</div><div class="crayon-num" data-line="crayon-5645b6f8358b6953190537-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358b6953190537-8">8</div><div class="crayon-num" data-line="crayon-5645b6f8358b6953190537-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358b6953190537-10">10</div><div class="crayon-num" data-line="crayon-5645b6f8358b6953190537-11">11</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358b6953190537-12">12</div><div class="crayon-num" data-line="crayon-5645b6f8358b6953190537-13">13</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358b6953190537-14">14</div><div class="crayon-num" data-line="crayon-5645b6f8358b6953190537-15">15</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358b6953190537-16">16</div><div class="crayon-num" data-line="crayon-5645b6f8358b6953190537-17">17</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5645b6f8358b6953190537-1"><span class="crayon-p">#通过token获得st</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358b6953190537-2"><span class="crayon-e">def </span><span class="crayon-e">getSTbyToken</span><span class="crayon-sy">(</span><span class="crayon-r">self</span><span class="crayon-sy">,</span><span class="crayon-v">token</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5645b6f8358b6953190537-3"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">tokenURL</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">'https://passport.alipay.com/mini_apply_st.js?site=0&amp;token=%s&amp;callback=stCallback6'</span><span class="crayon-h"> </span><span class="crayon-o">%</span><span class="crayon-h"> </span><span class="crayon-e">token</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358b6953190537-4"><span class="crayon-e">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">request</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">urllib2</span><span class="crayon-sy">.</span><span class="crayon-e">Request</span><span class="crayon-sy">(</span><span class="crayon-v">tokenURL</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5645b6f8358b6953190537-5"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">response</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">urllib2</span><span class="crayon-sy">.</span><span class="crayon-e">urlopen</span><span class="crayon-sy">(</span><span class="crayon-v">request</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358b6953190537-6"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#处理st，获得用户淘宝主页的登录地址</span></div><div class="crayon-line" id="crayon-5645b6f8358b6953190537-7"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">pattern</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">re</span><span class="crayon-sy">.</span><span class="crayon-e">compile</span><span class="crayon-sy">(</span><span class="crayon-s">'{"st":"(.*?)"}'</span><span class="crayon-sy">,</span><span class="crayon-v">re</span><span class="crayon-sy">.</span><span class="crayon-v">S</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358b6953190537-8"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">result</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">re</span><span class="crayon-sy">.</span><span class="crayon-e">search</span><span class="crayon-sy">(</span><span class="crayon-v">pattern</span><span class="crayon-sy">,</span><span class="crayon-v">response</span><span class="crayon-sy">.</span><span class="crayon-e">read</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5645b6f8358b6953190537-9"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#如果成功匹配</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358b6953190537-10"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-v">result</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5645b6f8358b6953190537-11"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-i">print</span><span class="crayon-h"> </span><span class="crayon-i">u</span><span class="crayon-s">"成功获取st码"</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358b6953190537-12"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#获取st的值</span></div><div class="crayon-line" id="crayon-5645b6f8358b6953190537-13"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">st</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">result</span><span class="crayon-sy">.</span><span class="crayon-e">group</span><span class="crayon-sy">(</span><span class="crayon-cn">1</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358b6953190537-14"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-e">st</span></div><div class="crayon-line" id="crayon-5645b6f8358b6953190537-15"><span class="crayon-e">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">else</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358b6953190537-16"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-i">print</span><span class="crayon-h"> </span><span class="crayon-i">u</span><span class="crayon-s">"未匹配到st"</span></div><div class="crayon-line" id="crayon-5645b6f8358b6953190537-17"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-t">False</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0028 seconds] -->
<p></p>
<h2> 直接利用st登录</h2>
<p>得到st之后，基本上就大功告成啦，一段辛苦终于没有白费，你可以直接构建get方式请求的URL，直接访问这个URL便可以实现登录。</p><!-- Crayon Syntax Highlighter v2.7.1 -->

		<div id="crayon-5645b6f8358bd349499792" class="crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover wrap" style=" margin-top: 12px; margin-bottom: 12px; float: left; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button" title="切换是否显示行编号"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="纯文本显示代码"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="切换自动换行"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="点击展开代码"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="复制代码"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="在新窗口中显示代码"><div class="crayon-button-icon"></div></div></div></div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="crayon-plain-wrap"><textarea  class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
stURL = 'https://login.taobao.com/member/vst.htm?st=%s&amp;TPL_username=%s' % (st,username)</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5645b6f8358bd349499792-1">1</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5645b6f8358bd349499792-1"><span class="crayon-v">stURL</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">'https://login.taobao.com/member/vst.htm?st=%s&amp;TPL_username=%s'</span><span class="crayon-h"> </span><span class="crayon-o">%</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">st</span><span class="crayon-sy">,</span><span class="crayon-v">username</span><span class="crayon-sy">)</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0004 seconds] -->
<p>比如</p><!-- Crayon Syntax Highlighter v2.7.1 -->

		<div id="crayon-5645b6f8358c2965609876" class="crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover wrap" style=" margin-top: 12px; margin-bottom: 12px; float: left; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button" title="切换是否显示行编号"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="纯文本显示代码"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="切换自动换行"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="点击展开代码"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="复制代码"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="在新窗口中显示代码"><div class="crayon-button-icon"></div></div></div></div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="crayon-plain-wrap"><textarea  class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
 https://login.taobao.com/member/vst.htm?st=1uynJELa4hKfsfWU3OjPJCw&amp;TPL_username=cqcre</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5645b6f8358c2965609876-1">1</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5645b6f8358c2965609876-1"> <span class="crayon-v">https</span><span class="crayon-o">:</span><span class="crayon-c">//login.taobao.com/member/vst.htm?st=1uynJELa4hKfsfWU3OjPJCw&amp;TPL_username=cqcre</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0002 seconds] -->
<p>直接访问该链接即可实现登录，不过我这个应该已经失效了吧~</p>
<p>代码在这先不贴了，剩下的一起贴了~</p>
<h2>获取已买到的宝贝页面</h2>
<p>已买到的宝贝的页面地址是</p><!-- Crayon Syntax Highlighter v2.7.1 -->

		<div id="crayon-5645b6f8358c7547879847" class="crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover wrap" style=" margin-top: 12px; margin-bottom: 12px; float: left; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button" title="切换是否显示行编号"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="纯文本显示代码"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="切换自动换行"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="点击展开代码"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="复制代码"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="在新窗口中显示代码"><div class="crayon-button-icon"></div></div></div></div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="crayon-plain-wrap"><textarea  class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
http://buyer.trade.taobao.com/trade/itemlist/list_bought_items.htm</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5645b6f8358c7547879847-1">1</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5645b6f8358c7547879847-1"><span class="crayon-v">http</span><span class="crayon-o">:</span><span class="crayon-c">//buyer.trade.taobao.com/trade/itemlist/list_bought_items.htm</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0002 seconds] -->
<p>另外还有页码的参数。</p>
<p>重新构建一个带有cookie的opener，将上面的带有st的URL打开，保存它的cookie，然后再利用这个opener打开已买到的宝贝的页面，你就会得到已买到的宝贝页面详情了。</p><!-- Crayon Syntax Highlighter v2.7.1 -->

		<div id="crayon-5645b6f8358cd414725331" class="crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover wrap" style=" margin-top: 12px; margin-bottom: 12px; float: left; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button" title="切换是否显示行编号"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="纯文本显示代码"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="切换自动换行"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="点击展开代码"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="复制代码"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="在新窗口中显示代码"><div class="crayon-button-icon"></div></div></div></div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="crayon-plain-wrap"><textarea  class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
#获得已买到的宝贝页面
def getGoodsPage(self,pageIndex):
    goodsURL = 'http://buyer.trade.taobao.com/trade/itemlist/listBoughtItems.htm?action=itemlist/QueryAction&amp;event_submit_do_query=1&amp;pageNum=' + str(pageIndex)
    response = self.newOpener.open(goodsURL)
    page =  response.read().decode('gbk')
    return page</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5645b6f8358cd414725331-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358cd414725331-2">2</div><div class="crayon-num" data-line="crayon-5645b6f8358cd414725331-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358cd414725331-4">4</div><div class="crayon-num" data-line="crayon-5645b6f8358cd414725331-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358cd414725331-6">6</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5645b6f8358cd414725331-1"><span class="crayon-p">#获得已买到的宝贝页面</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358cd414725331-2"><span class="crayon-e">def </span><span class="crayon-e">getGoodsPage</span><span class="crayon-sy">(</span><span class="crayon-r">self</span><span class="crayon-sy">,</span><span class="crayon-v">pageIndex</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5645b6f8358cd414725331-3"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">goodsURL</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">'http://buyer.trade.taobao.com/trade/itemlist/listBoughtItems.htm?action=itemlist/QueryAction&amp;event_submit_do_query=1&amp;pageNum='</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-e">str</span><span class="crayon-sy">(</span><span class="crayon-v">pageIndex</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358cd414725331-4"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">response</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">newOpener</span><span class="crayon-sy">.</span><span class="crayon-e">open</span><span class="crayon-sy">(</span><span class="crayon-v">goodsURL</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5645b6f8358cd414725331-5"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">page</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-v">response</span><span class="crayon-sy">.</span><span class="crayon-e">read</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">.</span><span class="crayon-e">decode</span><span class="crayon-sy">(</span><span class="crayon-s">'gbk'</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358cd414725331-6"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-v">page</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0014 seconds] -->
<p>正则表达式提取信息</p>
<p>这是我的已买到的宝贝界面，审查元素可以看到，每一个宝贝都是tbody标签包围着。</p>
<p><a href="http://qiniu.cuiqingcai.com/wp-content/uploads/2015/02/QQ截图20150225223302.jpg"><img class="alignnone size-full wp-image-1094" src="http://qiniu.cuiqingcai.com/wp-content/uploads/2015/02/QQ截图20150225223302.jpg" alt="QQ截图20150225223302" width="1276" height="666" /></a>我们现在想获取订单时间，订单号，卖家店铺名称，宝贝名称，原价，购买数量，最后付款多少，交易状态这几个量，具体就不再分析啦，正则表达式还不熟悉的同学请参考前面所说的正则表达式的用法，在这里，正则表达式匹配的代码是</p><!-- Crayon Syntax Highlighter v2.7.1 -->

		<div id="crayon-5645b6f8358d3701059512" class="crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover wrap" style=" margin-top: 12px; margin-bottom: 12px; float: left; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button" title="切换是否显示行编号"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="纯文本显示代码"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="切换自动换行"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="点击展开代码"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="复制代码"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="在新窗口中显示代码"><div class="crayon-button-icon"></div></div></div></div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="crayon-plain-wrap"><textarea  class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
#u'\u8ba2\u5355\u53f7'是订单号的编码
pattern = re.compile(u'dealtime.*?&gt;(.*?)&lt;/span&gt;.*?\u8ba2\u5355\u53f7.*?&lt;em&gt;(.*?)&lt;/em&gt;.*?shopname.*?title="(.*?)".*?baobei-name"&gt;.*?&lt;a.*?&gt;(.*?)&lt;/a&gt;.*?'
                     u'price.*?title="(.*?)".*?quantity.*?title="(.*?)".*?amount.*?em.*?&gt;(.*?)&lt;/em&gt;.*?trade-status.*?&lt;a.*?&gt;(.*?)&lt;/a&gt;',re.S)
result = re.findall(pattern,page)
for item in result:
    print '------------------------------------------------------------'
    print "购买日期:",item[0].strip(), '订单号:',item[1].strip(),'卖家店铺:',item[2].strip()
    print '宝贝名称:',item[3].strip()
    print '原价:',item[4].strip(),'购买数量:',item[5].strip(),'实际支付:',item[6].strip(),'交易状态',item[7].strip()</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5645b6f8358d3701059512-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358d3701059512-2">2</div><div class="crayon-num" data-line="crayon-5645b6f8358d3701059512-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358d3701059512-4">4</div><div class="crayon-num" data-line="crayon-5645b6f8358d3701059512-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358d3701059512-6">6</div><div class="crayon-num" data-line="crayon-5645b6f8358d3701059512-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358d3701059512-8">8</div><div class="crayon-num" data-line="crayon-5645b6f8358d3701059512-9">9</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5645b6f8358d3701059512-1"><span class="crayon-p">#u'\u8ba2\u5355\u53f7'是订单号的编码</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358d3701059512-2"><span class="crayon-v">pattern</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">re</span><span class="crayon-sy">.</span><span class="crayon-e">compile</span><span class="crayon-sy">(</span><span class="crayon-i">u</span><span class="crayon-s">'dealtime.*?&gt;(.*?)&lt;/span&gt;.*?\u8ba2\u5355\u53f7.*?&lt;em&gt;(.*?)&lt;/em&gt;.*?shopname.*?title="(.*?)".*?baobei-name"&gt;.*?&lt;a.*?&gt;(.*?)&lt;/a&gt;.*?'</span></div><div class="crayon-line" id="crayon-5645b6f8358d3701059512-3"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="crayon-i">u</span><span class="crayon-s">'price.*?title="(.*?)".*?quantity.*?title="(.*?)".*?amount.*?em.*?&gt;(.*?)&lt;/em&gt;.*?trade-status.*?&lt;a.*?&gt;(.*?)&lt;/a&gt;'</span><span class="crayon-sy">,</span><span class="crayon-v">re</span><span class="crayon-sy">.</span><span class="crayon-v">S</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358d3701059512-4"><span class="crayon-v">result</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">re</span><span class="crayon-sy">.</span><span class="crayon-e">findall</span><span class="crayon-sy">(</span><span class="crayon-v">pattern</span><span class="crayon-sy">,</span><span class="crayon-v">page</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5645b6f8358d3701059512-5"><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-e">item </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-v">result</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358d3701059512-6"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-i">print</span><span class="crayon-h"> </span><span class="crayon-s">'------------------------------------------------------------'</span></div><div class="crayon-line" id="crayon-5645b6f8358d3701059512-7"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-i">print</span><span class="crayon-h"> </span><span class="crayon-s">"购买日期:"</span><span class="crayon-sy">,</span><span class="crayon-v">item</span><span class="crayon-sy">[</span><span class="crayon-cn">0</span><span class="crayon-sy">]</span><span class="crayon-sy">.</span><span class="crayon-e">strip</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-s">'订单号:'</span><span class="crayon-sy">,</span><span class="crayon-v">item</span><span class="crayon-sy">[</span><span class="crayon-cn">1</span><span class="crayon-sy">]</span><span class="crayon-sy">.</span><span class="crayon-e">strip</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">,</span><span class="crayon-s">'卖家店铺:'</span><span class="crayon-sy">,</span><span class="crayon-v">item</span><span class="crayon-sy">[</span><span class="crayon-cn">2</span><span class="crayon-sy">]</span><span class="crayon-sy">.</span><span class="crayon-e">strip</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358d3701059512-8"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-i">print</span><span class="crayon-h"> </span><span class="crayon-s">'宝贝名称:'</span><span class="crayon-sy">,</span><span class="crayon-v">item</span><span class="crayon-sy">[</span><span class="crayon-cn">3</span><span class="crayon-sy">]</span><span class="crayon-sy">.</span><span class="crayon-e">strip</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5645b6f8358d3701059512-9"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-i">print</span><span class="crayon-h"> </span><span class="crayon-s">'原价:'</span><span class="crayon-sy">,</span><span class="crayon-v">item</span><span class="crayon-sy">[</span><span class="crayon-cn">4</span><span class="crayon-sy">]</span><span class="crayon-sy">.</span><span class="crayon-e">strip</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">,</span><span class="crayon-s">'购买数量:'</span><span class="crayon-sy">,</span><span class="crayon-v">item</span><span class="crayon-sy">[</span><span class="crayon-cn">5</span><span class="crayon-sy">]</span><span class="crayon-sy">.</span><span class="crayon-e">strip</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">,</span><span class="crayon-s">'实际支付:'</span><span class="crayon-sy">,</span><span class="crayon-v">item</span><span class="crayon-sy">[</span><span class="crayon-cn">6</span><span class="crayon-sy">]</span><span class="crayon-sy">.</span><span class="crayon-e">strip</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">,</span><span class="crayon-s">'交易状态'</span><span class="crayon-sy">,</span><span class="crayon-v">item</span><span class="crayon-sy">[</span><span class="crayon-cn">7</span><span class="crayon-sy">]</span><span class="crayon-sy">.</span><span class="crayon-e">strip</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0034 seconds] -->
<p></p>
<h2>最终代码整理</h2>
<p>恩，你懂得，最重要的东西来了，经过博主2天多的奋战，代码基本就构建完成。写了两个类，其中提取页面信息的方法我单独放到了一个类中，叫 tool.py，类名为 Tool。</p>
<p>先看一下运行结果吧~</p>
<p><a href="http://qiniu.cuiqingcai.com/wp-content/uploads/2015/02/QQ截图20150225234414.jpg"><img class="alignnone size-full wp-image-1095" src="http://qiniu.cuiqingcai.com/wp-content/uploads/2015/02/QQ截图20150225234414.jpg" alt="QQ截图20150225234414" width="976" height="581" /></a></p>
<p>最终代码如下</p><!-- Crayon Syntax Highlighter v2.7.1 -->

		<div id="crayon-5645b6f8358da875435839" class="crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover wrap" style=" margin-top: 12px; margin-bottom: 12px; float: left; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button" title="切换是否显示行编号"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="纯文本显示代码"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="切换自动换行"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="点击展开代码"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="复制代码"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="在新窗口中显示代码"><div class="crayon-button-icon"></div></div></div></div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="crayon-plain-wrap"><textarea  class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
tool.py</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5645b6f8358da875435839-1">1</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5645b6f8358da875435839-1"><span class="crayon-v">tool</span><span class="crayon-sy">.</span><span class="crayon-v">py</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0002 seconds] -->
<p></p><!-- Crayon Syntax Highlighter v2.7.1 -->

		<div id="crayon-5645b6f8358df826116170" class="crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover wrap" style=" margin-top: 12px; margin-bottom: 12px; float: left; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button" title="切换是否显示行编号"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="纯文本显示代码"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="切换自动换行"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="点击展开代码"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="复制代码"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="在新窗口中显示代码"><div class="crayon-button-icon"></div></div></div></div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="crayon-plain-wrap"><textarea  class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
__author__ = 'CQC'
# -*- coding:utf-8 -*-

import re

#处理获得的宝贝页面
class Tool:

    #初始化
    def __init__(self):
        pass


    #获得页码数
    def getPageNum(self,page):
        pattern = re.compile(u'&lt;div class="total"&gt;.*?\u5171(.*?)\u9875',re.S)
        result = re.search(pattern,page)
        if result:
            print "找到了共多少页"
            pageNum = result.group(1).strip()
            print '共',pageNum,'页'
            return pageNum

    def getGoodsInfo(self,page):
        #u'\u8ba2\u5355\u53f7'是订单号的编码
        pattern = re.compile(u'dealtime.*?&gt;(.*?)&lt;/span&gt;.*?\u8ba2\u5355\u53f7.*?&lt;em&gt;(.*?)&lt;/em&gt;.*?shopname.*?title="(.*?)".*?baobei-name"&gt;.*?&lt;a.*?&gt;(.*?)&lt;/a&gt;.*?'
                             u'price.*?title="(.*?)".*?quantity.*?title="(.*?)".*?amount.*?em.*?&gt;(.*?)&lt;/em&gt;.*?trade-status.*?&lt;a.*?&gt;(.*?)&lt;/a&gt;',re.S)
        result = re.findall(pattern,page)
        for item in result:
            print '------------------------------------------------------------'
            print "购买日期:",item[0].strip(), '订单号:',item[1].strip(),'卖家店铺:',item[2].strip()
            print '宝贝名称:',item[3].strip()
            print '原价:',item[4].strip(),'购买数量:',item[5].strip(),'实际支付:',item[6].strip(),'交易状态',item[7].strip()</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5645b6f8358df826116170-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358df826116170-2">2</div><div class="crayon-num" data-line="crayon-5645b6f8358df826116170-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358df826116170-4">4</div><div class="crayon-num" data-line="crayon-5645b6f8358df826116170-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358df826116170-6">6</div><div class="crayon-num" data-line="crayon-5645b6f8358df826116170-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358df826116170-8">8</div><div class="crayon-num" data-line="crayon-5645b6f8358df826116170-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358df826116170-10">10</div><div class="crayon-num" data-line="crayon-5645b6f8358df826116170-11">11</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358df826116170-12">12</div><div class="crayon-num" data-line="crayon-5645b6f8358df826116170-13">13</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358df826116170-14">14</div><div class="crayon-num" data-line="crayon-5645b6f8358df826116170-15">15</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358df826116170-16">16</div><div class="crayon-num" data-line="crayon-5645b6f8358df826116170-17">17</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358df826116170-18">18</div><div class="crayon-num" data-line="crayon-5645b6f8358df826116170-19">19</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358df826116170-20">20</div><div class="crayon-num" data-line="crayon-5645b6f8358df826116170-21">21</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358df826116170-22">22</div><div class="crayon-num" data-line="crayon-5645b6f8358df826116170-23">23</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358df826116170-24">24</div><div class="crayon-num" data-line="crayon-5645b6f8358df826116170-25">25</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358df826116170-26">26</div><div class="crayon-num" data-line="crayon-5645b6f8358df826116170-27">27</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358df826116170-28">28</div><div class="crayon-num" data-line="crayon-5645b6f8358df826116170-29">29</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358df826116170-30">30</div><div class="crayon-num" data-line="crayon-5645b6f8358df826116170-31">31</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358df826116170-32">32</div><div class="crayon-num" data-line="crayon-5645b6f8358df826116170-33">33</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5645b6f8358df826116170-1"><span class="crayon-v">__author__</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">'CQC'</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358df826116170-2"><span class="crayon-p"># -*- coding:utf-8 -*-</span></div><div class="crayon-line" id="crayon-5645b6f8358df826116170-3">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358df826116170-4"><span class="crayon-e">import </span><span class="crayon-v">re</span></div><div class="crayon-line" id="crayon-5645b6f8358df826116170-5">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358df826116170-6"><span class="crayon-p">#处理获得的宝贝页面</span></div><div class="crayon-line" id="crayon-5645b6f8358df826116170-7"><span class="crayon-t">class</span><span class="crayon-h"> </span><span class="crayon-v">Tool</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358df826116170-8">&nbsp;</div><div class="crayon-line" id="crayon-5645b6f8358df826116170-9"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#初始化</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358df826116170-10"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">def </span><span class="crayon-e">__init__</span><span class="crayon-sy">(</span><span class="crayon-r">self</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5645b6f8358df826116170-11"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">pass</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358df826116170-12">&nbsp;</div><div class="crayon-line" id="crayon-5645b6f8358df826116170-13">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358df826116170-14"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#获得页码数</span></div><div class="crayon-line" id="crayon-5645b6f8358df826116170-15"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">def </span><span class="crayon-e">getPageNum</span><span class="crayon-sy">(</span><span class="crayon-r">self</span><span class="crayon-sy">,</span><span class="crayon-v">page</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358df826116170-16"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">pattern</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">re</span><span class="crayon-sy">.</span><span class="crayon-e">compile</span><span class="crayon-sy">(</span><span class="crayon-i">u</span><span class="crayon-s">'&lt;div class="total"&gt;.*?\u5171(.*?)\u9875'</span><span class="crayon-sy">,</span><span class="crayon-v">re</span><span class="crayon-sy">.</span><span class="crayon-v">S</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5645b6f8358df826116170-17"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">result</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">re</span><span class="crayon-sy">.</span><span class="crayon-e">search</span><span class="crayon-sy">(</span><span class="crayon-v">pattern</span><span class="crayon-sy">,</span><span class="crayon-v">page</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358df826116170-18"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-v">result</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5645b6f8358df826116170-19"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-i">print</span><span class="crayon-h"> </span><span class="crayon-s">"找到了共多少页"</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358df826116170-20"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">pageNum</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">result</span><span class="crayon-sy">.</span><span class="crayon-e">group</span><span class="crayon-sy">(</span><span class="crayon-cn">1</span><span class="crayon-sy">)</span><span class="crayon-sy">.</span><span class="crayon-e">strip</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5645b6f8358df826116170-21"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-i">print</span><span class="crayon-h"> </span><span class="crayon-s">'共'</span><span class="crayon-sy">,</span><span class="crayon-v">pageNum</span><span class="crayon-sy">,</span><span class="crayon-s">'页'</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358df826116170-22"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-e">pageNum</span></div><div class="crayon-line" id="crayon-5645b6f8358df826116170-23">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358df826116170-24"><span class="crayon-e">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">def </span><span class="crayon-e">getGoodsInfo</span><span class="crayon-sy">(</span><span class="crayon-r">self</span><span class="crayon-sy">,</span><span class="crayon-v">page</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5645b6f8358df826116170-25"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#u'\u8ba2\u5355\u53f7'是订单号的编码</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358df826116170-26"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">pattern</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">re</span><span class="crayon-sy">.</span><span class="crayon-e">compile</span><span class="crayon-sy">(</span><span class="crayon-i">u</span><span class="crayon-s">'dealtime.*?&gt;(.*?)&lt;/span&gt;.*?\u8ba2\u5355\u53f7.*?&lt;em&gt;(.*?)&lt;/em&gt;.*?shopname.*?title="(.*?)".*?baobei-name"&gt;.*?&lt;a.*?&gt;(.*?)&lt;/a&gt;.*?'</span></div><div class="crayon-line" id="crayon-5645b6f8358df826116170-27"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="crayon-i">u</span><span class="crayon-s">'price.*?title="(.*?)".*?quantity.*?title="(.*?)".*?amount.*?em.*?&gt;(.*?)&lt;/em&gt;.*?trade-status.*?&lt;a.*?&gt;(.*?)&lt;/a&gt;'</span><span class="crayon-sy">,</span><span class="crayon-v">re</span><span class="crayon-sy">.</span><span class="crayon-v">S</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358df826116170-28"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">result</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">re</span><span class="crayon-sy">.</span><span class="crayon-e">findall</span><span class="crayon-sy">(</span><span class="crayon-v">pattern</span><span class="crayon-sy">,</span><span class="crayon-v">page</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5645b6f8358df826116170-29"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-e">item </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-v">result</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358df826116170-30"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-i">print</span><span class="crayon-h"> </span><span class="crayon-s">'------------------------------------------------------------'</span></div><div class="crayon-line" id="crayon-5645b6f8358df826116170-31"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-i">print</span><span class="crayon-h"> </span><span class="crayon-s">"购买日期:"</span><span class="crayon-sy">,</span><span class="crayon-v">item</span><span class="crayon-sy">[</span><span class="crayon-cn">0</span><span class="crayon-sy">]</span><span class="crayon-sy">.</span><span class="crayon-e">strip</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-s">'订单号:'</span><span class="crayon-sy">,</span><span class="crayon-v">item</span><span class="crayon-sy">[</span><span class="crayon-cn">1</span><span class="crayon-sy">]</span><span class="crayon-sy">.</span><span class="crayon-e">strip</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">,</span><span class="crayon-s">'卖家店铺:'</span><span class="crayon-sy">,</span><span class="crayon-v">item</span><span class="crayon-sy">[</span><span class="crayon-cn">2</span><span class="crayon-sy">]</span><span class="crayon-sy">.</span><span class="crayon-e">strip</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358df826116170-32"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-i">print</span><span class="crayon-h"> </span><span class="crayon-s">'宝贝名称:'</span><span class="crayon-sy">,</span><span class="crayon-v">item</span><span class="crayon-sy">[</span><span class="crayon-cn">3</span><span class="crayon-sy">]</span><span class="crayon-sy">.</span><span class="crayon-e">strip</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5645b6f8358df826116170-33"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-i">print</span><span class="crayon-h"> </span><span class="crayon-s">'原价:'</span><span class="crayon-sy">,</span><span class="crayon-v">item</span><span class="crayon-sy">[</span><span class="crayon-cn">4</span><span class="crayon-sy">]</span><span class="crayon-sy">.</span><span class="crayon-e">strip</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">,</span><span class="crayon-s">'购买数量:'</span><span class="crayon-sy">,</span><span class="crayon-v">item</span><span class="crayon-sy">[</span><span class="crayon-cn">5</span><span class="crayon-sy">]</span><span class="crayon-sy">.</span><span class="crayon-e">strip</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">,</span><span class="crayon-s">'实际支付:'</span><span class="crayon-sy">,</span><span class="crayon-v">item</span><span class="crayon-sy">[</span><span class="crayon-cn">6</span><span class="crayon-sy">]</span><span class="crayon-sy">.</span><span class="crayon-e">strip</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">,</span><span class="crayon-s">'交易状态'</span><span class="crayon-sy">,</span><span class="crayon-v">item</span><span class="crayon-sy">[</span><span class="crayon-cn">7</span><span class="crayon-sy">]</span><span class="crayon-sy">.</span><span class="crayon-e">strip</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0059 seconds] -->
<p></p><!-- Crayon Syntax Highlighter v2.7.1 -->

		<div id="crayon-5645b6f8358e6264154515" class="crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover wrap" style=" margin-top: 12px; margin-bottom: 12px; float: left; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button" title="切换是否显示行编号"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="纯文本显示代码"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="切换自动换行"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="点击展开代码"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="复制代码"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="在新窗口中显示代码"><div class="crayon-button-icon"></div></div></div></div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="crayon-plain-wrap"><textarea  class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
taobao.py</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5645b6f8358e6264154515-1">1</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5645b6f8358e6264154515-1"><span class="crayon-v">taobao</span><span class="crayon-sy">.</span><span class="crayon-v">py</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0002 seconds] -->
<p></p><!-- Crayon Syntax Highlighter v2.7.1 -->

		<div id="crayon-5645b6f8358eb826379700" class="crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover wrap" style=" margin-top: 12px; margin-bottom: 12px; float: left; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button" title="切换是否显示行编号"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="纯文本显示代码"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="切换自动换行"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="点击展开代码"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="复制代码"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="在新窗口中显示代码"><div class="crayon-button-icon"></div></div></div></div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="crayon-plain-wrap"><textarea  class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
__author__ = 'CQC'
# -*- coding:utf-8 -*-

import urllib
import urllib2
import cookielib
import re
import webbrowser
import tool

#模拟登录淘宝类
class Taobao:

    #初始化方法
    def __init__(self):
        #登录的URL
        self.loginURL = "https://login.taobao.com/member/login.jhtml"
        #代理IP地址，防止自己的IP被封禁
        self.proxyURL = 'http://120.193.146.97:843'
        #登录POST数据时发送的头部信息
        self.loginHeaders =  {
            'Host':'login.taobao.com',
            'User-Agent' : 'Mozilla/5.0 (Windows NT 6.1; WOW64; rv:35.0) Gecko/20100101 Firefox/35.0',
            'Referer' : 'https://login.taobao.com/member/login.jhtml',
            'Content-Type': 'application/x-www-form-urlencoded',
            'Connection' : 'Keep-Alive'
        }
        #用户名
        self.username = 'cqcre'
        #ua字符串，经过淘宝ua算法计算得出，包含了时间戳,浏览器,屏幕分辨率,随机数,鼠标移动,鼠标点击,其实还有键盘输入记录,鼠标移动的记录、点击的记录等等的信息
        self.ua = '191UW5TcyMNYQwiAiwTR3tCf0J/QnhEcUpkMmQ=|Um5Ockt0TXdPc011TXVKdyE=|U2xMHDJ+H2QJZwBxX39Rb1d5WXcrSixAJ1kjDVsN|VGhXd1llXGNaYFhkWmJaYl1gV2pIdUtyTXRKfkN4Qn1FeEF6R31TBQ==|VWldfS0TMw8xDjYWKhAwHiUdOA9wCDEVaxgkATdcNU8iDFoM|VmNDbUMV|V2NDbUMV|WGRYeCgGZhtmH2VScVI2UT5fORtmD2gCawwuRSJHZAFsCWMOdVYyVTpbPR99HWAFYVMpUDUFORshHiQdJR0jAT0JPQc/BDoFPgooFDZtVBR5Fn9VOwt2EWhCOVQ4WSJPJFkHXhgoSDVIMRgnHyFqQ3xEezceIRkmahRqFDZLIkUvRiEDaA9qQ3xEezcZORc5bzk=|WWdHFy0TMw8vEy0UIQE0ADgYJBohGjoAOw4uEiwXLAw2DThuOA==|WmBAED5+KnIbdRh1GXgFQSZbGFdrUm1UblZqVGxQa1ZiTGxQcEp1I3U=|W2NDEz19KXENZwJjHkY7Ui9OJQsre09zSWlXY1oMLBExHzERLxsuE0UT|XGZGFjh4LHQdcx5zH34DRyBdHlFtVGtSaFBsUmpWbVBkSmpXd05zTnMlcw==|XWdHFzl5LXUJYwZnGkI/VitKIQ8vEzMKNws3YTc=|XmdaZ0d6WmVFeUB8XGJaYEB4TGxWbk5yTndXa0tyT29Ta0t1QGBeZDI='
        #密码，在这里不能输入真实密码，淘宝对此密码进行了加密处理，256位，此处为加密后的密码
        self.password2 = '7511aa6854629e45de220d29174f1066537a73420ef6dbb5b46f202396703a2d56b0312df8769d886e6ca63d587fdbb99ee73927e8c07d9c88cd02182e1a21edc13fb8e140a4a2a4b53bf38484bd0e08199e03eb9bf7b365a5c673c03407d812b91394f0d3c7564042e3f2b11d156aeea37ad6460118914125ab8f8ac466f'
        self.post = post = {
            'ua':self.ua,
            'TPL_checkcode':'',
            'CtrlVersion': '1,0,0,7',
            'TPL_password':'',
            'TPL_redirect_url':'http://i.taobao.com/my_taobao.htm?nekot=udm8087E1424147022443',
            'TPL_username':self.username,
            'loginsite':'0',
            'newlogin':'0',
            'from':'tb',
            'fc':'default',
            'style':'default',
            'css_style':'',
            'tid':'XOR_1_000000000000000000000000000000_625C4720470A0A050976770A',
            'support':'000001',
            'loginType':'4',
            'minititle':'',
            'minipara':'',
            'umto':'NaN',
            'pstrong':'3',
            'llnick':'',
            'sign':'',
            'need_sign':'',
            'isIgnore':'',
            'full_redirect':'',
            'popid':'',
            'callback':'',
            'guf':'',
            'not_duplite_str':'',
            'need_user_id':'',
            'poy':'',
            'gvfdcname':'10',
            'gvfdcre':'',
            'from_encoding ':'',
            'sub':'',
            'TPL_password_2':self.password2,
            'loginASR':'1',
            'loginASRSuc':'1',
            'allp':'',
            'oslanguage':'zh-CN',
            'sr':'1366*768',
            'osVer':'windows|6.1',
            'naviVer':'firefox|35'
        }
        #将POST的数据进行编码转换
        self.postData = urllib.urlencode(self.post)
        #设置代理
        self.proxy = urllib2.ProxyHandler({'http':self.proxyURL})
        #设置cookie
        self.cookie = cookielib.LWPCookieJar()
        #设置cookie处理器
        self.cookieHandler = urllib2.HTTPCookieProcessor(self.cookie)
        #设置登录时用到的opener，它的open方法相当于urllib2.urlopen
        self.opener = urllib2.build_opener(self.cookieHandler,self.proxy,urllib2.HTTPHandler)
        #赋值J_HToken
        self.J_HToken = ''
        #登录成功时，需要的Cookie
        self.newCookie = cookielib.CookieJar()
        #登陆成功时，需要的一个新的opener
        self.newOpener = urllib2.build_opener(urllib2.HTTPCookieProcessor(self.newCookie))
        #引入工具类
        self.tool = tool.Tool()


    #得到是否需要输入验证码，这次请求的相应有时会不同，有时需要验证有时不需要
    def needCheckCode(self):
        #第一次登录获取验证码尝试，构建request
        request = urllib2.Request(self.loginURL,self.postData,self.loginHeaders)
        #得到第一次登录尝试的相应
        response = self.opener.open(request)
        #获取其中的内容
        content = response.read().decode('gbk')
        #获取状态吗
        status = response.getcode()
        #状态码为200，获取成功
        if status == 200:
            print u"获取请求成功"
            #\u8bf7\u8f93\u5165\u9a8c\u8bc1\u7801这六个字是请输入验证码的utf-8编码
            pattern = re.compile(u'\u8bf7\u8f93\u5165\u9a8c\u8bc1\u7801',re.S)
            result = re.search(pattern,content)
            #如果找到该字符，代表需要输入验证码
            if result:
                print u"此次安全验证异常，您需要输入验证码"
                return content
            #否则不需要
            else:
                #返回结果直接带有J_HToken字样，表明直接验证通过
                tokenPattern = re.compile('id="J_HToken" value="(.*?)"')
                tokenMatch = re.search(tokenPattern,content)
                if tokenMatch:
                    self.J_HToken = tokenMatch.group(1)
                    print u"此次安全验证通过，您这次不需要输入验证码"
                    return False
        else:
            print u"获取请求失败"
            return None

    #得到验证码图片
    def getCheckCode(self,page):
        #得到验证码的图片
        pattern = re.compile('&lt;img id="J_StandardCode_m.*?data-src="(.*?)"',re.S)
        #匹配的结果
        matchResult = re.search(pattern,page)
        #已经匹配得到内容，并且验证码图片链接不为空
        if matchResult and matchResult.group(1):
            return matchResult.group(1)
        else:
            print u"没有找到验证码内容"
            return False


    #输入验证码，重新请求，如果验证成功，则返回J_HToken
    def loginWithCheckCode(self):
        #提示用户输入验证码
        checkcode = raw_input('请输入验证码:')
        #将验证码重新添加到post的数据中
        self.post['TPL_checkcode'] = checkcode
        #对post数据重新进行编码
        self.postData = urllib.urlencode(self.post)
        try:
            #再次构建请求，加入验证码之后的第二次登录尝试
            request = urllib2.Request(self.loginURL,self.postData,self.loginHeaders)
            #得到第一次登录尝试的相应
            response = self.opener.open(request)
            #获取其中的内容
            content = response.read().decode('gbk')
            #检测验证码错误的正则表达式，\u9a8c\u8bc1\u7801\u9519\u8bef 是验证码错误五个字的编码
            pattern = re.compile(u'\u9a8c\u8bc1\u7801\u9519\u8bef',re.S)
            result = re.search(pattern,content)
            #如果返回页面包括了，验证码错误五个字
            if result:
                print u"验证码输入错误"
                return False
            else:
                #返回结果直接带有J_HToken字样，说明验证码输入成功，成功跳转到了获取HToken的界面
                tokenPattern = re.compile('id="J_HToken" value="(.*?)"')
                tokenMatch = re.search(tokenPattern,content)
                #如果匹配成功，找到了J_HToken
                if tokenMatch:
                    print u"验证码输入正确"
                    self.J_HToken = tokenMatch.group(1)
                    return tokenMatch.group(1)
                else:
                    #匹配失败，J_Token获取失败
                    print u"J_Token获取失败"
                    return False
        except urllib2.HTTPError, e:
            print u"连接服务器出错，错误原因",e.reason
            return False


    #通过token获得st
    def getSTbyToken(self,token):
        tokenURL = 'https://passport.alipay.com/mini_apply_st.js?site=0&amp;token=%s&amp;callback=stCallback6' % token
        request = urllib2.Request(tokenURL)
        response = urllib2.urlopen(request)
        #处理st，获得用户淘宝主页的登录地址
        pattern = re.compile('{"st":"(.*?)"}',re.S)
        result = re.search(pattern,response.read())
        #如果成功匹配
        if result:
            print u"成功获取st码"
            #获取st的值
            st = result.group(1)
            return st
        else:
            print u"未匹配到st"
            return False

    #利用st码进行登录,获取重定向网址
    def loginByST(self,st,username):
        stURL = 'https://login.taobao.com/member/vst.htm?st=%s&amp;TPL_username=%s' % (st,username)
        headers = {
            'User-Agent' : 'Mozilla/5.0 (Windows NT 6.1; WOW64; rv:35.0) Gecko/20100101 Firefox/35.0',
            'Host':'login.taobao.com',
            'Connection' : 'Keep-Alive'
        }
        request = urllib2.Request(stURL,headers = headers)
        response = self.newOpener.open(request)
        content =  response.read().decode('gbk')
        #检测结果，看是否登录成功
        pattern = re.compile('top.location = "(.*?)"',re.S)
        match = re.search(pattern,content)
        if match:
            print u"登录网址成功"
            location = match.group(1)
            return True
        else:
            print "登录失败"
            return False


    #获得已买到的宝贝页面
    def getGoodsPage(self,pageIndex):
        goodsURL = 'http://buyer.trade.taobao.com/trade/itemlist/listBoughtItems.htm?action=itemlist/QueryAction&amp;event_submit_do_query=1' + '&amp;pageNum=' + str(pageIndex)
        response = self.newOpener.open(goodsURL)
        page =  response.read().decode('gbk')
        return page

    #获取所有已买到的宝贝信息
    def getAllGoods(self,pageNum):
        print u"获取到的商品列表如下"
        for x in range(1,int(pageNum)+1):
            page = self.getGoodsPage(x)
            self.tool.getGoodsInfo(page)



    #程序运行主干
    def main(self):
        #是否需要验证码，是则得到页面内容，不是则返回False
        needResult = self.needCheckCode()
        #请求获取失败，得到的结果是None
        if not needResult ==None:
            if not needResult == False:
                print u"您需要手动输入验证码"
                checkCode = self.getCheckCode(needResult)
                #得到了验证码的链接
                if not checkCode == False:
                    print u"验证码获取成功"
                    print u"请在浏览器中输入您看到的验证码"
                    webbrowser.open_new_tab(checkCode)
                    self.loginWithCheckCode()
                #验证码链接为空，无效验证码
                else:
                    print u"验证码获取失败，请重试"
            else:
                print u"不需要输入验证码"
        else:
            print u"请求登录页面失败，无法确认是否需要验证码"


        #判断token是否正常获取到
        if not self.J_HToken:
            print "获取Token失败，请重试"
            return
        #获取st码
        st = self.getSTbyToken(self.J_HToken)
        #利用st进行登录
        result = self.loginByST(st,self.username)
        if result:
            #获得所有宝贝的页面
            page = self.getGoodsPage(1)
            pageNum = self.tool.getPageNum(page)
            self.getAllGoods(pageNum)
        else:
            print u"登录失败"



taobao = Taobao()
taobao.main()</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5645b6f8358eb826379700-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358eb826379700-2">2</div><div class="crayon-num" data-line="crayon-5645b6f8358eb826379700-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358eb826379700-4">4</div><div class="crayon-num" data-line="crayon-5645b6f8358eb826379700-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358eb826379700-6">6</div><div class="crayon-num" data-line="crayon-5645b6f8358eb826379700-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358eb826379700-8">8</div><div class="crayon-num" data-line="crayon-5645b6f8358eb826379700-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358eb826379700-10">10</div><div class="crayon-num" data-line="crayon-5645b6f8358eb826379700-11">11</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358eb826379700-12">12</div><div class="crayon-num" data-line="crayon-5645b6f8358eb826379700-13">13</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358eb826379700-14">14</div><div class="crayon-num" data-line="crayon-5645b6f8358eb826379700-15">15</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358eb826379700-16">16</div><div class="crayon-num" data-line="crayon-5645b6f8358eb826379700-17">17</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358eb826379700-18">18</div><div class="crayon-num" data-line="crayon-5645b6f8358eb826379700-19">19</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358eb826379700-20">20</div><div class="crayon-num" data-line="crayon-5645b6f8358eb826379700-21">21</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358eb826379700-22">22</div><div class="crayon-num" data-line="crayon-5645b6f8358eb826379700-23">23</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358eb826379700-24">24</div><div class="crayon-num" data-line="crayon-5645b6f8358eb826379700-25">25</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358eb826379700-26">26</div><div class="crayon-num" data-line="crayon-5645b6f8358eb826379700-27">27</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358eb826379700-28">28</div><div class="crayon-num" data-line="crayon-5645b6f8358eb826379700-29">29</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358eb826379700-30">30</div><div class="crayon-num" data-line="crayon-5645b6f8358eb826379700-31">31</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358eb826379700-32">32</div><div class="crayon-num" data-line="crayon-5645b6f8358eb826379700-33">33</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358eb826379700-34">34</div><div class="crayon-num" data-line="crayon-5645b6f8358eb826379700-35">35</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358eb826379700-36">36</div><div class="crayon-num" data-line="crayon-5645b6f8358eb826379700-37">37</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358eb826379700-38">38</div><div class="crayon-num" data-line="crayon-5645b6f8358eb826379700-39">39</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358eb826379700-40">40</div><div class="crayon-num" data-line="crayon-5645b6f8358eb826379700-41">41</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358eb826379700-42">42</div><div class="crayon-num" data-line="crayon-5645b6f8358eb826379700-43">43</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358eb826379700-44">44</div><div class="crayon-num" data-line="crayon-5645b6f8358eb826379700-45">45</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358eb826379700-46">46</div><div class="crayon-num" data-line="crayon-5645b6f8358eb826379700-47">47</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358eb826379700-48">48</div><div class="crayon-num" data-line="crayon-5645b6f8358eb826379700-49">49</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358eb826379700-50">50</div><div class="crayon-num" data-line="crayon-5645b6f8358eb826379700-51">51</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358eb826379700-52">52</div><div class="crayon-num" data-line="crayon-5645b6f8358eb826379700-53">53</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358eb826379700-54">54</div><div class="crayon-num" data-line="crayon-5645b6f8358eb826379700-55">55</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358eb826379700-56">56</div><div class="crayon-num" data-line="crayon-5645b6f8358eb826379700-57">57</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358eb826379700-58">58</div><div class="crayon-num" data-line="crayon-5645b6f8358eb826379700-59">59</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358eb826379700-60">60</div><div class="crayon-num" data-line="crayon-5645b6f8358eb826379700-61">61</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358eb826379700-62">62</div><div class="crayon-num" data-line="crayon-5645b6f8358eb826379700-63">63</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358eb826379700-64">64</div><div class="crayon-num" data-line="crayon-5645b6f8358eb826379700-65">65</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358eb826379700-66">66</div><div class="crayon-num" data-line="crayon-5645b6f8358eb826379700-67">67</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358eb826379700-68">68</div><div class="crayon-num" data-line="crayon-5645b6f8358eb826379700-69">69</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358eb826379700-70">70</div><div class="crayon-num" data-line="crayon-5645b6f8358eb826379700-71">71</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358eb826379700-72">72</div><div class="crayon-num" data-line="crayon-5645b6f8358eb826379700-73">73</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358eb826379700-74">74</div><div class="crayon-num" data-line="crayon-5645b6f8358eb826379700-75">75</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358eb826379700-76">76</div><div class="crayon-num" data-line="crayon-5645b6f8358eb826379700-77">77</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358eb826379700-78">78</div><div class="crayon-num" data-line="crayon-5645b6f8358eb826379700-79">79</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358eb826379700-80">80</div><div class="crayon-num" data-line="crayon-5645b6f8358eb826379700-81">81</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358eb826379700-82">82</div><div class="crayon-num" data-line="crayon-5645b6f8358eb826379700-83">83</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358eb826379700-84">84</div><div class="crayon-num" data-line="crayon-5645b6f8358eb826379700-85">85</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358eb826379700-86">86</div><div class="crayon-num" data-line="crayon-5645b6f8358eb826379700-87">87</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358eb826379700-88">88</div><div class="crayon-num" data-line="crayon-5645b6f8358eb826379700-89">89</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358eb826379700-90">90</div><div class="crayon-num" data-line="crayon-5645b6f8358eb826379700-91">91</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358eb826379700-92">92</div><div class="crayon-num" data-line="crayon-5645b6f8358eb826379700-93">93</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358eb826379700-94">94</div><div class="crayon-num" data-line="crayon-5645b6f8358eb826379700-95">95</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358eb826379700-96">96</div><div class="crayon-num" data-line="crayon-5645b6f8358eb826379700-97">97</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358eb826379700-98">98</div><div class="crayon-num" data-line="crayon-5645b6f8358eb826379700-99">99</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358eb826379700-100">100</div><div class="crayon-num" data-line="crayon-5645b6f8358eb826379700-101">101</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358eb826379700-102">102</div><div class="crayon-num" data-line="crayon-5645b6f8358eb826379700-103">103</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358eb826379700-104">104</div><div class="crayon-num" data-line="crayon-5645b6f8358eb826379700-105">105</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358eb826379700-106">106</div><div class="crayon-num" data-line="crayon-5645b6f8358eb826379700-107">107</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358eb826379700-108">108</div><div class="crayon-num" data-line="crayon-5645b6f8358eb826379700-109">109</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358eb826379700-110">110</div><div class="crayon-num" data-line="crayon-5645b6f8358eb826379700-111">111</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358eb826379700-112">112</div><div class="crayon-num" data-line="crayon-5645b6f8358eb826379700-113">113</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358eb826379700-114">114</div><div class="crayon-num" data-line="crayon-5645b6f8358eb826379700-115">115</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358eb826379700-116">116</div><div class="crayon-num" data-line="crayon-5645b6f8358eb826379700-117">117</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358eb826379700-118">118</div><div class="crayon-num" data-line="crayon-5645b6f8358eb826379700-119">119</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358eb826379700-120">120</div><div class="crayon-num" data-line="crayon-5645b6f8358eb826379700-121">121</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358eb826379700-122">122</div><div class="crayon-num" data-line="crayon-5645b6f8358eb826379700-123">123</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358eb826379700-124">124</div><div class="crayon-num" data-line="crayon-5645b6f8358eb826379700-125">125</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358eb826379700-126">126</div><div class="crayon-num" data-line="crayon-5645b6f8358eb826379700-127">127</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358eb826379700-128">128</div><div class="crayon-num" data-line="crayon-5645b6f8358eb826379700-129">129</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358eb826379700-130">130</div><div class="crayon-num" data-line="crayon-5645b6f8358eb826379700-131">131</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358eb826379700-132">132</div><div class="crayon-num" data-line="crayon-5645b6f8358eb826379700-133">133</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358eb826379700-134">134</div><div class="crayon-num" data-line="crayon-5645b6f8358eb826379700-135">135</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358eb826379700-136">136</div><div class="crayon-num" data-line="crayon-5645b6f8358eb826379700-137">137</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358eb826379700-138">138</div><div class="crayon-num" data-line="crayon-5645b6f8358eb826379700-139">139</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358eb826379700-140">140</div><div class="crayon-num" data-line="crayon-5645b6f8358eb826379700-141">141</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358eb826379700-142">142</div><div class="crayon-num" data-line="crayon-5645b6f8358eb826379700-143">143</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358eb826379700-144">144</div><div class="crayon-num" data-line="crayon-5645b6f8358eb826379700-145">145</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358eb826379700-146">146</div><div class="crayon-num" data-line="crayon-5645b6f8358eb826379700-147">147</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358eb826379700-148">148</div><div class="crayon-num" data-line="crayon-5645b6f8358eb826379700-149">149</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358eb826379700-150">150</div><div class="crayon-num" data-line="crayon-5645b6f8358eb826379700-151">151</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358eb826379700-152">152</div><div class="crayon-num" data-line="crayon-5645b6f8358eb826379700-153">153</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358eb826379700-154">154</div><div class="crayon-num" data-line="crayon-5645b6f8358eb826379700-155">155</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358eb826379700-156">156</div><div class="crayon-num" data-line="crayon-5645b6f8358eb826379700-157">157</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358eb826379700-158">158</div><div class="crayon-num" data-line="crayon-5645b6f8358eb826379700-159">159</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358eb826379700-160">160</div><div class="crayon-num" data-line="crayon-5645b6f8358eb826379700-161">161</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358eb826379700-162">162</div><div class="crayon-num" data-line="crayon-5645b6f8358eb826379700-163">163</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358eb826379700-164">164</div><div class="crayon-num" data-line="crayon-5645b6f8358eb826379700-165">165</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358eb826379700-166">166</div><div class="crayon-num" data-line="crayon-5645b6f8358eb826379700-167">167</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358eb826379700-168">168</div><div class="crayon-num" data-line="crayon-5645b6f8358eb826379700-169">169</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358eb826379700-170">170</div><div class="crayon-num" data-line="crayon-5645b6f8358eb826379700-171">171</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358eb826379700-172">172</div><div class="crayon-num" data-line="crayon-5645b6f8358eb826379700-173">173</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358eb826379700-174">174</div><div class="crayon-num" data-line="crayon-5645b6f8358eb826379700-175">175</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358eb826379700-176">176</div><div class="crayon-num" data-line="crayon-5645b6f8358eb826379700-177">177</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358eb826379700-178">178</div><div class="crayon-num" data-line="crayon-5645b6f8358eb826379700-179">179</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358eb826379700-180">180</div><div class="crayon-num" data-line="crayon-5645b6f8358eb826379700-181">181</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358eb826379700-182">182</div><div class="crayon-num" data-line="crayon-5645b6f8358eb826379700-183">183</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358eb826379700-184">184</div><div class="crayon-num" data-line="crayon-5645b6f8358eb826379700-185">185</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358eb826379700-186">186</div><div class="crayon-num" data-line="crayon-5645b6f8358eb826379700-187">187</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358eb826379700-188">188</div><div class="crayon-num" data-line="crayon-5645b6f8358eb826379700-189">189</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358eb826379700-190">190</div><div class="crayon-num" data-line="crayon-5645b6f8358eb826379700-191">191</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358eb826379700-192">192</div><div class="crayon-num" data-line="crayon-5645b6f8358eb826379700-193">193</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358eb826379700-194">194</div><div class="crayon-num" data-line="crayon-5645b6f8358eb826379700-195">195</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358eb826379700-196">196</div><div class="crayon-num" data-line="crayon-5645b6f8358eb826379700-197">197</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358eb826379700-198">198</div><div class="crayon-num" data-line="crayon-5645b6f8358eb826379700-199">199</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358eb826379700-200">200</div><div class="crayon-num" data-line="crayon-5645b6f8358eb826379700-201">201</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358eb826379700-202">202</div><div class="crayon-num" data-line="crayon-5645b6f8358eb826379700-203">203</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358eb826379700-204">204</div><div class="crayon-num" data-line="crayon-5645b6f8358eb826379700-205">205</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358eb826379700-206">206</div><div class="crayon-num" data-line="crayon-5645b6f8358eb826379700-207">207</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358eb826379700-208">208</div><div class="crayon-num" data-line="crayon-5645b6f8358eb826379700-209">209</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358eb826379700-210">210</div><div class="crayon-num" data-line="crayon-5645b6f8358eb826379700-211">211</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358eb826379700-212">212</div><div class="crayon-num" data-line="crayon-5645b6f8358eb826379700-213">213</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358eb826379700-214">214</div><div class="crayon-num" data-line="crayon-5645b6f8358eb826379700-215">215</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358eb826379700-216">216</div><div class="crayon-num" data-line="crayon-5645b6f8358eb826379700-217">217</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358eb826379700-218">218</div><div class="crayon-num" data-line="crayon-5645b6f8358eb826379700-219">219</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358eb826379700-220">220</div><div class="crayon-num" data-line="crayon-5645b6f8358eb826379700-221">221</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358eb826379700-222">222</div><div class="crayon-num" data-line="crayon-5645b6f8358eb826379700-223">223</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358eb826379700-224">224</div><div class="crayon-num" data-line="crayon-5645b6f8358eb826379700-225">225</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358eb826379700-226">226</div><div class="crayon-num" data-line="crayon-5645b6f8358eb826379700-227">227</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358eb826379700-228">228</div><div class="crayon-num" data-line="crayon-5645b6f8358eb826379700-229">229</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358eb826379700-230">230</div><div class="crayon-num" data-line="crayon-5645b6f8358eb826379700-231">231</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358eb826379700-232">232</div><div class="crayon-num" data-line="crayon-5645b6f8358eb826379700-233">233</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358eb826379700-234">234</div><div class="crayon-num" data-line="crayon-5645b6f8358eb826379700-235">235</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358eb826379700-236">236</div><div class="crayon-num" data-line="crayon-5645b6f8358eb826379700-237">237</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358eb826379700-238">238</div><div class="crayon-num" data-line="crayon-5645b6f8358eb826379700-239">239</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358eb826379700-240">240</div><div class="crayon-num" data-line="crayon-5645b6f8358eb826379700-241">241</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358eb826379700-242">242</div><div class="crayon-num" data-line="crayon-5645b6f8358eb826379700-243">243</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358eb826379700-244">244</div><div class="crayon-num" data-line="crayon-5645b6f8358eb826379700-245">245</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358eb826379700-246">246</div><div class="crayon-num" data-line="crayon-5645b6f8358eb826379700-247">247</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358eb826379700-248">248</div><div class="crayon-num" data-line="crayon-5645b6f8358eb826379700-249">249</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358eb826379700-250">250</div><div class="crayon-num" data-line="crayon-5645b6f8358eb826379700-251">251</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358eb826379700-252">252</div><div class="crayon-num" data-line="crayon-5645b6f8358eb826379700-253">253</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358eb826379700-254">254</div><div class="crayon-num" data-line="crayon-5645b6f8358eb826379700-255">255</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358eb826379700-256">256</div><div class="crayon-num" data-line="crayon-5645b6f8358eb826379700-257">257</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358eb826379700-258">258</div><div class="crayon-num" data-line="crayon-5645b6f8358eb826379700-259">259</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358eb826379700-260">260</div><div class="crayon-num" data-line="crayon-5645b6f8358eb826379700-261">261</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358eb826379700-262">262</div><div class="crayon-num" data-line="crayon-5645b6f8358eb826379700-263">263</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358eb826379700-264">264</div><div class="crayon-num" data-line="crayon-5645b6f8358eb826379700-265">265</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358eb826379700-266">266</div><div class="crayon-num" data-line="crayon-5645b6f8358eb826379700-267">267</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358eb826379700-268">268</div><div class="crayon-num" data-line="crayon-5645b6f8358eb826379700-269">269</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358eb826379700-270">270</div><div class="crayon-num" data-line="crayon-5645b6f8358eb826379700-271">271</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358eb826379700-272">272</div><div class="crayon-num" data-line="crayon-5645b6f8358eb826379700-273">273</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358eb826379700-274">274</div><div class="crayon-num" data-line="crayon-5645b6f8358eb826379700-275">275</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358eb826379700-276">276</div><div class="crayon-num" data-line="crayon-5645b6f8358eb826379700-277">277</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358eb826379700-278">278</div><div class="crayon-num" data-line="crayon-5645b6f8358eb826379700-279">279</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358eb826379700-280">280</div><div class="crayon-num" data-line="crayon-5645b6f8358eb826379700-281">281</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358eb826379700-282">282</div><div class="crayon-num" data-line="crayon-5645b6f8358eb826379700-283">283</div><div class="crayon-num crayon-striped-num" data-line="crayon-5645b6f8358eb826379700-284">284</div><div class="crayon-num" data-line="crayon-5645b6f8358eb826379700-285">285</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5645b6f8358eb826379700-1"><span class="crayon-v">__author__</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">'CQC'</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358eb826379700-2"><span class="crayon-p"># -*- coding:utf-8 -*-</span></div><div class="crayon-line" id="crayon-5645b6f8358eb826379700-3">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358eb826379700-4"><span class="crayon-e">import </span><span class="crayon-e">urllib</span></div><div class="crayon-line" id="crayon-5645b6f8358eb826379700-5"><span class="crayon-e">import </span><span class="crayon-e">urllib2</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358eb826379700-6"><span class="crayon-e">import </span><span class="crayon-e">cookielib</span></div><div class="crayon-line" id="crayon-5645b6f8358eb826379700-7"><span class="crayon-e">import </span><span class="crayon-e">re</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358eb826379700-8"><span class="crayon-e">import </span><span class="crayon-e">webbrowser</span></div><div class="crayon-line" id="crayon-5645b6f8358eb826379700-9"><span class="crayon-e">import </span><span class="crayon-v">tool</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358eb826379700-10">&nbsp;</div><div class="crayon-line" id="crayon-5645b6f8358eb826379700-11"><span class="crayon-p">#模拟登录淘宝类</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358eb826379700-12"><span class="crayon-t">class</span><span class="crayon-h"> </span><span class="crayon-v">Taobao</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5645b6f8358eb826379700-13">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358eb826379700-14"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#初始化方法</span></div><div class="crayon-line" id="crayon-5645b6f8358eb826379700-15"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">def </span><span class="crayon-e">__init__</span><span class="crayon-sy">(</span><span class="crayon-r">self</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358eb826379700-16"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#登录的URL</span></div><div class="crayon-line" id="crayon-5645b6f8358eb826379700-17"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">loginURL</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">"https://login.taobao.com/member/login.jhtml"</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358eb826379700-18"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#代理IP地址，防止自己的IP被封禁</span></div><div class="crayon-line" id="crayon-5645b6f8358eb826379700-19"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">proxyURL</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">'http://120.193.146.97:843'</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358eb826379700-20"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#登录POST数据时发送的头部信息</span></div><div class="crayon-line" id="crayon-5645b6f8358eb826379700-21"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">loginHeaders</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358eb826379700-22"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'Host'</span><span class="crayon-o">:</span><span class="crayon-s">'login.taobao.com'</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5645b6f8358eb826379700-23"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'User-Agent'</span><span class="crayon-h"> </span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-s">'Mozilla/5.0 (Windows NT 6.1; WOW64; rv:35.0) Gecko/20100101 Firefox/35.0'</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358eb826379700-24"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'Referer'</span><span class="crayon-h"> </span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-s">'https://login.taobao.com/member/login.jhtml'</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5645b6f8358eb826379700-25"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'Content-Type'</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-s">'application/x-www-form-urlencoded'</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358eb826379700-26"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'Connection'</span><span class="crayon-h"> </span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-s">'Keep-Alive'</span></div><div class="crayon-line" id="crayon-5645b6f8358eb826379700-27"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358eb826379700-28"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#用户名</span></div><div class="crayon-line" id="crayon-5645b6f8358eb826379700-29"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">username</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">'cqcre'</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358eb826379700-30"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#ua字符串，经过淘宝ua算法计算得出，包含了时间戳,浏览器,屏幕分辨率,随机数,鼠标移动,鼠标点击,其实还有键盘输入记录,鼠标移动的记录、点击的记录等等的信息</span></div><div class="crayon-line" id="crayon-5645b6f8358eb826379700-31"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">ua</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">'191UW5TcyMNYQwiAiwTR3tCf0J/QnhEcUpkMmQ=|Um5Ockt0TXdPc011TXVKdyE=|U2xMHDJ+H2QJZwBxX39Rb1d5WXcrSixAJ1kjDVsN|VGhXd1llXGNaYFhkWmJaYl1gV2pIdUtyTXRKfkN4Qn1FeEF6R31TBQ==|VWldfS0TMw8xDjYWKhAwHiUdOA9wCDEVaxgkATdcNU8iDFoM|VmNDbUMV|V2NDbUMV|WGRYeCgGZhtmH2VScVI2UT5fORtmD2gCawwuRSJHZAFsCWMOdVYyVTpbPR99HWAFYVMpUDUFORshHiQdJR0jAT0JPQc/BDoFPgooFDZtVBR5Fn9VOwt2EWhCOVQ4WSJPJFkHXhgoSDVIMRgnHyFqQ3xEezceIRkmahRqFDZLIkUvRiEDaA9qQ3xEezcZORc5bzk=|WWdHFy0TMw8vEy0UIQE0ADgYJBohGjoAOw4uEiwXLAw2DThuOA==|WmBAED5+KnIbdRh1GXgFQSZbGFdrUm1UblZqVGxQa1ZiTGxQcEp1I3U=|W2NDEz19KXENZwJjHkY7Ui9OJQsre09zSWlXY1oMLBExHzERLxsuE0UT|XGZGFjh4LHQdcx5zH34DRyBdHlFtVGtSaFBsUmpWbVBkSmpXd05zTnMlcw==|XWdHFzl5LXUJYwZnGkI/VitKIQ8vEzMKNws3YTc=|XmdaZ0d6WmVFeUB8XGJaYEB4TGxWbk5yTndXa0tyT29Ta0t1QGBeZDI='</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358eb826379700-32"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#密码，在这里不能输入真实密码，淘宝对此密码进行了加密处理，256位，此处为加密后的密码</span></div><div class="crayon-line" id="crayon-5645b6f8358eb826379700-33"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">password2</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">'7511aa6854629e45de220d29174f1066537a73420ef6dbb5b46f202396703a2d56b0312df8769d886e6ca63d587fdbb99ee73927e8c07d9c88cd02182e1a21edc13fb8e140a4a2a4b53bf38484bd0e08199e03eb9bf7b365a5c673c03407d812b91394f0d3c7564042e3f2b11d156aeea37ad6460118914125ab8f8ac466f'</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358eb826379700-34"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">post</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">post</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5645b6f8358eb826379700-35"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'ua'</span><span class="crayon-o">:</span><span class="crayon-v">self</span><span class="crayon-sy">.</span><span class="crayon-v">ua</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358eb826379700-36"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'TPL_checkcode'</span><span class="crayon-o">:</span><span class="crayon-s">''</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5645b6f8358eb826379700-37"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'CtrlVersion'</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-s">'1,0,0,7'</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358eb826379700-38"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'TPL_password'</span><span class="crayon-o">:</span><span class="crayon-s">''</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5645b6f8358eb826379700-39"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'TPL_redirect_url'</span><span class="crayon-o">:</span><span class="crayon-s">'http://i.taobao.com/my_taobao.htm?nekot=udm8087E1424147022443'</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358eb826379700-40"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'TPL_username'</span><span class="crayon-o">:</span><span class="crayon-v">self</span><span class="crayon-sy">.</span><span class="crayon-v">username</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5645b6f8358eb826379700-41"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'loginsite'</span><span class="crayon-o">:</span><span class="crayon-s">'0'</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358eb826379700-42"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'newlogin'</span><span class="crayon-o">:</span><span class="crayon-s">'0'</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5645b6f8358eb826379700-43"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'from'</span><span class="crayon-o">:</span><span class="crayon-s">'tb'</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358eb826379700-44"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'fc'</span><span class="crayon-o">:</span><span class="crayon-s">'default'</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5645b6f8358eb826379700-45"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'style'</span><span class="crayon-o">:</span><span class="crayon-s">'default'</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358eb826379700-46"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'css_style'</span><span class="crayon-o">:</span><span class="crayon-s">''</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5645b6f8358eb826379700-47"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'tid'</span><span class="crayon-o">:</span><span class="crayon-s">'XOR_1_000000000000000000000000000000_625C4720470A0A050976770A'</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358eb826379700-48"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'support'</span><span class="crayon-o">:</span><span class="crayon-s">'000001'</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5645b6f8358eb826379700-49"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'loginType'</span><span class="crayon-o">:</span><span class="crayon-s">'4'</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358eb826379700-50"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'minititle'</span><span class="crayon-o">:</span><span class="crayon-s">''</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5645b6f8358eb826379700-51"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'minipara'</span><span class="crayon-o">:</span><span class="crayon-s">''</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358eb826379700-52"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'umto'</span><span class="crayon-o">:</span><span class="crayon-s">'NaN'</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5645b6f8358eb826379700-53"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'pstrong'</span><span class="crayon-o">:</span><span class="crayon-s">'3'</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358eb826379700-54"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'llnick'</span><span class="crayon-o">:</span><span class="crayon-s">''</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5645b6f8358eb826379700-55"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'sign'</span><span class="crayon-o">:</span><span class="crayon-s">''</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358eb826379700-56"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'need_sign'</span><span class="crayon-o">:</span><span class="crayon-s">''</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5645b6f8358eb826379700-57"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'isIgnore'</span><span class="crayon-o">:</span><span class="crayon-s">''</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358eb826379700-58"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'full_redirect'</span><span class="crayon-o">:</span><span class="crayon-s">''</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5645b6f8358eb826379700-59"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'popid'</span><span class="crayon-o">:</span><span class="crayon-s">''</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358eb826379700-60"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'callback'</span><span class="crayon-o">:</span><span class="crayon-s">''</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5645b6f8358eb826379700-61"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'guf'</span><span class="crayon-o">:</span><span class="crayon-s">''</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358eb826379700-62"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'not_duplite_str'</span><span class="crayon-o">:</span><span class="crayon-s">''</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5645b6f8358eb826379700-63"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'need_user_id'</span><span class="crayon-o">:</span><span class="crayon-s">''</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358eb826379700-64"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'poy'</span><span class="crayon-o">:</span><span class="crayon-s">''</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5645b6f8358eb826379700-65"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'gvfdcname'</span><span class="crayon-o">:</span><span class="crayon-s">'10'</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358eb826379700-66"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'gvfdcre'</span><span class="crayon-o">:</span><span class="crayon-s">''</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5645b6f8358eb826379700-67"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'from_encoding '</span><span class="crayon-o">:</span><span class="crayon-s">''</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358eb826379700-68"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'sub'</span><span class="crayon-o">:</span><span class="crayon-s">''</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5645b6f8358eb826379700-69"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'TPL_password_2'</span><span class="crayon-o">:</span><span class="crayon-v">self</span><span class="crayon-sy">.</span><span class="crayon-v">password2</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358eb826379700-70"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'loginASR'</span><span class="crayon-o">:</span><span class="crayon-s">'1'</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5645b6f8358eb826379700-71"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'loginASRSuc'</span><span class="crayon-o">:</span><span class="crayon-s">'1'</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358eb826379700-72"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'allp'</span><span class="crayon-o">:</span><span class="crayon-s">''</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5645b6f8358eb826379700-73"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'oslanguage'</span><span class="crayon-o">:</span><span class="crayon-s">'zh-CN'</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358eb826379700-74"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'sr'</span><span class="crayon-o">:</span><span class="crayon-s">'1366*768'</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5645b6f8358eb826379700-75"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'osVer'</span><span class="crayon-o">:</span><span class="crayon-s">'windows|6.1'</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358eb826379700-76"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'naviVer'</span><span class="crayon-o">:</span><span class="crayon-s">'firefox|35'</span></div><div class="crayon-line" id="crayon-5645b6f8358eb826379700-77"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358eb826379700-78"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#将POST的数据进行编码转换</span></div><div class="crayon-line" id="crayon-5645b6f8358eb826379700-79"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">postData</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">urllib</span><span class="crayon-sy">.</span><span class="crayon-e">urlencode</span><span class="crayon-sy">(</span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">post</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358eb826379700-80"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#设置代理</span></div><div class="crayon-line" id="crayon-5645b6f8358eb826379700-81"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">proxy</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">urllib2</span><span class="crayon-sy">.</span><span class="crayon-e">ProxyHandler</span><span class="crayon-sy">(</span><span class="crayon-sy">{</span><span class="crayon-s">'http'</span><span class="crayon-o">:</span><span class="crayon-v">self</span><span class="crayon-sy">.</span><span class="crayon-v">proxyURL</span><span class="crayon-sy">}</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358eb826379700-82"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#设置cookie</span></div><div class="crayon-line" id="crayon-5645b6f8358eb826379700-83"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">cookie</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">cookielib</span><span class="crayon-sy">.</span><span class="crayon-e">LWPCookieJar</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358eb826379700-84"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#设置cookie处理器</span></div><div class="crayon-line" id="crayon-5645b6f8358eb826379700-85"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">cookieHandler</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">urllib2</span><span class="crayon-sy">.</span><span class="crayon-e">HTTPCookieProcessor</span><span class="crayon-sy">(</span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">cookie</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358eb826379700-86"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#设置登录时用到的opener，它的open方法相当于urllib2.urlopen</span></div><div class="crayon-line" id="crayon-5645b6f8358eb826379700-87"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">opener</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">urllib2</span><span class="crayon-sy">.</span><span class="crayon-e">build_opener</span><span class="crayon-sy">(</span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">cookieHandler</span><span class="crayon-sy">,</span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">proxy</span><span class="crayon-sy">,</span><span class="crayon-v">urllib2</span><span class="crayon-sy">.</span><span class="crayon-v">HTTPHandler</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358eb826379700-88"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#赋值J_HToken</span></div><div class="crayon-line" id="crayon-5645b6f8358eb826379700-89"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">J_HToken</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">''</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358eb826379700-90"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#登录成功时，需要的Cookie</span></div><div class="crayon-line" id="crayon-5645b6f8358eb826379700-91"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">newCookie</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">cookielib</span><span class="crayon-sy">.</span><span class="crayon-e">CookieJar</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358eb826379700-92"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#登陆成功时，需要的一个新的opener</span></div><div class="crayon-line" id="crayon-5645b6f8358eb826379700-93"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">newOpener</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">urllib2</span><span class="crayon-sy">.</span><span class="crayon-e">build_opener</span><span class="crayon-sy">(</span><span class="crayon-v">urllib2</span><span class="crayon-sy">.</span><span class="crayon-e">HTTPCookieProcessor</span><span class="crayon-sy">(</span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">newCookie</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358eb826379700-94"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#引入工具类</span></div><div class="crayon-line" id="crayon-5645b6f8358eb826379700-95"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">tool</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">tool</span><span class="crayon-sy">.</span><span class="crayon-e">Tool</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358eb826379700-96">&nbsp;</div><div class="crayon-line" id="crayon-5645b6f8358eb826379700-97">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358eb826379700-98"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#得到是否需要输入验证码，这次请求的相应有时会不同，有时需要验证有时不需要</span></div><div class="crayon-line" id="crayon-5645b6f8358eb826379700-99"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">def </span><span class="crayon-e">needCheckCode</span><span class="crayon-sy">(</span><span class="crayon-r">self</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358eb826379700-100"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#第一次登录获取验证码尝试，构建request</span></div><div class="crayon-line" id="crayon-5645b6f8358eb826379700-101"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">request</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">urllib2</span><span class="crayon-sy">.</span><span class="crayon-e">Request</span><span class="crayon-sy">(</span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">loginURL</span><span class="crayon-sy">,</span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">postData</span><span class="crayon-sy">,</span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">loginHeaders</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358eb826379700-102"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#得到第一次登录尝试的相应</span></div><div class="crayon-line" id="crayon-5645b6f8358eb826379700-103"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">response</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">opener</span><span class="crayon-sy">.</span><span class="crayon-e">open</span><span class="crayon-sy">(</span><span class="crayon-v">request</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358eb826379700-104"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#获取其中的内容</span></div><div class="crayon-line" id="crayon-5645b6f8358eb826379700-105"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">content</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">response</span><span class="crayon-sy">.</span><span class="crayon-e">read</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">.</span><span class="crayon-e">decode</span><span class="crayon-sy">(</span><span class="crayon-s">'gbk'</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358eb826379700-106"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#获取状态吗</span></div><div class="crayon-line" id="crayon-5645b6f8358eb826379700-107"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">status</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">response</span><span class="crayon-sy">.</span><span class="crayon-e">getcode</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358eb826379700-108"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#状态码为200，获取成功</span></div><div class="crayon-line" id="crayon-5645b6f8358eb826379700-109"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-v">status</span><span class="crayon-h"> </span><span class="crayon-o">==</span><span class="crayon-h"> </span><span class="crayon-cn">200</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358eb826379700-110"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-i">print</span><span class="crayon-h"> </span><span class="crayon-i">u</span><span class="crayon-s">"获取请求成功"</span></div><div class="crayon-line" id="crayon-5645b6f8358eb826379700-111"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#\u8bf7\u8f93\u5165\u9a8c\u8bc1\u7801这六个字是请输入验证码的utf-8编码</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358eb826379700-112"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">pattern</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">re</span><span class="crayon-sy">.</span><span class="crayon-e">compile</span><span class="crayon-sy">(</span><span class="crayon-i">u</span><span class="crayon-s">'\u8bf7\u8f93\u5165\u9a8c\u8bc1\u7801'</span><span class="crayon-sy">,</span><span class="crayon-v">re</span><span class="crayon-sy">.</span><span class="crayon-v">S</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5645b6f8358eb826379700-113"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">result</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">re</span><span class="crayon-sy">.</span><span class="crayon-e">search</span><span class="crayon-sy">(</span><span class="crayon-v">pattern</span><span class="crayon-sy">,</span><span class="crayon-v">content</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358eb826379700-114"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#如果找到该字符，代表需要输入验证码</span></div><div class="crayon-line" id="crayon-5645b6f8358eb826379700-115"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-v">result</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358eb826379700-116"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-i">print</span><span class="crayon-h"> </span><span class="crayon-i">u</span><span class="crayon-s">"此次安全验证异常，您需要输入验证码"</span></div><div class="crayon-line" id="crayon-5645b6f8358eb826379700-117"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-v">content</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358eb826379700-118"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#否则不需要</span></div><div class="crayon-line" id="crayon-5645b6f8358eb826379700-119"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">else</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358eb826379700-120"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#返回结果直接带有J_HToken字样，表明直接验证通过</span></div><div class="crayon-line" id="crayon-5645b6f8358eb826379700-121"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">tokenPattern</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">re</span><span class="crayon-sy">.</span><span class="crayon-e">compile</span><span class="crayon-sy">(</span><span class="crayon-s">'id="J_HToken" value="(.*?)"'</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358eb826379700-122"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">tokenMatch</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">re</span><span class="crayon-sy">.</span><span class="crayon-e">search</span><span class="crayon-sy">(</span><span class="crayon-v">tokenPattern</span><span class="crayon-sy">,</span><span class="crayon-v">content</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5645b6f8358eb826379700-123"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-v">tokenMatch</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358eb826379700-124"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">J_HToken</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">tokenMatch</span><span class="crayon-sy">.</span><span class="crayon-e">group</span><span class="crayon-sy">(</span><span class="crayon-cn">1</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5645b6f8358eb826379700-125"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-i">print</span><span class="crayon-h"> </span><span class="crayon-i">u</span><span class="crayon-s">"此次安全验证通过，您这次不需要输入验证码"</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358eb826379700-126"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-t">False</span></div><div class="crayon-line" id="crayon-5645b6f8358eb826379700-127"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">else</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358eb826379700-128"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-i">print</span><span class="crayon-h"> </span><span class="crayon-i">u</span><span class="crayon-s">"获取请求失败"</span></div><div class="crayon-line" id="crayon-5645b6f8358eb826379700-129"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-v">None</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358eb826379700-130">&nbsp;</div><div class="crayon-line" id="crayon-5645b6f8358eb826379700-131"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#得到验证码图片</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358eb826379700-132"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">def </span><span class="crayon-e">getCheckCode</span><span class="crayon-sy">(</span><span class="crayon-r">self</span><span class="crayon-sy">,</span><span class="crayon-v">page</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5645b6f8358eb826379700-133"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#得到验证码的图片</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358eb826379700-134"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">pattern</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">re</span><span class="crayon-sy">.</span><span class="crayon-e">compile</span><span class="crayon-sy">(</span><span class="crayon-s">'&lt;img id="J_StandardCode_m.*?data-src="(.*?)"'</span><span class="crayon-sy">,</span><span class="crayon-v">re</span><span class="crayon-sy">.</span><span class="crayon-v">S</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5645b6f8358eb826379700-135"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#匹配的结果</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358eb826379700-136"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">matchResult</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">re</span><span class="crayon-sy">.</span><span class="crayon-e">search</span><span class="crayon-sy">(</span><span class="crayon-v">pattern</span><span class="crayon-sy">,</span><span class="crayon-v">page</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5645b6f8358eb826379700-137"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#已经匹配得到内容，并且验证码图片链接不为空</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358eb826379700-138"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-e">matchResult </span><span class="crayon-st">and</span><span class="crayon-h"> </span><span class="crayon-v">matchResult</span><span class="crayon-sy">.</span><span class="crayon-e">group</span><span class="crayon-sy">(</span><span class="crayon-cn">1</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5645b6f8358eb826379700-139"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-v">matchResult</span><span class="crayon-sy">.</span><span class="crayon-e">group</span><span class="crayon-sy">(</span><span class="crayon-cn">1</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358eb826379700-140"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">else</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5645b6f8358eb826379700-141"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-i">print</span><span class="crayon-h"> </span><span class="crayon-i">u</span><span class="crayon-s">"没有找到验证码内容"</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358eb826379700-142"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-t">False</span></div><div class="crayon-line" id="crayon-5645b6f8358eb826379700-143">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358eb826379700-144">&nbsp;</div><div class="crayon-line" id="crayon-5645b6f8358eb826379700-145"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#输入验证码，重新请求，如果验证成功，则返回J_HToken</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358eb826379700-146"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">def </span><span class="crayon-e">loginWithCheckCode</span><span class="crayon-sy">(</span><span class="crayon-r">self</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5645b6f8358eb826379700-147"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#提示用户输入验证码</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358eb826379700-148"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">checkcode</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">raw_input</span><span class="crayon-sy">(</span><span class="crayon-s">'请输入验证码:'</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5645b6f8358eb826379700-149"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#将验证码重新添加到post的数据中</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358eb826379700-150"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">post</span><span class="crayon-sy">[</span><span class="crayon-s">'TPL_checkcode'</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">checkcode</span></div><div class="crayon-line" id="crayon-5645b6f8358eb826379700-151"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#对post数据重新进行编码</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358eb826379700-152"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">postData</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">urllib</span><span class="crayon-sy">.</span><span class="crayon-e">urlencode</span><span class="crayon-sy">(</span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">post</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5645b6f8358eb826379700-153"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">try</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358eb826379700-154"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#再次构建请求，加入验证码之后的第二次登录尝试</span></div><div class="crayon-line" id="crayon-5645b6f8358eb826379700-155"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">request</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">urllib2</span><span class="crayon-sy">.</span><span class="crayon-e">Request</span><span class="crayon-sy">(</span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">loginURL</span><span class="crayon-sy">,</span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">postData</span><span class="crayon-sy">,</span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">loginHeaders</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358eb826379700-156"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#得到第一次登录尝试的相应</span></div><div class="crayon-line" id="crayon-5645b6f8358eb826379700-157"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">response</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">opener</span><span class="crayon-sy">.</span><span class="crayon-e">open</span><span class="crayon-sy">(</span><span class="crayon-v">request</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358eb826379700-158"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#获取其中的内容</span></div><div class="crayon-line" id="crayon-5645b6f8358eb826379700-159"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">content</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">response</span><span class="crayon-sy">.</span><span class="crayon-e">read</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">.</span><span class="crayon-e">decode</span><span class="crayon-sy">(</span><span class="crayon-s">'gbk'</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358eb826379700-160"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#检测验证码错误的正则表达式，\u9a8c\u8bc1\u7801\u9519\u8bef 是验证码错误五个字的编码</span></div><div class="crayon-line" id="crayon-5645b6f8358eb826379700-161"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">pattern</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">re</span><span class="crayon-sy">.</span><span class="crayon-e">compile</span><span class="crayon-sy">(</span><span class="crayon-i">u</span><span class="crayon-s">'\u9a8c\u8bc1\u7801\u9519\u8bef'</span><span class="crayon-sy">,</span><span class="crayon-v">re</span><span class="crayon-sy">.</span><span class="crayon-v">S</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358eb826379700-162"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">result</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">re</span><span class="crayon-sy">.</span><span class="crayon-e">search</span><span class="crayon-sy">(</span><span class="crayon-v">pattern</span><span class="crayon-sy">,</span><span class="crayon-v">content</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5645b6f8358eb826379700-163"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#如果返回页面包括了，验证码错误五个字</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358eb826379700-164"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-v">result</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5645b6f8358eb826379700-165"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-i">print</span><span class="crayon-h"> </span><span class="crayon-i">u</span><span class="crayon-s">"验证码输入错误"</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358eb826379700-166"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-t">False</span></div><div class="crayon-line" id="crayon-5645b6f8358eb826379700-167"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">else</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358eb826379700-168"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#返回结果直接带有J_HToken字样，说明验证码输入成功，成功跳转到了获取HToken的界面</span></div><div class="crayon-line" id="crayon-5645b6f8358eb826379700-169"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">tokenPattern</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">re</span><span class="crayon-sy">.</span><span class="crayon-e">compile</span><span class="crayon-sy">(</span><span class="crayon-s">'id="J_HToken" value="(.*?)"'</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358eb826379700-170"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">tokenMatch</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">re</span><span class="crayon-sy">.</span><span class="crayon-e">search</span><span class="crayon-sy">(</span><span class="crayon-v">tokenPattern</span><span class="crayon-sy">,</span><span class="crayon-v">content</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5645b6f8358eb826379700-171"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#如果匹配成功，找到了J_HToken</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358eb826379700-172"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-v">tokenMatch</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5645b6f8358eb826379700-173"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-i">print</span><span class="crayon-h"> </span><span class="crayon-i">u</span><span class="crayon-s">"验证码输入正确"</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358eb826379700-174"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">J_HToken</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">tokenMatch</span><span class="crayon-sy">.</span><span class="crayon-e">group</span><span class="crayon-sy">(</span><span class="crayon-cn">1</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5645b6f8358eb826379700-175"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-v">tokenMatch</span><span class="crayon-sy">.</span><span class="crayon-e">group</span><span class="crayon-sy">(</span><span class="crayon-cn">1</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358eb826379700-176"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">else</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5645b6f8358eb826379700-177"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#匹配失败，J_Token获取失败</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358eb826379700-178"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-i">print</span><span class="crayon-h"> </span><span class="crayon-i">u</span><span class="crayon-s">"J_Token获取失败"</span></div><div class="crayon-line" id="crayon-5645b6f8358eb826379700-179"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-t">False</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358eb826379700-180"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">except </span><span class="crayon-v">urllib2</span><span class="crayon-sy">.</span><span class="crayon-v">HTTPError</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">e</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5645b6f8358eb826379700-181"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-i">print</span><span class="crayon-h"> </span><span class="crayon-i">u</span><span class="crayon-s">"连接服务器出错，错误原因"</span><span class="crayon-sy">,</span><span class="crayon-v">e</span><span class="crayon-sy">.</span><span class="crayon-e">reason</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358eb826379700-182"><span class="crayon-e">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-t">False</span></div><div class="crayon-line" id="crayon-5645b6f8358eb826379700-183">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358eb826379700-184">&nbsp;</div><div class="crayon-line" id="crayon-5645b6f8358eb826379700-185"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#通过token获得st</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358eb826379700-186"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">def </span><span class="crayon-e">getSTbyToken</span><span class="crayon-sy">(</span><span class="crayon-r">self</span><span class="crayon-sy">,</span><span class="crayon-v">token</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5645b6f8358eb826379700-187"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">tokenURL</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">'https://passport.alipay.com/mini_apply_st.js?site=0&amp;token=%s&amp;callback=stCallback6'</span><span class="crayon-h"> </span><span class="crayon-o">%</span><span class="crayon-h"> </span><span class="crayon-e">token</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358eb826379700-188"><span class="crayon-e">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">request</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">urllib2</span><span class="crayon-sy">.</span><span class="crayon-e">Request</span><span class="crayon-sy">(</span><span class="crayon-v">tokenURL</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5645b6f8358eb826379700-189"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">response</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">urllib2</span><span class="crayon-sy">.</span><span class="crayon-e">urlopen</span><span class="crayon-sy">(</span><span class="crayon-v">request</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358eb826379700-190"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#处理st，获得用户淘宝主页的登录地址</span></div><div class="crayon-line" id="crayon-5645b6f8358eb826379700-191"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">pattern</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">re</span><span class="crayon-sy">.</span><span class="crayon-e">compile</span><span class="crayon-sy">(</span><span class="crayon-s">'{"st":"(.*?)"}'</span><span class="crayon-sy">,</span><span class="crayon-v">re</span><span class="crayon-sy">.</span><span class="crayon-v">S</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358eb826379700-192"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">result</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">re</span><span class="crayon-sy">.</span><span class="crayon-e">search</span><span class="crayon-sy">(</span><span class="crayon-v">pattern</span><span class="crayon-sy">,</span><span class="crayon-v">response</span><span class="crayon-sy">.</span><span class="crayon-e">read</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5645b6f8358eb826379700-193"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#如果成功匹配</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358eb826379700-194"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-v">result</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5645b6f8358eb826379700-195"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-i">print</span><span class="crayon-h"> </span><span class="crayon-i">u</span><span class="crayon-s">"成功获取st码"</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358eb826379700-196"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#获取st的值</span></div><div class="crayon-line" id="crayon-5645b6f8358eb826379700-197"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">st</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">result</span><span class="crayon-sy">.</span><span class="crayon-e">group</span><span class="crayon-sy">(</span><span class="crayon-cn">1</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358eb826379700-198"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-e">st</span></div><div class="crayon-line" id="crayon-5645b6f8358eb826379700-199"><span class="crayon-e">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">else</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358eb826379700-200"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-i">print</span><span class="crayon-h"> </span><span class="crayon-i">u</span><span class="crayon-s">"未匹配到st"</span></div><div class="crayon-line" id="crayon-5645b6f8358eb826379700-201"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-t">False</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358eb826379700-202">&nbsp;</div><div class="crayon-line" id="crayon-5645b6f8358eb826379700-203"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#利用st码进行登录,获取重定向网址</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358eb826379700-204"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">def </span><span class="crayon-e">loginByST</span><span class="crayon-sy">(</span><span class="crayon-r">self</span><span class="crayon-sy">,</span><span class="crayon-v">st</span><span class="crayon-sy">,</span><span class="crayon-v">username</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5645b6f8358eb826379700-205"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">stURL</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">'https://login.taobao.com/member/vst.htm?st=%s&amp;TPL_username=%s'</span><span class="crayon-h"> </span><span class="crayon-o">%</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">st</span><span class="crayon-sy">,</span><span class="crayon-v">username</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358eb826379700-206"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">headers</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5645b6f8358eb826379700-207"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'User-Agent'</span><span class="crayon-h"> </span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-s">'Mozilla/5.0 (Windows NT 6.1; WOW64; rv:35.0) Gecko/20100101 Firefox/35.0'</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358eb826379700-208"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'Host'</span><span class="crayon-o">:</span><span class="crayon-s">'login.taobao.com'</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5645b6f8358eb826379700-209"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'Connection'</span><span class="crayon-h"> </span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-s">'Keep-Alive'</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358eb826379700-210"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-5645b6f8358eb826379700-211"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">request</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">urllib2</span><span class="crayon-sy">.</span><span class="crayon-e">Request</span><span class="crayon-sy">(</span><span class="crayon-v">stURL</span><span class="crayon-sy">,</span><span class="crayon-v">headers</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">headers</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358eb826379700-212"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">response</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">newOpener</span><span class="crayon-sy">.</span><span class="crayon-e">open</span><span class="crayon-sy">(</span><span class="crayon-v">request</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5645b6f8358eb826379700-213"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">content</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-v">response</span><span class="crayon-sy">.</span><span class="crayon-e">read</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">.</span><span class="crayon-e">decode</span><span class="crayon-sy">(</span><span class="crayon-s">'gbk'</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358eb826379700-214"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#检测结果，看是否登录成功</span></div><div class="crayon-line" id="crayon-5645b6f8358eb826379700-215"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">pattern</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">re</span><span class="crayon-sy">.</span><span class="crayon-e">compile</span><span class="crayon-sy">(</span><span class="crayon-s">'top.location = "(.*?)"'</span><span class="crayon-sy">,</span><span class="crayon-v">re</span><span class="crayon-sy">.</span><span class="crayon-v">S</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358eb826379700-216"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">match</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">re</span><span class="crayon-sy">.</span><span class="crayon-e">search</span><span class="crayon-sy">(</span><span class="crayon-v">pattern</span><span class="crayon-sy">,</span><span class="crayon-v">content</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5645b6f8358eb826379700-217"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-v">match</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358eb826379700-218"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-i">print</span><span class="crayon-h"> </span><span class="crayon-i">u</span><span class="crayon-s">"登录网址成功"</span></div><div class="crayon-line" id="crayon-5645b6f8358eb826379700-219"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">location</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">match</span><span class="crayon-sy">.</span><span class="crayon-e">group</span><span class="crayon-sy">(</span><span class="crayon-cn">1</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358eb826379700-220"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-t">True</span></div><div class="crayon-line" id="crayon-5645b6f8358eb826379700-221"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">else</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358eb826379700-222"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-i">print</span><span class="crayon-h"> </span><span class="crayon-s">"登录失败"</span></div><div class="crayon-line" id="crayon-5645b6f8358eb826379700-223"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-t">False</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358eb826379700-224">&nbsp;</div><div class="crayon-line" id="crayon-5645b6f8358eb826379700-225">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358eb826379700-226"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#获得已买到的宝贝页面</span></div><div class="crayon-line" id="crayon-5645b6f8358eb826379700-227"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">def </span><span class="crayon-e">getGoodsPage</span><span class="crayon-sy">(</span><span class="crayon-r">self</span><span class="crayon-sy">,</span><span class="crayon-v">pageIndex</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358eb826379700-228"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">goodsURL</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">'http://buyer.trade.taobao.com/trade/itemlist/listBoughtItems.htm?action=itemlist/QueryAction&amp;event_submit_do_query=1'</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-s">'&amp;pageNum='</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-e">str</span><span class="crayon-sy">(</span><span class="crayon-v">pageIndex</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5645b6f8358eb826379700-229"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">response</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">newOpener</span><span class="crayon-sy">.</span><span class="crayon-e">open</span><span class="crayon-sy">(</span><span class="crayon-v">goodsURL</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358eb826379700-230"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">page</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-v">response</span><span class="crayon-sy">.</span><span class="crayon-e">read</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">.</span><span class="crayon-e">decode</span><span class="crayon-sy">(</span><span class="crayon-s">'gbk'</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5645b6f8358eb826379700-231"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-v">page</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358eb826379700-232">&nbsp;</div><div class="crayon-line" id="crayon-5645b6f8358eb826379700-233"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#获取所有已买到的宝贝信息</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358eb826379700-234"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">def </span><span class="crayon-e">getAllGoods</span><span class="crayon-sy">(</span><span class="crayon-r">self</span><span class="crayon-sy">,</span><span class="crayon-v">pageNum</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5645b6f8358eb826379700-235"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-i">print</span><span class="crayon-h"> </span><span class="crayon-i">u</span><span class="crayon-s">"获取到的商品列表如下"</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358eb826379700-236"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-i">x</span><span class="crayon-h"> </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-e">range</span><span class="crayon-sy">(</span><span class="crayon-cn">1</span><span class="crayon-sy">,</span><span class="crayon-t">int</span><span class="crayon-sy">(</span><span class="crayon-v">pageNum</span><span class="crayon-sy">)</span><span class="crayon-o">+</span><span class="crayon-cn">1</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5645b6f8358eb826379700-237"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">page</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-e">getGoodsPage</span><span class="crayon-sy">(</span><span class="crayon-v">x</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358eb826379700-238"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">tool</span><span class="crayon-sy">.</span><span class="crayon-e">getGoodsInfo</span><span class="crayon-sy">(</span><span class="crayon-v">page</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5645b6f8358eb826379700-239">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358eb826379700-240">&nbsp;</div><div class="crayon-line" id="crayon-5645b6f8358eb826379700-241">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358eb826379700-242"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#程序运行主干</span></div><div class="crayon-line" id="crayon-5645b6f8358eb826379700-243"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">def </span><span class="crayon-e">main</span><span class="crayon-sy">(</span><span class="crayon-r">self</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358eb826379700-244"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#是否需要验证码，是则得到页面内容，不是则返回False</span></div><div class="crayon-line" id="crayon-5645b6f8358eb826379700-245"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">needResult</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-e">needCheckCode</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358eb826379700-246"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#请求获取失败，得到的结果是None</span></div><div class="crayon-line" id="crayon-5645b6f8358eb826379700-247"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-st">not</span><span class="crayon-h"> </span><span class="crayon-v">needResult</span><span class="crayon-h"> </span><span class="crayon-o">==</span><span class="crayon-v">None</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358eb826379700-248"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-st">not</span><span class="crayon-h"> </span><span class="crayon-v">needResult</span><span class="crayon-h"> </span><span class="crayon-o">==</span><span class="crayon-h"> </span><span class="crayon-t">False</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5645b6f8358eb826379700-249"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-i">print</span><span class="crayon-h"> </span><span class="crayon-i">u</span><span class="crayon-s">"您需要手动输入验证码"</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358eb826379700-250"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">checkCode</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-e">getCheckCode</span><span class="crayon-sy">(</span><span class="crayon-v">needResult</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5645b6f8358eb826379700-251"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#得到了验证码的链接</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358eb826379700-252"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-st">not</span><span class="crayon-h"> </span><span class="crayon-v">checkCode</span><span class="crayon-h"> </span><span class="crayon-o">==</span><span class="crayon-h"> </span><span class="crayon-t">False</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5645b6f8358eb826379700-253"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-i">print</span><span class="crayon-h"> </span><span class="crayon-i">u</span><span class="crayon-s">"验证码获取成功"</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358eb826379700-254"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-i">print</span><span class="crayon-h"> </span><span class="crayon-i">u</span><span class="crayon-s">"请在浏览器中输入您看到的验证码"</span></div><div class="crayon-line" id="crayon-5645b6f8358eb826379700-255"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">webbrowser</span><span class="crayon-sy">.</span><span class="crayon-e">open_new_tab</span><span class="crayon-sy">(</span><span class="crayon-v">checkCode</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358eb826379700-256"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-e">loginWithCheckCode</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5645b6f8358eb826379700-257"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#验证码链接为空，无效验证码</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358eb826379700-258"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">else</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5645b6f8358eb826379700-259"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-i">print</span><span class="crayon-h"> </span><span class="crayon-i">u</span><span class="crayon-s">"验证码获取失败，请重试"</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358eb826379700-260"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">else</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5645b6f8358eb826379700-261"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-i">print</span><span class="crayon-h"> </span><span class="crayon-i">u</span><span class="crayon-s">"不需要输入验证码"</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358eb826379700-262"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">else</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5645b6f8358eb826379700-263"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-i">print</span><span class="crayon-h"> </span><span class="crayon-i">u</span><span class="crayon-s">"请求登录页面失败，无法确认是否需要验证码"</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358eb826379700-264">&nbsp;</div><div class="crayon-line" id="crayon-5645b6f8358eb826379700-265">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358eb826379700-266"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#判断token是否正常获取到</span></div><div class="crayon-line" id="crayon-5645b6f8358eb826379700-267"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-st">not</span><span class="crayon-h"> </span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">J_HToken</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358eb826379700-268"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-i">print</span><span class="crayon-h"> </span><span class="crayon-s">"获取Token失败，请重试"</span></div><div class="crayon-line" id="crayon-5645b6f8358eb826379700-269"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">return</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358eb826379700-270"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#获取st码</span></div><div class="crayon-line" id="crayon-5645b6f8358eb826379700-271"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">st</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-e">getSTbyToken</span><span class="crayon-sy">(</span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">J_HToken</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358eb826379700-272"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#利用st进行登录</span></div><div class="crayon-line" id="crayon-5645b6f8358eb826379700-273"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">result</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-e">loginByST</span><span class="crayon-sy">(</span><span class="crayon-v">st</span><span class="crayon-sy">,</span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">username</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358eb826379700-274"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-v">result</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5645b6f8358eb826379700-275"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#获得所有宝贝的页面</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358eb826379700-276"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">page</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-e">getGoodsPage</span><span class="crayon-sy">(</span><span class="crayon-cn">1</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5645b6f8358eb826379700-277"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">pageNum</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">tool</span><span class="crayon-sy">.</span><span class="crayon-e">getPageNum</span><span class="crayon-sy">(</span><span class="crayon-v">page</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358eb826379700-278"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-e">getAllGoods</span><span class="crayon-sy">(</span><span class="crayon-v">pageNum</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5645b6f8358eb826379700-279"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">else</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358eb826379700-280"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-i">print</span><span class="crayon-h"> </span><span class="crayon-i">u</span><span class="crayon-s">"登录失败"</span></div><div class="crayon-line" id="crayon-5645b6f8358eb826379700-281">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358eb826379700-282">&nbsp;</div><div class="crayon-line" id="crayon-5645b6f8358eb826379700-283">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5645b6f8358eb826379700-284"><span class="crayon-v">taobao</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">Taobao</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5645b6f8358eb826379700-285"><span class="crayon-v">taobao</span><span class="crayon-sy">.</span><span class="crayon-e">main</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0404 seconds] -->
<p>好啦，运行结果就是上面贴的图片，可以成功获取到自己的商品列表，前提是把你们的 用户名，ua，password2这三个设置好。</p>
<p>以上均为博主亲身所敲，代码写的不好，谨在此贴出和大家一起分享经验~</p>
<p>小伙伴们试一下吧，希望对大家有帮助~</p>
<p>转载请注明：<a href="http://blog.cuiqingcai.com">静觅</a> &raquo; <a href="http://blog.cuiqingcai.com/1076.html">Python爬虫实战五之模拟登录淘宝并获取所有订单</a></p>

      
<div class="article-social">
			<a href="javascript:;" data-action="ding" data-id="1076" id="Addlike" class="action"><i class="fa fa-heart-o"></i>喜欢 (<span class="count">129</span>)</a><span class="or">or</span><span class="action action-share bdsharebuttonbox"><i class="fa fa-share-alt"></i>分享 (<span class="bds_count" data-cmd="count" title="累计分享0次">0</span>)<div class="action-popover"><div class="popover top in"><div class="arrow"></div><div class="popover-content"><a href="#" class="sinaweibo fa fa-weibo" data-cmd="tsina" title="分享到新浪微博"></a><a href="#" class="bds_qzone fa fa-star" data-cmd="qzone" title="分享到QQ空间"></a><a href="#" class="tencentweibo fa fa-tencent-weibo" data-cmd="tqq" title="分享到腾讯微博"></a><a href="#" class="qq fa fa-qq" data-cmd="sqq" title="分享到QQ好友"></a><a href="#" class="bds_renren fa fa-renren" data-cmd="renren" title="分享到人人网"></a><a href="#" class="bds_weixin fa fa-weixin" data-cmd="weixin" title="分享到微信"></a><a href="#" class="bds_more fa fa-ellipsis-h" data-cmd="more"></a></div></div></div></span>	
</div>
	</article>	
				<div style="background:#fff;padding-bottom:20px;font-size:14px;">
			<p style="text-align: center;margin-bottom:20px;padding:0px 20px">您的支持是博主写作最大的动力，如果您喜欢我的文章，感觉我的文章对您有帮助，请狠狠点击下面的</p>
			<p style="text-align: center;"><a href="http://cuiqingcai.com/donate"> <input style="width: 310px; margin: 10px auto 0px; background-color: #f58a87; color: #ffffff; height: 40px; border: none; font-family: 'Microsoft Yahei'; font-size: 16px; letter-spacing: 2px;" type="button" value="我要小额赞助" /></a>
		</div>
		<footer class="article-footer">
			<div class="article-tags"><i class="fa fa-tags"></i><a href="http://blog.cuiqingcai.com/tag/python" rel="tag">Python</a><a href="http://blog.cuiqingcai.com/tag/%e7%88%ac%e8%99%ab" rel="tag">爬虫</a></div>		</footer>
	<nav class="article-nav">
			<span class="article-nav-prev"><i class="fa fa-angle-double-left"></i> <a href="http://blog.cuiqingcai.com/1070.html" rel="prev">WordPress解决修改style.css不生效问题三步走！</a></span>
			<span class="article-nav-next"><a href="http://blog.cuiqingcai.com/1186.html" rel="next">PHP高级特性一之正则表达式用法</a>  <i class="fa fa-angle-double-right"></i></span>
		</nav>

		<div class="related_top">
			<div class="related_posts"><ul class="related_img">

		<li class="related_box"  >
		<a href="http://blog.cuiqingcai.com/2083.html" title="自己动手实现山东大学QLSC_STU无线网络掉线后自动重连" target="_blank">
<img src="http://blog.cuiqingcai.com/wp-content/themes/Yusi/timthumb.php?src=http://qiniu.cuiqingcai.com/wp-content/uploads/2015/09/wallpaper_5265780.jpg&h=110&w=185&q=90&zc=1&ct=1" alt="自己动手实现山东大学QLSC_STU无线网络掉线后自动重连" />	<br><span class="r_title">自己动手实现山东大学QLSC_STU无线网络掉线后自动重连</span></a>
		</li>
	
		<li class="related_box"  >
		<a href="http://blog.cuiqingcai.com/1972.html" title="Python爬虫实战六之抓取爱问知识人问题并保存至数据库" target="_blank">
<img src="http://blog.cuiqingcai.com/wp-content/themes/Yusi/timthumb.php?src=http://qiniu.cuiqingcai.com/wp-content/uploads/2015/09/wallpaper_5265771.jpg&h=110&w=185&q=90&zc=1&ct=1" alt="Python爬虫实战六之抓取爱问知识人问题并保存至数据库" />	<br><span class="r_title">Python爬虫实战六之抓取爱问知识人问题并保存至数据库</span></a>
		</li>
	
		<li class="related_box"  >
		<a href="http://blog.cuiqingcai.com/1707.html" title="Python中ValueError: invalid literal for int() with base 10 的实用解决办法" target="_blank">
<img src="http://blog.cuiqingcai.com/wp-content/themes/Yusi/timthumb.php?src=http://qiniu.cuiqingcai.com/wp-content/uploads/2015/04/wallpaper_5263464.jpg&h=110&w=185&q=90&zc=1&ct=1" alt="Python中ValueError: invalid literal for int() with base 10 的实用解决办法" />	<br><span class="r_title">Python中ValueError: invalid literal for int() with base 10 的实用解决办法</span></a>
		</li>
	
		<li class="related_box"  >
		<a href="http://blog.cuiqingcai.com/1319.html" title="Python爬虫入门八之Beautiful Soup的用法" target="_blank">
<img src="http://blog.cuiqingcai.com/wp-content/themes/Yusi/timthumb.php?src=http://qiniu.cuiqingcai.com/wp-content/uploads/2015/03/wallpaper_52546561.jpg&h=110&w=185&q=90&zc=1&ct=1" alt="Python爬虫入门八之Beautiful Soup的用法" />	<br><span class="r_title">Python爬虫入门八之Beautiful Soup的用法</span></a>
		</li>
	</ul>

<div class="relates">
<ul>
<li><i class="fa fa-minus"></i><a href="http://blog.cuiqingcai.com/2083.html">自己动手实现山东大学QLSC_STU无线网络掉线后自动重连</a></li><li><i class="fa fa-minus"></i><a href="http://blog.cuiqingcai.com/1972.html">Python爬虫实战六之抓取爱问知识人问题并保存至数据库</a></li><li><i class="fa fa-minus"></i><a href="http://blog.cuiqingcai.com/1707.html">Python中ValueError: invalid literal for int() with base 10 的实用解决办法</a></li><li><i class="fa fa-minus"></i><a href="http://blog.cuiqingcai.com/1319.html">Python爬虫入门八之Beautiful Soup的用法</a></li><li><i class="fa fa-minus"></i><a href="http://blog.cuiqingcai.com/1052.html">Python爬虫学习系列教程</a></li><li><i class="fa fa-minus"></i><a href="http://blog.cuiqingcai.com/1001.html">Python爬虫实战四之抓取淘宝MM照片</a></li><li><i class="fa fa-minus"></i><a href="http://blog.cuiqingcai.com/997.html">Python爬虫实战三之计算大学本学期绩点</a></li><li><i class="fa fa-minus"></i><a href="http://blog.cuiqingcai.com/993.html">Python爬虫实战二之爬取百度贴吧帖子</a></li>
</ul></div></div>		</div>
						<a name="comments"></a>

<div class="ds-thread" data-thread-key="1076" data-author-key="1" data-title="Python爬虫实战五之模拟登录淘宝并获取所有订单" data-url="http://blog.cuiqingcai.com/1076.html"></div>

<script type="text/javascript">
	if (typeof DUOSHUO !== 'undefined')
		DUOSHUO.EmbedThread('.ds-thread');
</script>
	<div id="ds-ssr">

				<nav id="comment-nav-above">
			<h1 class="assistive-text">Comment navigation</h1>
			<div class="nav-previous"><a href="http://blog.cuiqingcai.com/1076.html/comment-page-2#comments" >&larr; Older Comments</a></div>
			<div class="nav-next"></div>
		</nav>
		
            <ol id="commentlist">
                		<li class="comment even thread-even depth-1" id="li-comment-985">
			<article id="comment-985" class="comment">
				<footer class="comment-meta">
					<cite class="comment-author vcard">
						<span class="fn">TAJ</span> on <a rel="nofollow" href="http://blog.cuiqingcai.com/1076.html/comment-page-3#comment-985"><time pubdate datetime="2015-11-04T01:12:51+00:00">2015年11月4日 at 上午1:12</time></a> <span class="says">said:</span>					</cite><!-- .comment-author .vcard -->
				</footer>
	
				<div class="comment-content"><p>请问博主 该链接https://login.taobao.com/member/vst.htm是哪里抓到的。。。</p>
</div>
				
			</article><!-- #comment-## -->
		</li><!-- #comment-## -->
		<li class="duoshuo odd alt thread-odd thread-alt depth-1" id="li-comment-938">
			<article id="comment-938" class="comment">
				<footer class="comment-meta">
					<cite class="comment-author vcard">
						<span class="fn">yumaoyimaipiao</span> on <a rel="nofollow" href="http://blog.cuiqingcai.com/1076.html/comment-page-3#comment-938"><time pubdate datetime="2015-10-25T22:20:19+00:00">2015年10月25日 at 下午10:20</time></a> <span class="says">said:</span>					</cite><!-- .comment-author .vcard -->
				</footer>
	
				<div class="comment-content"><p>我也是最后的商品列表出不来，前面都没有问题一直到下面这块</p>
<p>登录网址成功<br />
获取到的商品列表如下<br />
Traceback (most recent call last):<br />
File &#8220;taobaoLogin.py&#8221;,line 276,in (module)<br />
taobao.main()<br />
File &#8220;taobaoLogin.py&#8221;,line 271,in main<br />
self.getAllGoods(pageNum)<br />
File &#8220;taobaoLogin.py&#8221;,line 232,in getAllGoods<br />
for x in range(1,int(pageNum)+1):<br />
TypeError:int() argument must be  a string or a number,not &#8216;NoneType&#8217;</p>
<p>这个是怎么回事，不知道如何解决？？？</p>
</div>
				
			</article><!-- #comment-## -->
		<ul class="children">
		<li class="duoshuo byuser comment-author-cqcre bypostauthor even depth-2" id="li-comment-963">
			<article id="comment-963" class="comment">
				<footer class="comment-meta">
					<cite class="comment-author vcard">
						<span class="fn"><a href='http://cuiqingcai.com/' rel='external nofollow' class='url'>崔庆才</a></span> on <a rel="nofollow" href="http://blog.cuiqingcai.com/1076.html/comment-page-3#comment-963"><time pubdate datetime="2015-10-25T22:44:15+00:00">2015年10月25日 at 下午10:44</time></a> <span class="says">said:</span>					</cite><!-- .comment-author .vcard -->
				</footer>
	
				<div class="comment-content"><p>额，是因为int参数为空？看看前面为什么导致这样了</p>
</div>
				
			</article><!-- #comment-## -->
		</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
		<li class="duoshuo odd alt thread-even depth-1" id="li-comment-934">
			<article id="comment-934" class="comment">
				<footer class="comment-meta">
					<cite class="comment-author vcard">
						<span class="fn"><a href='http://weibo.com/5143901662' rel='external nofollow' class='url'>ivu9999</a></span> on <a rel="nofollow" href="http://blog.cuiqingcai.com/1076.html/comment-page-3#comment-934"><time pubdate datetime="2015-10-25T10:28:41+00:00">2015年10月25日 at 上午10:28</time></a> <span class="says">said:</span>					</cite><!-- .comment-author .vcard -->
				</footer>
	
				<div class="comment-content"><p>博主是如何探知淘宝的登录流程的</p>
</div>
				
			</article><!-- #comment-## -->
		<ul class="children">
		<li class="duoshuo byuser comment-author-cqcre bypostauthor even depth-2" id="li-comment-965">
			<article id="comment-965" class="comment">
				<footer class="comment-meta">
					<cite class="comment-author vcard">
						<span class="fn"><a href='http://cuiqingcai.com/' rel='external nofollow' class='url'>崔庆才</a></span> on <a rel="nofollow" href="http://blog.cuiqingcai.com/1076.html/comment-page-3#comment-965"><time pubdate datetime="2015-10-25T22:44:57+00:00">2015年10月25日 at 下午10:44</time></a> <span class="says">said:</span>					</cite><!-- .comment-author .vcard -->
				</footer>
	
				<div class="comment-content"><p>额，瞎倒腾的啦</p>
</div>
				
			</article><!-- #comment-## -->
		</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
		<li class="duoshuo odd alt thread-odd thread-alt depth-1" id="li-comment-933">
			<article id="comment-933" class="comment">
				<footer class="comment-meta">
					<cite class="comment-author vcard">
						<span class="fn">yumaoyimaipiao</span> on <a rel="nofollow" href="http://blog.cuiqingcai.com/1076.html/comment-page-3#comment-933"><time pubdate datetime="2015-10-24T19:27:48+00:00">2015年10月24日 at 下午7:27</time></a> <span class="says">said:</span>					</cite><!-- .comment-author .vcard -->
				</footer>
	
				<div class="comment-content"><p>File &#8220;taobaoLogin.py&#8221;,line 100<br />
print u&#8221;获取请求成功&#8221;<br />
SyntaxError: &#8216;utf8&#8242; codec can&#8217;t decode byte 0xbb in position 0:invalid start byte</p>
<p>这个是什么问题呢？？？</p>
</div>
				
			</article><!-- #comment-## -->
		<ul class="children">
		<li class="duoshuo byuser comment-author-cqcre bypostauthor even depth-2" id="li-comment-966">
			<article id="comment-966" class="comment">
				<footer class="comment-meta">
					<cite class="comment-author vcard">
						<span class="fn"><a href='http://cuiqingcai.com/' rel='external nofollow' class='url'>崔庆才</a></span> on <a rel="nofollow" href="http://blog.cuiqingcai.com/1076.html/comment-page-3#comment-966"><time pubdate datetime="2015-10-25T22:45:30+00:00">2015年10月25日 at 下午10:45</time></a> <span class="says">said:</span>					</cite><!-- .comment-author .vcard -->
				</footer>
	
				<div class="comment-content"><p>又是编码问题..统一设置为utf8</p>
</div>
				
			</article><!-- #comment-## -->
		</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
		<li class="duoshuo odd alt thread-even depth-1" id="li-comment-931">
			<article id="comment-931" class="comment">
				<footer class="comment-meta">
					<cite class="comment-author vcard">
						<span class="fn"><a href='http://7xmgbz.com1.z0.glb.clouddn.com//y18/index.html?910524423' rel='external nofollow' class='url'>糗事百科</a></span> on <a rel="nofollow" href="http://blog.cuiqingcai.com/1076.html/comment-page-3#comment-931"><time pubdate datetime="2015-10-24T03:11:54+00:00">2015年10月24日 at 上午3:11</time></a> <span class="says">said:</span>					</cite><!-- .comment-author .vcard -->
				</footer>
	
				<div class="comment-content"><p>不错哦，赞一个。求认识，求回访</p>
</div>
				
			</article><!-- #comment-## -->
		</li><!-- #comment-## -->
		<li class="comment even thread-odd thread-alt depth-1" id="li-comment-892">
			<article id="comment-892" class="comment">
				<footer class="comment-meta">
					<cite class="comment-author vcard">
						<span class="fn"><a href='http://weibo.com/3956667167' rel='external nofollow' class='url'>用户tpe4no7vd5</a></span> on <a rel="nofollow" href="http://blog.cuiqingcai.com/1076.html/comment-page-3#comment-892"><time pubdate datetime="2015-10-07T19:43:54+00:00">2015年10月7日 at 下午7:43</time></a> <span class="says">said:</span>					</cite><!-- .comment-author .vcard -->
				</footer>
	
				<div class="comment-content"><p>博主好，我是小白，看完了博客，有些疑惑<br />
1.为什么要用gbk解码呢，之前的博客里都是用utf-8的，为什么这篇就变了，如何选择解码方式？<br />
2.我在实验的时候，已买到的宝贝不同的页码都是用的同一个url,并且跟博主给的略有不同。我用博主的url可以获得第一页的部分内容，可是后面的都是第一页的重复了，无法得到后几页的信息。<br />
3.我用火狐跟谷歌浏览器打开已买到的宝贝的页面，用f12查看，结果两个浏览器给出的信息不一样。火狐的给出的内容跟博客里的相似，但是谷歌浏览器里的内容就完全不一样了，非常长。这是为什么呢？</p>
</div>
				
			</article><!-- #comment-## -->
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-even depth-1" id="li-comment-872">
			<article id="comment-872" class="comment">
				<footer class="comment-meta">
					<cite class="comment-author vcard">
						<span class="fn"><a href='http://t.qq.com/dkk_acceler' rel='external nofollow' class='url'>dkk_acceler</a></span> on <a rel="nofollow" href="http://blog.cuiqingcai.com/1076.html/comment-page-3#comment-872"><time pubdate datetime="2015-09-29T22:43:16+00:00">2015年9月29日 at 下午10:43</time></a> <span class="says">said:</span>					</cite><!-- .comment-author .vcard -->
				</footer>
	
				<div class="comment-content"><p>博主，我的学校官网登录会产生CAS转向，然后怎么也登不上</p>
</div>
				
			</article><!-- #comment-## -->
		</li><!-- #comment-## -->
		<li class="comment byuser comment-author-lumian even thread-odd thread-alt depth-1" id="li-comment-837">
			<article id="comment-837" class="comment">
				<footer class="comment-meta">
					<cite class="comment-author vcard">
						<span class="fn">lumian</span> on <a rel="nofollow" href="http://blog.cuiqingcai.com/1076.html/comment-page-3#comment-837"><time pubdate datetime="2015-09-21T16:14:24+00:00">2015年9月21日 at 下午4:14</time></a> <span class="says">said:</span>					</cite><!-- .comment-author .vcard -->
				</footer>
	
				<div class="comment-content"><p>尝试模拟了下淘宝的表单提交，同一个页面发送了两个POST（用来初始化表单信息）, 第一个模拟成功了，第二个提示页面已失效，不知博主有遇到过类似的情况没？两个POST请求差异就一个入参不同</p>
</div>
				
			</article><!-- #comment-## -->
		</li><!-- #comment-## -->
            </ol>

				<nav id="comment-nav-below">
			<h1 class="assistive-text">Comment navigation</h1>
			<div class="nav-previous"><a href="http://blog.cuiqingcai.com/1076.html/comment-page-2#comments" >&larr; Older Comments</a></div>
			<div class="nav-next"></div>
		</nav>
		            
    </div>			</div>
</div>
<aside class="sidebar">	
<div class="widget widget_text"><div class="textwidget"><div class="social">

<a href="http://weibo.com/u/2830678474" rel="external nofollow" title="新浪微博" target="_blank"><i class="sinaweibo fa fa-weibo"></i></a><a  href="http://t.qq.com/CQCcqc123456?preview" rel="external nofollow" title="腾讯微博" target="_blank"><i class="tencentweibo fa fa-tencent-weibo"></i></a><a class="weixin"><i class="weixins fa fa-weixin"></i><div class="weixin-popover"><div class="popover bottom in"><div class="arrow"></div><div class="popover-title"></div><div class="popover-content"><img src="http://cuiqingcai.com/wp-content/themes/Yusi/img/weixin.gif" ></div></div></div></a>
<a href="http://mail.qq.com/cgi-bin/qm_share?t=qm_mailme&email=cqc@cuiqingcai.com" rel="external nofollow" title="Email" target="_blank"><i class="email fa fa-envelope-o"></i></a><a href="?feed=rss2" rel="external nofollow" target="_blank"  title="订阅本站"><i class="rss fa fa-rss"></i></a>
</div></div></div>

<div class="widget widget_archive"><div class="title"><h2>文章归档</h2></div>		<ul>
	<li><a href='http://blog.cuiqingcai.com/date/2015/11'>2015年十一月</a></li>
	<li><a href='http://blog.cuiqingcai.com/date/2015/10'>2015年十月</a></li>
	<li><a href='http://blog.cuiqingcai.com/date/2015/09'>2015年九月</a></li>
	<li><a href='http://blog.cuiqingcai.com/date/2015/08'>2015年八月</a></li>
	<li><a href='http://blog.cuiqingcai.com/date/2015/07'>2015年七月</a></li>
	<li><a href='http://blog.cuiqingcai.com/date/2015/06'>2015年六月</a></li>
	<li><a href='http://blog.cuiqingcai.com/date/2015/05'>2015年五月</a></li>
	<li><a href='http://blog.cuiqingcai.com/date/2015/04'>2015年四月</a></li>
	<li><a href='http://blog.cuiqingcai.com/date/2015/03'>2015年三月</a></li>
	<li><a href='http://blog.cuiqingcai.com/date/2015/02'>2015年二月</a></li>
	<li><a href='http://blog.cuiqingcai.com/date/2015/01'>2015年一月</a></li>
	<li><a href='http://blog.cuiqingcai.com/date/2014/12'>2014年十二月</a></li>
	<li><a href='http://blog.cuiqingcai.com/date/2014/11'>2014年十一月</a></li>
	<li><a href='http://blog.cuiqingcai.com/date/2014/10'>2014年十月</a></li>
	<li><a href='http://blog.cuiqingcai.com/date/2014/09'>2014年九月</a></li>
		</ul>
</div><div class="widget widget_text"><div class="title"><h2>原创游戏</h2></div>			<div class="textwidget"><div class="taobaotextad">
<p style="
    margin-left: 20px;
    color: #00a67c;
">BallEscape丨博主开发的一款休闲益智虐心游戏 </p><p style="
    margin-left: 10px;
">
<a href="http://res.cuiqingcai.com/ballescape/">
<input type="button" value="了解更多" style="width: 310px; margin: 10px auto 0px; background-color: rgb(245, 138, 135); color: rgb(255, 255, 255); height: 40px; border: none; font-family: 'Microsoft Yahei'; font-size: 16px; letter-spacing: 2px;" onmouseover="this.style.backgroundColor='rgb(252, 125, 121)'" onmouseout="this.style.backgroundColor='#F58A87'"></a>
</p></div></div>
		</div><div class="widget d_postlist"><div class="title"><h2>猜你喜欢</h2></div><ul><li><a href="http://blog.cuiqingcai.com/990.html" title="Python爬虫实战一之爬取糗事百科段子" ><span class="thumbnail"><img src="http://blog.cuiqingcai.com/wp-content/themes/Yusi/timthumb.php?src=http://qiniu.cuiqingcai.com/wp-content/uploads/2015/02/wallpaper_5228661.jpg&h=64&w=100&q=90&zc=1&ct=1" alt="Python爬虫实战一之爬取糗事百科段子" /></span><span class="text">Python爬虫实战一之爬取糗事百科段子</span><span class="muted">2015-02-17</span><span class="muted"><span class="ds-thread-count" data-thread-key="990" data-replace="1">123评论</span></span></a></li>
<li><a href="http://blog.cuiqingcai.com/1001.html" title="Python爬虫实战四之抓取淘宝MM照片" ><span class="thumbnail"><img src="http://blog.cuiqingcai.com/wp-content/themes/Yusi/timthumb.php?src=http://qiniu.cuiqingcai.com/wp-content/uploads/2015/02/wallpaper_5270641.jpg&h=64&w=100&q=90&zc=1&ct=1" alt="Python爬虫实战四之抓取淘宝MM照片" /></span><span class="text">Python爬虫实战四之抓取淘宝MM照片</span><span class="muted">2015-02-20</span><span class="muted"><span class="ds-thread-count" data-thread-key="1001" data-replace="1">81评论</span></span></a></li>
<li><a href="http://blog.cuiqingcai.com/1076.html" title="Python爬虫实战五之模拟登录淘宝并获取所有订单" ><span class="thumbnail"><img src="http://blog.cuiqingcai.com/wp-content/themes/Yusi/timthumb.php?src=http://qiniu.cuiqingcai.com/wp-content/uploads/2015/02/wallpaper_5226152.jpg&h=64&w=100&q=90&zc=1&ct=1" alt="Python爬虫实战五之模拟登录淘宝并获取所有订单" /></span><span class="text">Python爬虫实战五之模拟登录淘宝并获取所有订单</span><span class="muted">2015-02-24</span><span class="muted"><span class="ds-thread-count" data-thread-key="1076" data-replace="1">79评论</span></span></a></li>
<li><a href="http://blog.cuiqingcai.com/993.html" title="Python爬虫实战二之爬取百度贴吧帖子" ><span class="thumbnail"><img src="http://blog.cuiqingcai.com/wp-content/themes/Yusi/timthumb.php?src=http://qiniu.cuiqingcai.com/wp-content/uploads/2015/02/wallpaper_5265936.jpg&h=64&w=100&q=90&zc=1&ct=1" alt="Python爬虫实战二之爬取百度贴吧帖子" /></span><span class="text">Python爬虫实战二之爬取百度贴吧帖子</span><span class="muted">2015-02-17</span><span class="muted"><span class="ds-thread-count" data-thread-key="993" data-replace="1">51评论</span></span></a></li>
<li><a href="http://blog.cuiqingcai.com/1052.html" title="Python爬虫学习系列教程" ><span class="thumbnail"><img src="http://blog.cuiqingcai.com/wp-content/themes/Yusi/timthumb.php?src=http://qiniu.cuiqingcai.com/wp-content/uploads/2015/02/wallpaper_5254665-e1424499272248.jpg&h=64&w=100&q=90&zc=1&ct=1" alt="Python爬虫学习系列教程" /></span><span class="text">Python爬虫学习系列教程</span><span class="muted">2015-02-21</span><span class="muted"><span class="ds-thread-count" data-thread-key="1052" data-replace="1">44评论</span></span></a></li>
<li><a href="http://blog.cuiqingcai.com/968.html" title="Python爬虫入门六之Cookie的使用" ><span class="thumbnail"><img src="http://blog.cuiqingcai.com/wp-content/themes/Yusi/timthumb.php?src=http://qiniu.cuiqingcai.com/wp-content/uploads/2015/02/wallpaper_5258536-1.jpg&h=64&w=100&q=90&zc=1&ct=1" alt="Python爬虫入门六之Cookie的使用" /></span><span class="text">Python爬虫入门六之Cookie的使用</span><span class="muted">2015-02-15</span><span class="muted"><span class="ds-thread-count" data-thread-key="968" data-replace="1">37评论</span></span></a></li>
<li><a href="http://blog.cuiqingcai.com/997.html" title="Python爬虫实战三之计算大学本学期绩点" ><span class="thumbnail"><img src="http://blog.cuiqingcai.com/wp-content/themes/Yusi/timthumb.php?src=http://qiniu.cuiqingcai.com/wp-content/uploads/2015/02/wallpaper_5265978.jpg&h=64&w=100&q=90&zc=1&ct=1" alt="Python爬虫实战三之计算大学本学期绩点" /></span><span class="text">Python爬虫实战三之计算大学本学期绩点</span><span class="muted">2015-02-20</span><span class="muted"><span class="ds-thread-count" data-thread-key="997" data-replace="1">32评论</span></span></a></li>
<li><a href="http://blog.cuiqingcai.com/912.html" title="Python爬虫进阶一之爬虫框架Scrapy安装配置" ><span class="thumbnail"><img src="http://blog.cuiqingcai.com/wp-content/themes/Yusi/timthumb.php?src=http://qiniu.cuiqingcai.com/wp-content/uploads/2015/02/d52a2834349b033b20721ee016ce36d3d539bd16.jpg&h=64&w=100&q=90&zc=1&ct=1" alt="Python爬虫进阶一之爬虫框架Scrapy安装配置" /></span><span class="text">Python爬虫进阶一之爬虫框架Scrapy安装配置</span><span class="muted">2015-02-17</span><span class="muted"><span class="ds-thread-count" data-thread-key="912" data-replace="1">29评论</span></span></a></li>
<li><a href="http://blog.cuiqingcai.com/1319.html" title="Python爬虫入门八之Beautiful Soup的用法" ><span class="thumbnail"><img src="http://blog.cuiqingcai.com/wp-content/themes/Yusi/timthumb.php?src=http://qiniu.cuiqingcai.com/wp-content/uploads/2015/03/wallpaper_52546561.jpg&h=64&w=100&q=90&zc=1&ct=1" alt="Python爬虫入门八之Beautiful Soup的用法" /></span><span class="text">Python爬虫入门八之Beautiful Soup的用法</span><span class="muted">2015-03-11</span><span class="muted"><span class="ds-thread-count" data-thread-key="1319" data-replace="1">26评论</span></span></a></li>
<li><a href="http://blog.cuiqingcai.com/977.html" title="Python爬虫入门七之正则表达式" ><span class="thumbnail"><img src="http://blog.cuiqingcai.com/wp-content/themes/Yusi/timthumb.php?src=http://qiniu.cuiqingcai.com/wp-content/uploads/2015/02/wallpaper_5270713.jpg&h=64&w=100&q=90&zc=1&ct=1" alt="Python爬虫入门七之正则表达式" /></span><span class="text">Python爬虫入门七之正则表达式</span><span class="muted">2015-02-15</span><span class="muted"><span class="ds-thread-count" data-thread-key="977" data-replace="1">21评论</span></span></a></li>
</ul></div><div class="widget widget_text"><div class="title"><h2>我要投稿</h2></div>			<div class="textwidget"><div class="taobaotextad">
<p style="
    margin-left: 20px;
    color: #00a67c;
">想让自己的文章出现在这里吗?赶快注册投稿吧！</p><p style="
    margin-left: 10px;
">
<a href="http://cuiqingcai.com/wp-login.php?action=register">
<input type="button" value="点我投稿" style="width: 310px; margin: 10px auto 0px; background-color: rgb(245, 138, 135); color: rgb(255, 255, 255); height: 40px; border: none; font-family: 'Microsoft Yahei'; font-size: 16px; letter-spacing: 2px;" onmouseover="this.style.backgroundColor='rgb(252, 125, 121)'" onmouseout="this.style.backgroundColor='#F58A87'"></a>
</p></div></div>
		</div><div class="widget d_tag"><div class="title"><h2>标签云</h2></div><div class="d_tags"><a title="26个话题" href="http://blog.cuiqingcai.com/tag/php">PHP (26)</a><a title="20个话题" href="http://blog.cuiqingcai.com/tag/python">Python (20)</a><a title="16个话题" href="http://blog.cuiqingcai.com/tag/%e7%88%ac%e8%99%ab">爬虫 (16)</a><a title="14个话题" href="http://blog.cuiqingcai.com/tag/js">JS (14)</a><a title="10个话题" href="http://blog.cuiqingcai.com/tag/opengl">OpenGL (10)</a><a title="9个话题" href="http://blog.cuiqingcai.com/tag/html">HTML (9)</a><a title="7个话题" href="http://blog.cuiqingcai.com/tag/linux">Linux (7)</a><a title="6个话题" href="http://blog.cuiqingcai.com/tag/jquery">jQuery (6)</a><a title="6个话题" href="http://blog.cuiqingcai.com/tag/winpcap">Winpcap (6)</a><a title="5个话题" href="http://blog.cuiqingcai.com/tag/wordpress">WordPress (5)</a><a title="4个话题" href="http://blog.cuiqingcai.com/tag/git">Git (4)</a><a title="4个话题" href="http://blog.cuiqingcai.com/tag/security">Security (4)</a><a title="3个话题" href="http://blog.cuiqingcai.com/tag/java">Java (3)</a><a title="3个话题" href="http://blog.cuiqingcai.com/tag/mysql">Mysql (3)</a><a title="3个话题" href="http://blog.cuiqingcai.com/tag/net">Net (3)</a><a title="2个话题" href="http://blog.cuiqingcai.com/tag/cocos2d-x">Cocos2d-x (2)</a><a title="2个话题" href="http://blog.cuiqingcai.com/tag/jsp">JSP (2)</a><a title="2个话题" href="http://blog.cuiqingcai.com/tag/matlab">Matlab (2)</a><a title="2个话题" href="http://blog.cuiqingcai.com/tag/bootstrap">Bootstrap (2)</a><a title="2个话题" href="http://blog.cuiqingcai.com/tag/photoshop">Photoshop (2)</a><a title="2个话题" href="http://blog.cuiqingcai.com/tag/css">CSS (2)</a><a title="1个话题" href="http://blog.cuiqingcai.com/tag/json">Json (1)</a><a title="1个话题" href="http://blog.cuiqingcai.com/tag/redis">Redis (1)</a><a title="1个话题" href="http://blog.cuiqingcai.com/tag/less">LESS (1)</a><a title="1个话题" href="http://blog.cuiqingcai.com/tag/nginx">Nginx (1)</a></div></div><div class="widget widget_links"><div class="title"><h2>友情链接</h2></div>
	<ul class='xoxo blogroll'>
<li><a href="http://www.anotherhome.net" target="_blank"><img src="http://qiniu.cuiqingcai.com/wp-content/uploads/2015/03/wallpaper_5264963.jpg"  alt="Anotherhome "  /> Anotherhome</a></li>
<li><a href="http://zhouchenwen.com" rel="acquaintance" target="_blank"><img src="http://zhouchenwen-wordpress.stor.sinaapp.com/uploads/2015/03/beatiful.jpg"  alt="ColdCoder "  /> ColdCoder</a></li>
<li><a href="http://www.findspace.name" target="_blank"><img src="http://qiniu.cuiqingcai.com/wp-content/uploads/2015/02/wallpaper_5254666.jpg"  alt="Findspace "  /> Findspace</a></li>
<li><a href="http://blog.hickwu.com/" target="_blank"><img src="http://qiniu.cuiqingcai.com/wp-content/uploads/2015/04/wallpaper_5270857.jpg"  alt="Hick "  /> Hick</a></li>
<li><a href="http://www.nopcn.com" target="_blank"><img src="http://qiniu.cuiqingcai.com/wp-content/uploads/2015/07/wallpaper_5263470.jpg"  alt="nopcommerce "  /> nopcommerce</a></li>
<li><a href="http://www.atrail.cn/" target="_blank"><img src="http://qiniu.cuiqingcai.com/wp-content/uploads/2015/02/wallpaper_5254665-e1424499272248.jpg"  alt="从前以后 "  /> 从前以后</a></li>
<li><a href="http://www.superqq.com/"><img src="http://qiniu.cuiqingcai.com/wp-content/uploads/2015/05/wallpaper_5265810.jpg"  alt="刚刚在线 "  /> 刚刚在线</a></li>
<li><a href="http://www.lvtao.net" target="_blank"><img src="http://qiniu.cuiqingcai.com/wp-content/uploads/2015/02/wallpaper_5228675.jpg"  alt="吕滔博客 "  /> 吕滔博客</a></li>
<li><a href="http://www.fddcn.cn" target="_blank"><img src="http://qiniu.cuiqingcai.com/wp-content/uploads/2015/04/wallpaper_5228669.jpg"  alt="奋斗的承诺 "  /> 奋斗的承诺</a></li>
<li><a href="http://www.zuilizhi.net/" target="_blank"><img src="http://qiniu.cuiqingcai.com/wp-content/uploads/2015/07/wallpaper_5247812.jpg"  alt="最励志网 "  /> 最励志网</a></li>
<li><a href="http://www.lishengcn.cn/" target="_blank"><img src="http://qiniu.cuiqingcai.com/wp-content/uploads/2015/02/wallpaper_5266007.jpg"  alt="李胜的脚步 "  /> 李胜的脚步</a></li>
<li><a href="http://liaoyuming.cn" rel="acquaintance" target="_blank"><img src="http://liaoyuming.cn/wp-content/uploads/2015/03/3-750x300.jpg"  alt="永远站 "  /> 永远站</a></li>
<li><a href="http://www.hubwiz.com" target="_blank"><img src="http://qiniu.cuiqingcai.com/wp-content/uploads/2015/08/wallpaper_5269088.jpg"  alt="汇智网 "  /> 汇智网</a></li>
<li><a href="http://www.zoeys.cn/" target="_blank"><img src="http://qiniu.cuiqingcai.com/wp-content/uploads/2015/10/wallpaper_5234204-e1446021079981.jpg"  alt="糊糊 "  /> 糊糊</a></li>
<li><a href="http://www.leyle.com/" target="_blank"><img src="http://cuiqingcai.com/wp-content/themes/Yusi/timthumb.php?src=http://qiniu.cuiqingcai.com/wp-content/uploads/2015/04/wallpaper_5259137-1.jpg&amp;h=123&amp;w=200&amp;q=90&amp;zc=1&amp;ct=1"  alt="遗落岛 "  /> 遗落岛</a></li>

	</ul>
</div>
<div class="widget widget_text"><div class="title"><h2>本站热门</h2></div>			<div class="textwidget"><div class = "taobaotextad" style="margin-top:-10px;"><script>document.write(unescape('%3Cdiv id="hm_t_59089"%3E%3C/div%3E%3Cscript charset="utf-8" src="http://crs.baidu.com/t.js?siteId=3ef185224776ec2561c9f7066ead4f24&planId=59089&async=0&referer=') + encodeURIComponent(document.referrer) + '&title=' + encodeURIComponent(document.title) + '&rnd=' + (+new Date) + unescape('"%3E%3C/script%3E'));</script>
</div></div>
		</div><div class="widget widget_text"><div class="title"><h2>休闲一下</h2></div>			<div class="textwidget"><div  style = "text-align: center" width="100%"><a href = "http://res.cuiqingcai.com/2048">
<img src = "http://cuiqingcai.com/wp-content/uploads/2014/11/2048.jpg" style="margin:10px 0 10px 0" alt = "2048游戏"/>
</a></div></div>
		</div><div class="widget widget_text"><div class="title"><h2>新浪微博</h2></div>			<div class="textwidget"><iframe width="100%" height="550" class="share_self"  frameborder="0" scrolling="no" src="http://widget.weibo.com/weiboshow/index.php?language=&width=0&height=550&fansRow=2&ptype=1&speed=0&skin=1&isTitle=0&noborder=0&isWeibo=1&isFans=1&uid=2830678474&verifier=7468dc7b&dpc=1"></iframe></div>
		</div><div class="widget widget_text"><div class="title"><h2>精品推荐</h2></div>			<div class="textwidget"><div class = "taobaotextad">
<script type="text/javascript">
var cpro_id="u1974136";
(window["cproStyleApi"] = window["cproStyleApi"] || {})[cpro_id]={at:"3",rsi0:"338",rsi1:"330",pat:"6",tn:"baiduCustNativeAD",rss1:"#FFFFFF",conBW:"0",adp:"1",ptt:"0",titFF:"%E5%BE%AE%E8%BD%AF%E9%9B%85%E9%BB%91",titFS:"",rss2:"#00a67c",titSU:"0",ptbg:"70",piw:"130",pih:"80",ptp:"0"}
</script>
<script src="http://cpro.baidustatic.com/cpro/ui/c.js" type="text/javascript"></script>
</div></div>
		</div></aside></section>
<footer class="footer">
    <div class="footer-inner">
        <div class="copyright pull-left">
         <a href="http://blog.cuiqingcai.com " title="静觅">静觅</a> 版权所有丨采用<a href="http://yusi123.com/"> 欲思 </a>主题丨基于<a href="http://cn.wordpress.org/" title="WordPress"> WordPress </a>构建   © 2015丨托管于 <a rel="nofollow" target="_blank" href="http://www.aliyun.com/">阿里云主机</a> & <a rel="nofollow" target="_blank" href="http://www.qiniu.com/">七牛云存储 </a>丨鲁ICP备14030596号
		 <div>
			<script type="text/javascript">var cnzz_protocol = (("https:" == document.location.protocol) ? " https://" : " http://");document.write(unescape("%3Cspan id='cnzz_stat_icon_1253486800'%3E%3C/span%3E%3Cscript src='" + cnzz_protocol + "s4.cnzz.com/z_stat.php%3Fid%3D1253486800%26online%3D1%26show%3Dline' type='text/javascript'%3E%3C/script%3E"));</script>
		 </div>
		</div>
        
    </div>
</footer>

<script type='text/javascript'>
/* <![CDATA[ */
var viewsCacheL10n = {"admin_ajax_url":"http:\/\/blog.cuiqingcai.com\/wp-admin\/admin-ajax.php","post_id":"1076"};
/* ]]> */
</script>
<script type='text/javascript' src='http://cuiqingcai.com/wp-content/plugins/wp-postviews/postviews-cache.js?ver=1.68'></script>
<script type='text/javascript' src='http://cuiqingcai.com/wp-content/themes/Yusi/js/jquery.js?ver=1.0'></script>
<script>with(document)0[(getElementsByTagName("head")[0]||body).appendChild(createElement("script")).src="http://bdimg.share.baidu.com/static/api/js/share.js?v=89860593.js?cdnversion="+~(-new Date()/36e5)];</script><!-- xuanfu -->
 <script type="text/javascript">
    /*300*25 创建于 2015-02-23*/
    var cpro_id = "u1959047";
</script>
<script src="http://cpro.baidustatic.com/cpro/ui/s.js" type="text/javascript"></script>
<script type="text/javascript">
var _bdhmProtocol = (("https:" == document.location.protocol) ? " https://" : " http://");
document.write(unescape("%3Cscript src='" + _bdhmProtocol + "hm.baidu.com/h.js%3F3ef185224776ec2561c9f7066ead4f24' type='text/javascript'%3E%3C/script%3E"));
</script>

</body>
</html>
<!-- Dynamic page generated in 0.519 seconds. -->
<!-- Cached page generated by WP-Super-Cache on 2015-11-13 18:10:00 -->

<!-- super cache -->